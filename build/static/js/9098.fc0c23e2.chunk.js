"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9098],{89802:function(e,n,t){t.d(n,{q:function(){return s}});var a=t(1413),i=t(29439),l=t(45987),r=t(47313),o=t(74294),u=t(72652),c=t(46417),d=["fetchOptions","refetch"],s=function(e){var n=e.fetchOptions,t=e.refetch,s=void 0!==t&&t,v=(0,l.Z)(e,d),f=(0,r.useState)(!1),p=(0,i.Z)(f,2),Z=p[0],m=p[1],h=(0,r.useState)([]),x=(0,i.Z)(h,2),j=x[0],g=x[1];return(0,c.jsx)(o.Z,(0,a.Z)((0,a.Z)({labelInValue:!0,filterOption:!1,notFoundContent:Z?(0,c.jsx)(u.Z,{size:"small"}):"no results"},v),{},{options:Z?[]:j,onFocus:function(){j.length&&!s||(m(!0),n().then((function(e){g(e),m(!1)})))}}))}},20776:function(e,n,t){t.d(n,{o:function(){return f}});var a=t(1413),i=t(29439),l=t(45987),r=t(47313),o=t(84762),u=t(72652),c=t(12279),d=t.n(c),s=t(46417),v=["fetchOptions","refetch","debounceTimeout"],f=function(e){var n=e.fetchOptions,t=e.refetch,c=void 0!==t&&t,f=e.debounceTimeout,p=void 0===f?400:f,Z=(0,l.Z)(e,v),m=(0,r.useState)(!1),h=(0,i.Z)(m,2),x=h[0],j=h[1],g=(0,r.useState)([]),y=(0,i.Z)(g,2),b=y[0],k=y[1],q=(0,r.useMemo)((function(){return d()((function(e){k([]),j(!0),n(e).then((function(e){k(e),j(!1)}))}),p)}),[]);return(0,s.jsx)(o.Z,(0,a.Z)({showSearch:!0,labelInValue:!0,filterTreeNode:function(e,n){var t;return null===(t=n.label)||void 0===t?void 0:t.localeCompare(e)},treeLine:!0,onSearch:function(e){return q(e)},treeData:x?[]:b,treeDefaultExpandAll:!0,onFocus:function(){b.length&&!c||(j(!0),n().then((function(e){k(e),j(!1)})))},notFoundContent:x?(0,s.jsx)(u.Z,{size:"small"}):"no results"},Z))}},55940:function(e,n,t){t.d(n,{Z:function(){return v}});var a=t(1413),i=t(45987),l=(t(47313),t(59491)),r=t(47515),o=t(23560),u=t(24511),c=t(79492),d=t(46417),s=["size","onClick","type"];function v(e){var n=e.size,t=void 0===n?"":n,v=e.onClick,f=e.type,p=void 0===f?"default":f,Z=(0,i.Z)(e,s),m=(0,u.$)().t,h=(0,c.Z)().isDemo;return(0,d.jsx)(l.Z,(0,a.Z)({size:t,icon:(0,d.jsx)(r.Z,{}),onClick:function(e){h?o.Am.warning(m("cannot.work.demo")):v(e)},type:p},Z))}},73431:function(e,n,t){var a=t(47313),i=t(39180),l=t(2717),r=t(28830),o=t(60535),u=t(46417);n.Z=function(){var e=(0,l.I0)(),n=(0,l.v9)((function(e){return e.formLang}),l.wU),t=n.languages,c=n.defaultLang;(0,a.useEffect)((function(){o.Z.getAllActive().then((function(n){var t=n.data;e((0,r.dc)(t)),e((0,r.mh)(t.find((function(e){return 1===e.default})).locale))}))}),[]);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(i.ZP.Group,{value:c,onChange:function(n){var t=n.target.value;e((0,r.mh)(t))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((function(e){return(0,u.jsx)(i.ZP.Button,{value:e.locale,children:e.title},e.id)}))})})}},89281:function(e,n,t){t.d(n,{h:function(){return f}});var a=t(1413),i=t(29439),l=t(45987),r=t(47313),o=t(12279),u=t.n(o),c=t(74294),d=t(72652),s=t(46417),v=["fetchOptions","debounceTimeout","onClear"],f=function(e){var n=e.fetchOptions,t=e.debounceTimeout,o=void 0===t?400:t,f=e.onClear,p=(0,l.Z)(e,v),Z=(0,r.useState)(!1),m=(0,i.Z)(Z,2),h=m[0],x=m[1],j=(0,r.useState)([]),g=(0,i.Z)(j,2),y=g[0],b=g[1],k=(0,r.useMemo)((function(){return u()((function(e){b([]),x(!0),n(e).then((function(e){b(e),x(!1)}))}),o)}),[n,o]);return(0,s.jsx)(c.Z,(0,a.Z)((0,a.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:k,onClear:function(){k(""),f&&f()},notFoundContent:h?(0,s.jsx)(d.Z,{size:"small"}):"no results"},p),{},{options:y,onFocus:function(){k("")}}))}},33724:function(e,n){n.Z=function(e){var n=[],t=e.length-1;return function a(i,l){for(var r=0,o=null===(u=e[l])||void 0===u?void 0:u.length;r<o;r++){var u,c=i.slice(0);c.push(e[l][r]),l===t?n.push(c):a(c,l+1)}}([],0),n}},75336:function(e,n,t){t.d(n,{Z:function(){return l}});var a=t(93433),i=t(4942);function l(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title",l=e.map((function(e){return(0,i.Z)({},e.locale,""===n["".concat(t,"[").concat(e.locale,"]")]?void 0:n["".concat(t,"[").concat(e.locale,"]")])}));return Object.assign.apply(Object,[{}].concat((0,a.Z)(l)))}},71136:function(e,n,t){t.d(n,{Z:function(){return l}});var a=t(29439),i=t(47313);function l(e,n){var t=(0,i.useState)(e),l=(0,a.Z)(t,2),r=l[0],o=l[1];return(0,i.useEffect)((function(){var t=setTimeout((function(){o(e)}),n);return function(){clearTimeout(t)}}),[e,n]),r}},11101:function(e,n,t){var a=t(34344),i={getAll:function(e){return a.Z.get("rest/brands/paginate",{params:e})},getById:function(e,n){return a.Z.get("rest/brands/".concat(e),{params:n})}};n.Z=i},29955:function(e,n,t){var a=t(34344),i={getAll:function(e){return a.Z.get("dashboard/seller/categories/paginate",{params:e})},getById:function(e,n){return a.Z.get("dashboard/seller/categories/".concat(e),{params:n})},search:function(e){return a.Z.get("dashboard/seller/categories/search",{params:e})},paginateSelect:function(e){return a.Z.get("dashboard/seller/categories/select-paginate",{params:e})}};n.Z=i},33403:function(e,n,t){var a=t(34344),i={getAll:function(e){return a.Z.get("dashboard/seller/units/paginate",{params:e})},getById:function(e,n){return a.Z.get("dashboard/seller/units/".concat(e),{params:n})}};n.Z=i},16137:function(e,n,t){t.d(n,{Z:function(){return y}});var a=t(93433),i=t(4942),l=t(1413),r=t(29439),o=t(47313),u=t(10976),c=t(9274),d=t(59491),s=t(66672),v=t(24511),f=t(73431),p=t(2717),Z=t(22307),m=t(23560),h=t(97340),x=t(75336),j=t(51282),g=t(46417);function y(e){var n=e.modal,t=e.handleCancel,y=e.onSuccess,b=u.Z.useForm(),k=(0,r.Z)(b,1)[0],q=(0,v.$)().t,I=(0,p.I0)(),S=(0,o.useState)(!1),_=(0,r.Z)(S,2),C=_[0],w=_[1],O=(0,o.useState)(!1),N=(0,r.Z)(O,2),F=N[0],U=N[1],A=(0,p.v9)((function(e){return e.formLang}),p.wU),E=A.languages,M=A.defaultLang;function L(e){U(!0),Z.Z.getGroupById(e).then((function(e){var n=e.data;k.setFieldsValue((0,l.Z)((0,l.Z)({},n),function(e){if(!e)return{};var n=e.translations,t=E.map((function(e){var t;return(0,i.Z)({},"title[".concat(e.locale,"]"),null===(t=n.find((function(n){return n.locale===e.locale})))||void 0===t?void 0:t.title)}));return Object.assign.apply(Object,[{}].concat((0,a.Z)(t)))}(n)))})).finally((function(){return U(!1)}))}(0,o.useEffect)((function(){null!==n&&void 0!==n&&n.id&&L(n.id)}),[n]);return(0,g.jsx)(c.Z,{title:null!==n&&void 0!==n&&n.id?q("edit.extra.group"):q("add.extra.group"),visible:!!n,onCancel:t,footer:[(0,g.jsx)(d.Z,{type:"primary",onClick:function(){return k.submit()},loading:C,children:q("save")},"save-button-group"),(0,g.jsx)(d.Z,{type:"default",onClick:t,children:q("cancel")},"cancel-button-group")],children:F?(0,g.jsx)(j.Z,{}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"d-flex justify-content-end",children:(0,g.jsx)(f.Z,{})}),(0,g.jsx)(u.Z,{layout:"vertical",name:"extra-group",form:k,onFinish:function(e){var a={title:(0,x.Z)(E,e),type:"text"};null!==n&&void 0!==n&&n.id?function(e,n){w(!0),Z.Z.updateGroup(e,n).then((function(){m.Am.success(q("successfully.updated")),I((0,h.Vy)()),t()})).finally((function(){return w(!1)}))}(null===n||void 0===n?void 0:n.id,a):function(e){w(!0),Z.Z.createGroup(e).then((function(){m.Am.success(q("successfully.created")),t(),I((0,h.Vy)()),y&&y()})).finally((function(){return w(!1)}))}(a)},children:E.map((function(e){return(0,g.jsx)(u.Z.Item,{rules:[{required:e.locale===M,message:q("required")}],name:"title[".concat(e.locale,"]"),label:q("title"),hidden:e.locale!==M,children:(0,g.jsx)(s.Z,{placeholder:q("title")})},"title"+e.locale)}))})]})})}},84963:function(e,n,t){t.d(n,{Z:function(){return k}});var a=t(15861),i=t(1413),l=t(29439),r=t(87757),o=t.n(r),u=t(10976),c=t(66672),d=t(9274),s=t(59491),v=t(47313),f=t(8922),p=t(24511),Z=t(2717),m=t(23560),h=t(20503),x=t(8550),j=t(34319),g=t(22307),y=t(89281),b=t(46417);function k(e){var n=e.modal,t=e.handleCancel,r=e.onSuccess,k=e.groupId,q=u.Z.useForm(),I=(0,l.Z)(q,1)[0],S=(0,p.$)().t,_=(0,Z.I0)(),C=(0,v.useState)(!1),w=(0,l.Z)(C,2),O=w[0],N=w[1],F=(0,v.useState)("text"),U=(0,l.Z)(F,2),A=U[0],E=U[1],M=(0,v.useState)(null),L=(0,l.Z)(M,2),T=L[0],V=L[1],P=(0,v.useState)(""),W=(0,l.Z)(P,2),G=W[0],B=W[1];(0,Z.v9)((function(e){return e.extraGroup}),Z.wU).extraGroups;(0,v.useEffect)((function(){if(null!==n&&void 0!==n&&n.id){var e,t,a;E(n.group.type);var l=(0,i.Z)((0,i.Z)({},n),{},{extra_group_id:{label:null===n||void 0===n||null===(e=n.group)||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title,value:null===n||void 0===n||null===(a=n.group)||void 0===a?void 0:a.id},value:n.value});switch(n.group.type){case"color":B(n.value);break;case"image":V((0,x.Z)(n.value))}I.setFieldsValue(l)}k&&I.setFieldsValue({extra_group_id:{value:k}})}),[n,k]);function $(e,n){switch(e){case"color":return n.hex;case"text":return n;case"image":return n.name;default:return""}}function z(){return(z=(0,a.Z)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={perPage:10,active:1,search:n},console.log("search => ",t),e.abrupt("return",g.Z.getAllGroups(t).then((function(e){var n;return null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.map((function(e){var n;return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,key:null===e||void 0===e?void 0:e.id}}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,b.jsx)(d.Z,{title:null!==n&&void 0!==n&&n.id?S("edit.extra"):S("add.extra"),visible:!!n,onCancel:t,footer:[(0,b.jsx)(s.Z,{type:"primary",onClick:function(){return I.submit()},loading:O,children:S("save")}),(0,b.jsx)(s.Z,{type:"default",onClick:t,children:S("cancel")})],children:(0,b.jsxs)(u.Z,{name:"extra-form",layout:"vertical",form:I,onFinish:function(e){var a;console.log(e);var i={extra_group_id:null===e||void 0===e||null===(a=e.extra_group_id)||void 0===a?void 0:a.value,value:$(A,e.value)};null!==n&&void 0!==n&&n.id?function(e,n){N(!0),g.Z.updateValue(e,n).then((function(){m.Am.success(S("successfully.updated")),t(),_((0,j.is)())})).finally((function(){return N(!1)}))}(n.id,i):function(e){N(!0),g.Z.createValue(e).then((function(){m.Am.success(S("successfully.created")),t(),_((0,j.is)()),r&&r()})).finally((function(){return N(!1)}))}(i)},children:[(0,b.jsx)(u.Z.Item,{name:"extra_group_id",label:S("extra.group"),hidden:!!k,rules:[{required:!0,message:""}],children:(0,b.jsx)(y.h,{fetchOptions:function(e){return z.apply(this,arguments)}})}),(0,b.jsx)(u.Z.Item,{name:"value",label:S("value"),rules:[{required:!0,message:""}],children:function(e){switch(e){case"color":return(0,b.jsx)(f.xS,{onChangeComplete:function(e){return B(e.hex)},color:G,disableAlpha:!0});case"text":return(0,b.jsx)(c.Z,{placeholder:S("enter.extra.value")});case"image":return(0,b.jsx)(h.Z,{type:"extras",image:T,setImage:V,form:I,name:"value"});default:return""}}(A)})]})})}},89904:function(e,n,t){t.d(n,{Z:function(){return U}});var a=t(93433),i=t(1413),l=t(29439),r=t(47313),o=t(77181),u=t(10976),c=t(45705),d=t(59491),s=t(2717),v=t(18333),f=t(90954),p=t(24511),Z=t(97890),m=t(9274),h=t(32697),x=t(98276),j=t(42346),g=t(22307),y=t(84963),b=t(82138),k=t(46417),q=function(e){var n=e.extra,t=e.onClose,a=e.onSelect,i=(0,p.$)().t,o=(0,r.useState)(!1),u=(0,l.Z)(o,2),c=u[0],s=u[1],v=(0,r.useState)([]),f=(0,l.Z)(v,2),Z=f[0],q=f[1],I=(0,r.useState)([]),S=(0,l.Z)(I,2),_=S[0],C=S[1],w=(0,r.useState)(!1),O=(0,l.Z)(w,2),N=O[0],F=O[1];function U(e){s(!0),g.Z.getGroupById(e).then((function(e){return q(e.data.extra_values.map((function(e){var n;return{label:e.value,value:e.id,group:null===(n=e.group.translation)||void 0===n?void 0:n.title}})))})).finally((function(){s(!1)}))}return(0,r.useEffect)((function(){var e;null!==n&&void 0!==n&&n.value&&(U(n.value),C((null===n||void 0===n||null===(e=n.values)||void 0===e?void 0:e.map((function(e){return e.value})))||[]))}),[null===n||void 0===n?void 0:n.value]),console.log(n),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(m.Z,{visible:!!n,onCancel:t,footer:[(0,k.jsx)(d.Z,{onClick:t,children:i("cancel")}),!c&&Z.length>0&&(0,k.jsx)(d.Z,{onClick:function(){var e=[];Z.forEach((function(n){_.forEach((function(t){n.value===t&&e.push(n)}))})),a(null===n||void 0===n?void 0:n.value,e),t()},type:"primary",children:i("save")})],children:[(0,k.jsx)(h.Z.Group,{value:_,onChange:function(e){C(e)},className:"w-100",children:0!==(null===Z||void 0===Z?void 0:Z.length)||c?(0,k.jsx)(j.ZP,{dataSource:Z,loading:c,renderItem:function(e){return(0,k.jsx)(j.ZP.Item,{children:(0,k.jsx)(h.Z,{value:e.value,children:null===e||void 0===e?void 0:e.label})})}}):(0,k.jsx)(x.Z,{})}),c?null:(0,k.jsx)(d.Z,{type:"link",onClick:function(){return F(!0)},style:{paddingLeft:0},icon:(0,k.jsx)(b.Z,{}),children:i("add.new.extra")})]}),n&&(0,k.jsx)(y.Z,{modal:N,handleCancel:function(){return F(!1)},groupId:null===n||void 0===n?void 0:n.value,onSuccess:function(){return U(null===n||void 0===n?void 0:n.value)}})]})},I=t(3394),S=t(66672),_=t(66204),C=t(18074),w=t(16137),O=t(71136),N=function(e){var n=e.open,t=e.onClose,a=e.selectedExtras,i=e.onSelect,o=(0,p.$)().t,u=(0,r.useState)([]),c=(0,l.Z)(u,2),s=c[0],v=c[1],f=(0,r.useState)(!1),Z=(0,l.Z)(f,2),h=Z[0],x=Z[1],y=(0,r.useState)(!1),q=(0,l.Z)(y,2),I=q[0],N=q[1],F=(0,r.useState)(""),U=(0,l.Z)(F,2),A=U[0],E=U[1],M=(0,r.useState)(),L=(0,l.Z)(M,2),T=L[0],V=L[1],P=(0,O.Z)(A,500),W=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;x(!0);var t={valid:!0,perPage:10,search:e,page:n};g.Z.getAllGroups(t).then((function(e){var n=e.data.map((function(e){var n;return{id:e.id,label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id,shop_id:e.shop_id}}));v(n),V(e.meta)})).finally((function(){return x(!1)}))};return(0,r.useEffect)((function(){n&&W(P)}),[n,P]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(m.Z,{visible:n,onCancel:function(){t(),E("")},footer:h?null:(0,k.jsx)(d.Z,{type:"link",onClick:function(){return N(!0)},style:{paddingLeft:0},icon:(0,k.jsx)(b.Z,{}),children:o("add.new.extra")}),children:[(0,k.jsx)(S.Z,{className:"mt-3",value:A,onChange:function(e){return E(e.target.value)}}),(0,k.jsx)(j.ZP,{loading:h,dataSource:s.filter((function(e){return!(null!==a&&void 0!==a&&a.some((function(n){return n.id===e.id})))})),renderItem:function(e){return(0,k.jsx)(j.ZP.Item,{extra:null!==e&&void 0!==e&&e.shop_id?null:(0,k.jsx)(_.Z,{children:o("admin")}),style:{cursor:"pointer"},onClick:function(){i(e)},children:e.label})}}),(0,k.jsx)(C.Z,{onChange:function(e){W(P,e)},current:null===T||void 0===T?void 0:T.current_page,total:null===T||void 0===T?void 0:T.total})]}),(0,k.jsx)(w.Z,{modal:I,handleCancel:function(){return N(!1)},onSuccess:function(){return W()}})]})},F=t(23560),U=function(e){e.next;var n,t=e.prev,m=e.isRequest,h=e.mode,x=(0,p.$)().t,j=(0,s.I0)(),g=(0,Z.UO)(),y=g.uuid,b=g.id,S=(0,Z.s0)(),_=(0,Z.TH)(),C=(0,s.v9)((function(e){return e.menu}),s.wU).activeMenu,w=(0,r.useState)(!1),O=(0,l.Z)(w,2),U=O[0],A=O[1],E=(0,r.useState)(!1),M=(0,l.Z)(E,2),L=M[0],T=M[1],V=(0,r.useState)((null===(n=C.data)||void 0===n?void 0:n.extras)||[]),P=(0,l.Z)(V,2),W=P[0],G=P[1],B=(0,r.useState)(null),$=(0,l.Z)(B,2),z=$[0],R=$[1],D=(0,r.useState)(!1),H=(0,l.Z)(D,2),K=H[0],X=H[1],J=(0,s.v9)((function(e){return e.globalSettings})).settings;return(0,k.jsx)(o.Z,{children:(0,k.jsxs)(u.Z,{layout:"vertical",initialValues:(0,i.Z)({},C.data),onFinish:function(){var e;if(W.some((function(e){var n;return 0===(null===(n=e.values)||void 0===n?void 0:n.length)||!e.values})))F.Am.error(x("please.select.at.least.1.extra.value.for.each.extra"));else{var n=W.map((function(e){return e.value}));n.sort((function(e,n){return e-n}));var t=_.state;if(m)return j((0,f.nc)({activeMenu:C,data:(0,i.Z)((0,i.Z)({},C.data),{},{extras:W})})),void S("/seller/product-request/".concat(b,"?step=2"),{state:{generate:K}});if((K||_.state)&&"edit"===h&&(null===(e=_.state)||void 0===e||!e.create)&&"0"===(null===J||void 0===J?void 0:J.product_auto_approve))return _.state?t.extras=W:t=(0,i.Z)((0,i.Z)({},C.data),{},{extras:W}),j((0,f.nc)({activeMenu:C,data:(0,i.Z)((0,i.Z)({},C.data),{},{extras:W})})),void S("/seller/product/".concat(y,"?step=2"),{state:t});A(!0),v.Z.extras(y,{extras:n}).then((function(){var e;j((0,f.nc)({activeMenu:C,data:(0,i.Z)((0,i.Z)({},C.data),{},{extras:W})})),S("/seller/product/".concat(y,"?step=2"),{state:{create:null===(e=_.state)||void 0===e?void 0:e.create}})})).finally((function(){return A(!1)}))}},children:[(0,k.jsx)(N,{open:L,onClose:function(){return T(!1)},selectedExtras:W,onSelect:function(e){X(!0),G((function(n){return[].concat((0,a.Z)(n),[e])})),T(!1)}}),(0,k.jsx)(q,{extra:z,onClose:function(){return R(null)},onSelect:function(e,n){X(!0),G((function(t){return t.map((function(t){if(t.value===e){var a=n.map((function(e){var n,t,a=null===(n=C.data)||void 0===n||null===(t=n.extras)||void 0===t?void 0:t.flatMap((function(e){return e.values})).find((function(n){return n.value===e.value}));return(0,i.Z)((0,i.Z)({},e),{},{stock_id:null===a||void 0===a?void 0:a.stock_id})}));return(0,i.Z)((0,i.Z)({},t),{},{values:a})}return t}))}))}}),(0,k.jsx)(c.Z,{className:"w-100",size:"middle",direction:"vertical",children:W.map((function(e){var n;return(0,k.jsxs)(c.Z,{className:"w-100",direction:"vertical",children:[(0,k.jsxs)(c.Z,{className:"w-100",wrap:!0,children:[(0,k.jsx)(d.Z,{onClick:function(){return R(e)},ghost:!0,type:"primary",children:null===e||void 0===e?void 0:e.label}),null===e||void 0===e||null===(n=e.values)||void 0===n?void 0:n.map((function(n){return(0,k.jsxs)("div",{className:"extra-value",children:[null===n||void 0===n?void 0:n.label," ",(0,k.jsx)("button",{onClick:function(){return t=e.value,a=n.value,X(!0),void G((function(e){return e.map((function(e){return e.value===t?(0,i.Z)((0,i.Z)({},e),{},{values:(null===e||void 0===e?void 0:e.values.filter((function(e){return e.value!==a})))||[]}):e}))}));var t,a},type:"button",className:"extra-clear",children:(0,k.jsx)(I.IOM,{})})]},n.value)}))]}),(0,k.jsx)(c.Z,{className:"w-100",style:{justifyContent:"flex-end"},children:(0,k.jsx)(d.Z,{danger:!0,onClick:function(){return n=e,X(!0),void G((function(e){return e.filter((function(e){return e.id!==n.id}))}));var n},type:"text",children:x("delete")})})]},e.id)}))}),(0,k.jsx)(d.Z,{onClick:function(){return T(!0)},className:"w-100 my-3",type:"dashed",children:x("add.extra")}),(0,k.jsxs)(c.Z,{className:"mt-3",children:[(0,k.jsx)(d.Z,{onClick:t,children:x("prev")}),(0,k.jsx)(d.Z,{type:"primary",htmlType:"submit",loading:U,children:x("next")})]})]})})}},44902:function(e,n,t){var a=t(93433),i=t(4942),l=t(1413),r=t(29439),o=t(47313),u=t(77181),c=t(83371),d=t(68197),s=t(59624),v=t(45705),f=t(59491),p=t(72652),Z=t(2717),m=t(97890),h=t(90954),x=t(95882),j=t(24511),g=t(18333),y=t(97421),b=t(81218),k=t(23560),q=t(46417);n.Z=function(e){var n,t,I,S,_,C,w,O,N,F,U,A=e.prev,E=e.isRequest,M=e.mode,L=(0,j.$)().t,T=(0,Z.v9)((function(e){return e.menu}),Z.wU),V=T.activeMenu,P=(0,Z.v9)((function(e){return e.formLang}),Z.wU),W=P.defaultLang,G=P.languages,B=(0,m.s0)(),$=(0,m.TH)().state,z=(0,Z.I0)(),R=(0,o.useState)({}),D=(0,r.Z)(R,2),H=D[0],K=D[1],X=(0,o.useState)(null),J=(0,r.Z)(X,2),Q=J[0],Y=J[1],ee=(0,m.UO)().uuid,ne=(0,Z.v9)((function(e){return e.product}),Z.wU),te=ne.params,ae=(0,o.useState)(!1),ie=(0,r.Z)(ae,2),le=ie[0],re=ie[1],oe=(0,Z.v9)((function(e){return e.globalSettings})),ue=oe.settings;console.log(V.data,$);var ce=(0,o.useCallback)((function(e){Y(!0),g.Z.getById(e).then((function(e){var n=(0,l.Z)((0,l.Z)((0,l.Z)({},e.data),function(e){if(null===e||void 0===e||!e.translations)return{};var n=e.translations,t=G.map((function(e){var t,a,l;return l={},(0,i.Z)(l,"title[".concat(e.locale,"]"),null===(t=n.find((function(n){return n.locale===e.locale})))||void 0===t?void 0:t.title),(0,i.Z)(l,"description[".concat(e.locale,"]"),null===(a=n.find((function(n){return n.locale===e.locale})))||void 0===a?void 0:a.description),l}));return Object.assign.apply(Object,[{}].concat((0,a.Z)(t)))}(e.data)),{},{properties:e.data.properties.map((function(e,n){var t;return t={id:n},(0,i.Z)(t,"key[".concat(e.locale,"]"),e.key),(0,i.Z)(t,"value[".concat(e.locale,"]"),e.value),t})),translation:void 0,translations:void 0});K(n)})).finally((function(){return Y(!1)}))}),[ee]);(0,o.useEffect)((function(){E||ce(ee)}),[E,ee]);var de=E?V.data:$;return Q?(0,q.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,q.jsx)(p.Z,{size:"large",className:"py-5"})}):(0,q.jsxs)(u.Z,{children:[$||E?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(c.Z,{title:L("product.info"),bordered:!0,children:[(0,q.jsx)(c.Z.Item,{label:"".concat(L("title")," (").concat(W,")"),span:3,children:de["title[".concat(W,"]")]}),(0,q.jsx)(c.Z.Item,{label:"".concat(L("description")," (").concat(W,")"),span:3,children:de["description[".concat(W,"]")]}),(0,q.jsx)(c.Z.Item,{label:L("shop"),span:1.5,children:null===de||void 0===de||null===(n=de.shop)||void 0===n?void 0:n.translation.title}),(0,q.jsx)(c.Z.Item,{label:L("category"),span:1.5,children:null===de||void 0===de||null===(t=de.category)||void 0===t?void 0:t.label}),(0,q.jsx)(c.Z.Item,{label:L("brand"),span:1.5,children:null===de||void 0===de||null===(I=de.brand)||void 0===I?void 0:I.label}),(0,q.jsx)(c.Z.Item,{label:L("unit"),span:1.5,children:null===de||void 0===de||null===(S=de.unit)||void 0===S?void 0:S.label}),(0,q.jsx)(c.Z.Item,{label:L("images"),span:3,children:(0,q.jsx)(d.Z,{gutter:12,children:null===de||void 0===de||null===(_=de.images)||void 0===_?void 0:_.map((function(e,n){return(0,q.jsx)(s.Z,{children:(0,q.jsx)("img",{width:80,alt:"product",src:e.url})},"image"+n)}))})}),(0,q.jsx)(c.Z.Item,{label:L("tax"),children:null===de||void 0===de?void 0:de.tax}),(0,q.jsx)(c.Z.Item,{label:L("min.quantity"),children:null===de||void 0===de?void 0:de.min_qty}),(0,q.jsx)(c.Z.Item,{label:L("max.quantity"),children:null===de||void 0===de?void 0:de.max_qty})]}),null===de||void 0===de?void 0:de.stocks.map((function(e,n){var t;return e?(0,q.jsxs)(c.Z,{bordered:!0,className:"mt-4",children:[(0,q.jsx)(c.Z.Item,{label:L("price"),span:2,children:e.price}),(0,q.jsx)(c.Z.Item,{label:L("quantity"),span:2,children:e.quantity}),null===e||void 0===e||null===(t=e.ids)||void 0===t?void 0:t.map((function(e,n){return(0,q.jsx)(c.Z.Item,{label:null===de||void 0===de?void 0:de.extras[n].label,children:null===e||void 0===e?void 0:e.label},"extra"+n)}))]},"desc"+n):""}))]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(c.Z,{title:L("product.info"),bordered:!0,children:[(0,q.jsx)(c.Z.Item,{label:"".concat(L("title")," (").concat(W,")"),span:3,children:H["title[".concat(W,"]")]}),(0,q.jsx)(c.Z.Item,{label:"".concat(L("description")," (").concat(W,")"),span:3,children:H["description[".concat(W,"]")]}),(0,q.jsx)(c.Z.Item,{label:L("shop"),span:1.5,children:null===(C=H.shop)||void 0===C?void 0:C.translation.title}),(0,q.jsx)(c.Z.Item,{label:L("category"),span:1.5,children:null===(w=H.category)||void 0===w?void 0:w.translation.title}),(0,q.jsx)(c.Z.Item,{label:L("brand"),span:1.5,children:null===(O=H.brand)||void 0===O?void 0:O.title}),(0,q.jsx)(c.Z.Item,{label:L("unit"),span:1.5,children:null===(N=H.unit)||void 0===N?void 0:N.translation.title}),(0,q.jsx)(c.Z.Item,{label:L("images"),span:3,children:(0,q.jsx)(d.Z,{gutter:12,children:null===H||void 0===H||null===(F=H.galleries)||void 0===F?void 0:F.map((function(e,n){return(0,q.jsx)(s.Z,{children:(0,q.jsx)("img",{width:80,alt:"product",src:y.bV+e.path})},"image"+n)}))})}),(0,q.jsx)(c.Z.Item,{label:L("tax"),children:H.tax}),(0,q.jsx)(c.Z.Item,{label:L("min.quantity"),children:H.min_qty}),(0,q.jsx)(c.Z.Item,{label:L("max.quantity"),children:H.max_qty})]}),null===(U=H.stocks)||void 0===U?void 0:U.map((function(e,n){return e?(0,q.jsxs)(c.Z,{bordered:!0,className:"mt-4",children:[(0,q.jsx)(c.Z.Item,{label:L("price"),span:2,children:e.price}),(0,q.jsx)(c.Z.Item,{label:L("quantity"),span:2,children:e.quantity}),e.extras.map((function(e,n){var t,a;return(0,q.jsx)(c.Z.Item,{label:null===e||void 0===e||null===(t=e.group)||void 0===t||null===(a=t.translation)||void 0===a?void 0:a.title,children:null===e||void 0===e?void 0:e.value},"extra"+n)}))]},"desc"+n):""}))]}),(0,q.jsx)("div",{className:"d-flex mt-4",children:(0,q.jsxs)(v.Z,{children:[(0,q.jsx)(f.Z,{onClick:A,children:L("prev")}),(0,q.jsx)(f.Z,{loading:le,type:"primary",onClick:function(){var e="seller/products",n=(0,l.Z)({},te);if(E&&V.data){re(!0);var t={id:V.data.model_id,type:"product",data:V.data};b.Z.requestChangeUpdate(V.data.request_id,t).then((function(){B("/".concat(e),{state:{tab:"request"}}),k.Am.success(L("successfully.updated")),z((0,h.ph)((0,l.Z)((0,l.Z)({},V),{},{nextUrl:e}))),z((0,x.MW)(n))})).finally((function(){re(!1)}))}else if($&&"edit"===M&&"0"===(null===ue||void 0===ue?void 0:ue.product_auto_approve)){re(!0);var a={type:"product",id:V.data.product_id,data:$};b.Z.requestChange(a).then((function(){k.Am.success(L("successfully.updated")),z((0,h.ph)((0,l.Z)((0,l.Z)({},V),{},{nextUrl:e}))),z((0,x.MW)(n)),B("/".concat(e),{state:{tab:"request"}})})).finally((function(){re(!1)}))}else z((0,h.ph)((0,l.Z)((0,l.Z)({},V),{},{nextUrl:e}))),z((0,x.MW)(n)),B("/".concat(e))},children:L("finish")})]})})]})}},16636:function(e,n,t){t.d(n,{Z:function(){return _}});var a=t(93433),i=t(1413),l=t(29439),r=t(47313),o=t(10976),u=t(45705),c=t(59491),d=t(9274),s=t(77181),v=t(68197),f=t(59624),p=t(66672),Z=t(78508),m=t(12019),h=t(47515),x=t(2717),j=t(73431),g=t(46417);function y(e){var n=e.editData,t=e.handleCancel,a=e.editProperty,u=o.Z.useForm(),c=(0,l.Z)(u,1)[0],s=(0,x.v9)((function(e){return e.formLang}),x.wU),Z=s.defaultLang,m=s.languages;return(0,r.useEffect)((function(){c.setFieldsValue(n)}),[n]),(0,g.jsxs)(d.Z,{title:"Edit product property",visible:!!n,okText:"Save",onCancel:t,onOk:function(){return c.submit()},children:[(0,g.jsx)(v.Z,{className:"mb-3",children:(0,g.jsx)(f.Z,{span:24,children:(0,g.jsx)(j.Z,{})})}),(0,g.jsx)(o.Z,{form:c,layout:"vertical",onFinish:function(e){var t=(0,i.Z)((0,i.Z)({},n),e);a(t)},children:(0,g.jsxs)(v.Z,{className:"mt-4",children:[(0,g.jsx)(f.Z,{span:24,children:m.map((function(e){return(0,g.jsx)(o.Z.Item,{label:"Key",name:"key[".concat(e.locale,"]"),rules:[{required:e.locale===Z,message:""}],hidden:e.locale!==Z,children:(0,g.jsx)(p.Z,{})},"key"+e.locale)}))}),(0,g.jsx)(f.Z,{span:24,children:m.map((function(e){return(0,g.jsx)(o.Z.Item,{label:"Value",name:"value[".concat(e.locale,"]"),rules:[{required:e.locale===Z,message:""}],hidden:e.locale!==Z,children:(0,g.jsx)(p.Z,{})},"value"+e.locale)}))})]})})]})}var b=t(90954),k=t(18333),q=t(24511),I=t(97890),S=t(55940),_=function(e){var n,t=e.next,j=e.prev,_=e.isRequest,C=e.mode,w=(0,q.$)().t,O=(0,x.I0)(),N=(0,I.TH)(),F=(0,I.UO)().uuid,U=(0,I.s0)(),A=(0,x.v9)((function(e){return e.menu}),x.wU).activeMenu,E=(0,x.v9)((function(e){return e.formLang}),x.wU),M=E.defaultLang,L=E.languages,T=o.Z.useForm(),V=(0,l.Z)(T,1)[0],P=(0,r.useState)(null),W=(0,l.Z)(P,2),G=W[0],B=W[1],$=(0,r.useState)((null===(n=A.data)||void 0===n?void 0:n.properties)||[]),z=(0,l.Z)($,2),R=z[0],D=z[1],H=(0,r.useState)(!1),K=(0,l.Z)(H,2),X=K[0],J=K[1],Q=[{key:"2",title:w("key"),render:function(e,n){return n["key[".concat(M,"]")]}},{key:"4",title:w("value"),render:function(e,n){return n["value[".concat(M,"]")]}},{key:"5",title:w("options"),render:function(e){return(0,g.jsxs)(u.Z,{children:[(0,g.jsx)(c.Z,{type:"primary",icon:(0,g.jsx)(m.Z,{}),onClick:function(){return B(e)}}),(0,g.jsx)(S.Z,{type:"primary",danger:!0,icon:(0,g.jsx)(h.Z,{}),onClick:function(){return Y(e)}})]})}}];(0,r.useEffect)((function(){if(R.length&&F){var e=R;O((0,b.nc)({activeMenu:A,data:(0,i.Z)((0,i.Z)({},A.data),{},{properties:e})}))}}),[R]);var Y=function(e){d.Z.confirm({title:w("delete.product"),okText:w("yes"),okType:"danger",onOk:function(){D((function(n){return n.filter((function(n){return n.id!==e.id}))}))}})},ee=function(){return B(null)};return(0,g.jsxs)(s.Z,{children:[(0,g.jsx)(o.Z,{layout:"vertical",form:V,onFinish:function(e){var n=parseInt(50*Math.random()),t=(0,i.Z)((0,i.Z)({},e),{},{id:n});D((function(e){return[].concat((0,a.Z)(e),[t])})),V.resetFields()},children:(0,g.jsxs)(v.Z,{gutter:12,className:"mb-3",children:[(0,g.jsx)(f.Z,{span:8,children:L.map((function(e){return(0,g.jsx)(o.Z.Item,{name:"key[".concat(e.locale,"]"),rules:[{required:e.locale===M,message:""}],hidden:e.locale!==M,children:(0,g.jsx)(p.Z,{placeholder:w("key")})},"key"+e.locale)}))}),(0,g.jsx)(f.Z,{span:8,children:L.map((function(e){return(0,g.jsx)(o.Z.Item,{name:"value[".concat(e.locale,"]"),rules:[{required:e.locale===M,message:""}],hidden:e.locale!==M,children:(0,g.jsx)(p.Z,{placeholder:w("value")})},"value"+e.locale)}))}),(0,g.jsx)(f.Z,{span:4,children:(0,g.jsx)(c.Z,{type:"primary",htmlType:"submit",children:w("save")})})]})}),(0,g.jsx)(Z.Z,{scroll:{x:!0},columns:Q,dataSource:R,pagination:!1,rowKey:function(e){return e.id}}),(0,g.jsx)(y,{editData:G,handleCancel:ee,editProperty:function(e){D((function(n){return n.map((function(n){return n.id===e.id?e:n}))})),ee()}}),(0,g.jsxs)(u.Z,{className:"mt-4",children:[(0,g.jsx)(c.Z,{onClick:j,children:w("prev")}),(0,g.jsx)(c.Z,{type:"primary",onClick:function(){var e=function(){var e=[],n=[];return R.forEach((function(t){var a={},i={};L.forEach((function(e){a[e.locale]=t["key[".concat(e.locale,"]")],i[e.locale]=t["value[".concat(e.locale,"]")]})),e.push(a),n.push(i)})),{key:e,value:n}}();if(_)return O((0,b.nc)({activeMenu:A,data:(0,i.Z)((0,i.Z)({},A.data),{},{properties:R,props:e})})),void t();var n=N.state;if(N.state&&"edit"===C)return n.properties=R,n.props=e,void U("/seller/product/".concat(F,"?step=4"),{state:N.state});J(!0),k.Z.properties(F,e).then((function(){t()})).finally((function(){return J(!1)}))},loading:X,children:w("next")})]})]})}},63945:function(e,n,t){var a=t(4942),i=t(93433),l=t(1413),r=t(29439),o=t(47313),u=t(10976),c=t(77181),d=t(68197),s=t(59624),v=t(66672),f=t(16124),p=t(59491),Z=t(45705),m=t(2717),h=t(22307),x=t(18333),j=t(89802),g=t(24511),y=t(97890),b=t(89281),k=t(51282),q=t(33724),I=t(47515),S=t(90954),_=t(46417);n.Z=function(e){var n,t=e.prev,C=e.next,w=e.isRequest,O=e.mode,N=(0,g.$)().t,F=u.Z.useForm(),U=(0,r.Z)(F,1)[0],A=(0,y.s0)(),E=(0,m.I0)(),M=(0,y.UO)().uuid,L=(0,m.v9)((function(e){return e.menu}),m.wU).activeMenu,T=(0,m.v9)((function(e){return e.myShop}),m.wU).myShop,V=(0,o.useState)(null),P=(0,r.Z)(V,2),W=P[0],G=P[1],B=(0,y.TH)(),$=(0,m.v9)((function(e){return e.formLang}),m.wU).defaultLang,z=(0,m.v9)((function(e){return e.globalSettings})).settings,R=(0,m.v9)((function(e){return e.currency}),m.wU).defaultCurrency,D=(0,o.useState)(null),H=(0,r.Z)(D,2),K=H[0],X=H[1],J=(0,o.useState)([]),Q=(0,r.Z)(J,2),Y=Q[0],ee=Q[1];function ne(e){G(!0),x.Z.getById(e).then((function(e){var n;!function(e,n){var t,r,o=(0,q.Z)(e),u=o.map((function(e){var t,r;if(e.every((function(e){return"undefined"!==typeof e.stock_id}))){var o,u=null===n||void 0===n?void 0:n.find((function(n){return n.extras.every((function(n){return e.some((function(e){return e.value===n.id}))}))})),c=[];return null===u||void 0===u||null===(o=u.addons)||void 0===o||o.forEach((function(e){var n,t,a;e.product&&c.push({label:(null===e||void 0===e||null===(n=e.product)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(a=e.product)||void 0===a?void 0:a.id)||(null===e||void 0===e?void 0:e.value)})})),(0,l.Z)({price:(null===u||void 0===u?void 0:u.price)||0,quantity:(null===u||void 0===u?void 0:u.quantity)||0,sku:null===u||void 0===u?void 0:u.sku,stock_id:null===u||void 0===u?void 0:u.id,tax:(null===L||void 0===L?void 0:L.data.tax)||0,addons:c},Object.assign.apply(Object,[{}].concat((0,i.Z)(e.map((function(e,n){var t;return(0,a.Z)({},"extras[".concat(n,"]"),{label:e.label,value:e.value,group:null===(t=e.group.translation)||void 0===t?void 0:t.title})}))))))}return(0,l.Z)({price:void 0,quantity:0,tax:(null===(t=L.data)||void 0===t?void 0:t.tax)||0,sku:null===L||void 0===L||null===(r=L.data)||void 0===r?void 0:r.sku,addons:[]},Object.assign.apply(Object,[{}].concat((0,i.Z)(e.map((function(e,n){return(0,a.Z)({},"extras[".concat(n,"]"),{label:e.label,value:e.value})}))))))})),c=[];if(0===o.length&&0!==(null===n||void 0===n?void 0:n.length)){var d,s,v=null===n||void 0===n?void 0:n.at(0),f=[];null===v||void 0===v||null===(d=v.addons)||void 0===d||d.forEach((function(e){var n,t,a;e.product&&f.push({label:(null===e||void 0===e||null===(n=e.product)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(a=e.product)||void 0===a?void 0:a.id)||(null===e||void 0===e?void 0:e.value)})})),c=[{price:(null===v||void 0===v?void 0:v.price)||0,quantity:(null===v||void 0===v?void 0:v.quantity)||0,sku:null===v||void 0===v?void 0:v.sku,tax:(null===(s=L.data)||void 0===s?void 0:s.tax)||0,addons:v?f:[]}]}0===o.length&&0===(null===n||void 0===n?void 0:n.length)&&(c=[{price:void 0,quantity:0,sku:null===L||void 0===L||null===(t=L.data)||void 0===t?void 0:t.sku,tax:(null===(r=L.data)||void 0===r?void 0:r.tax)||0,addons:[]}]);var p=c.concat(u);ee(n.map((function(e){return e.id}))),U.setFieldsValue({stocks:p})}(null===L||void 0===L||null===(n=L.data.extras)||void 0===n?void 0:n.map((function(e){return e.values||[]})),e.data.stocks)})).finally((function(){G(!1)}))}var te=function(e){var n={search:e,addon:1,shop_id:T.id,active:1,"statuses[0]":"published","statuses[1]":"pending"};return x.Z.getAll(n).then((function(e){return e.data.map((function(e){var n;return{label:null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,value:null===e||void 0===e?void 0:e.id}}))}))};return(0,o.useEffect)((function(){var e;if(w)if(null!==(e=B.state)&&void 0!==e&&e.generate){var n,t,r,o,u,c,d,s=(0,q.Z)(null===L||void 0===L||null===(n=L.data.extras)||void 0===n?void 0:n.map((function(e){return e.values||[]}))),v=s.map((function(e){var n,t;if(e.every((function(e){return"undefined"!==typeof e.stock_id}))){var r,o,u,c=null===(r=L.data)||void 0===r||null===(o=r.actualStocks)||void 0===o?void 0:o.find((function(n){return n.extras.every((function(n){return e.some((function(e){return e.value===n.id}))}))})),d=[];return null===c||void 0===c||null===(u=c.addons)||void 0===u||u.forEach((function(e){var n,t,a;e.product&&d.push({label:(null===e||void 0===e||null===(n=e.product)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(a=e.product)||void 0===a?void 0:a.id)||(null===e||void 0===e?void 0:e.value)})})),(0,l.Z)({price:(null===c||void 0===c?void 0:c.price)||0,quantity:(null===c||void 0===c?void 0:c.quantity)||0,stock_id:null===c||void 0===c?void 0:c.id,sku:null===c||void 0===c?void 0:c.sku,tax:(null===L||void 0===L?void 0:L.data.tax)||0,addons:d},Object.assign.apply(Object,[{}].concat((0,i.Z)(e.map((function(e,n){return(0,a.Z)({},"extras[".concat(n,"]"),{label:e.label,value:e.value,group:L.data.extras[n].label})}))))))}return(0,l.Z)({price:0,quantity:0,tax:(null===(n=L.data)||void 0===n?void 0:n.tax)||0,sku:null===L||void 0===L||null===(t=L.data)||void 0===t?void 0:t.sku,addons:[]},Object.assign.apply(Object,[{}].concat((0,i.Z)(e.map((function(e,n){return(0,a.Z)({},"extras[".concat(n,"]"),{label:e.label,value:e.value})}))))))})),f=[];if(0===s.length&&0!==(null===(t=L.data)||void 0===t||null===(r=t.actualStocks)||void 0===r?void 0:r.length)){var p,Z,m,h=null===(p=L.data.actualStocks)||void 0===p?void 0:p.at(0),x=[];null===h||void 0===h||null===(Z=h.addons)||void 0===Z||Z.forEach((function(e){var n,t,a;e.product&&x.push({label:(null===e||void 0===e||null===(n=e.product)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(a=e.product)||void 0===a?void 0:a.id)||(null===e||void 0===e?void 0:e.value)})})),f=[{price:(null===h||void 0===h?void 0:h.price)||0,quantity:(null===h||void 0===h?void 0:h.quantity)||0,sku:null===h||void 0===h?void 0:h.sku,tax:(null===(m=L.data)||void 0===m?void 0:m.tax)||0,addons:h?x:[]}]}if(0===(null===s||void 0===s?void 0:s.length)&&0===(null===(o=L.data)||void 0===o||null===(u=o.actualStocks)||void 0===u?void 0:u.length))f=[{price:void 0,quantity:0,sku:null===L||void 0===L||null===(c=L.data)||void 0===c?void 0:c.sku,tax:(null===(d=L.data)||void 0===d?void 0:d.tax)||0,addons:[]}];var j=f.concat(v);ee(L.data.actualStocks.map((function(e){return e.id}))),U.setFieldsValue({stocks:j})}else{var g,y=L.data.stocks.map((function(e){var n;return(0,l.Z)({price:e.price||0,quantity:e.quantity||0,tax:L.data.tax,sku:e.sku,stock_id:e.stock_id},Object.assign.apply(Object,[{}].concat((0,i.Z)(null===(n=e.ids)||void 0===n?void 0:n.map((function(e,n){return(0,a.Z)({},"extras[".concat(n,"]"),{label:e.label,value:e.value,group:e.group})}))))))}));ee((null===(g=L.data)||void 0===g?void 0:g.delete_ids)||[]),U.setFieldsValue({stocks:y})}else ne(M)}),[w,null===(n=B.state)||void 0===n?void 0:n.generate]),(0,_.jsx)(c.Z,{title:L.data&&L.data["title[".concat($,"]")]?"".concat(L.data["title[".concat($,"]")]):"",children:W?(0,_.jsx)(k.Z,{}):(0,_.jsxs)(u.Z,{layout:"vertical",form:U,onFinish:function(e){var n,t,a;X(!0);var i,r,o=e.stocks,u=o.filter((function(e){var n,t,a=e.price,i=e.quantity;return!(null!==L&&void 0!==L&&null!==(n=L.data)&&void 0!==n&&null!==(t=n.stocks)&&void 0!==t&&t.some((function(e){var n=e.price,t=e.quantity;return a===n||i===t})))}));null===(n=L.data)||void 0===n||null===(t=n.extras)||void 0===t||!t.length?i=[{price:o[0].price,quantity:o[0].quantity,addons:o[0].addons?!(u.length>0||w||B.state)||null!==(r=B.state)&&void 0!==r&&r.create||"1"===(null===z||void 0===z?void 0:z.product_auto_approve)?o[0].addons.map((function(e){return e.value})):o[0].addons.map((function(e){return e})):[],stock_id:o[0].stock_id,sku:o[0].sku}]:i=o.map((function(e){var n,t,a,i,l,r;return{price:e.price,quantity:e.quantity,ids:!(u.length>0||w||B.state)||null!==(n=B.state)&&void 0!==n&&n.create||"0"!==(null===z||void 0===z?void 0:z.product_auto_approve)?null===(a=L.data)||void 0===a?void 0:a.extras.map((function(n,t){return e["extras[".concat(t,"]")].value})):null===(t=L.data)||void 0===t?void 0:t.extras.map((function(n,t){return e["extras[".concat(t,"]")]})),addons:e.addons?!(u.length>0||w||B.state)||null!==(i=B.state)&&void 0!==i&&i.create||"1"===(null===z||void 0===z?void 0:z.product_auto_approve)?null===(r=e.addons)||void 0===r?void 0:r.map((function(e){return e.value})):null===(l=e.addons)||void 0===l?void 0:l.map((function(e){return e})):[],stock_id:e.stock_id,sku:e.sku}}));var c=Y.filter((function(e,n){var t;return(null===(t=o[n])||void 0===t?void 0:t.stock_id)&&!o.some((function(n){return(null===n||void 0===n?void 0:n.stock_id)===e}))})),d=B.state;return w?(E((0,S.nc)({activeMenu:L,data:(0,l.Z)((0,l.Z)({},L.data),{},{stocks:i,delete_ids:c})})),void C()):!(u.length>0||B.state)||"edit"!==O||null!==(a=B.state)&&void 0!==a&&a.create||"0"!==(null===z||void 0===z?void 0:z.product_auto_approve)?void x.Z.stocks(M,{extras:i,delete_ids:c}).then((function(){return C()})).finally((function(){return X(!1)})):(B.state?(d.stocks=i,d.delete_ids=c):d=(0,l.Z)((0,l.Z)({},L.data),{},{stocks:i,delete_ids:c}),void A("/seller/product/".concat(M,"?step=3"),{state:d}))},children:[(0,_.jsx)(u.Z.List,{name:"stocks",children:function(e,n){n.add;var t=n.remove;return(0,_.jsx)("div",{children:e.map((function(e,n){var a,i,l,r;return(0,_.jsxs)(d.Z,{gutter:12,align:"middle",style:{flexWrap:"nowrap",overflowX:"auto"},hidden:!(null!==(a=L.data)&&void 0!==a&&null!==(i=a.extras)&&void 0!==i&&i.length)&&e.key,children:[null===(l=L.data)||void 0===l||null===(r=l.extras)||void 0===r?void 0:r.map((function(e,t){return(0,_.jsx)(s.Z,{children:(0,_.jsx)(u.Z.Item,{label:null===e||void 0===e?void 0:e.label,name:[n,"extras[".concat(t,"]")],rules:[{required:!0,message:N("required")}],children:(0,_.jsx)(j.q,{fetchOptions:function(){return n=e.value,h.Z.getGroupById(n).then((function(e){return e.data.extra_values.map((function(e){return{label:e.value,value:e.id}}))}));var n},className:"w-100",disabled:!0,style:{minWidth:200}})})},"extra"+e.value)})),(0,_.jsx)(s.Z,{children:(0,_.jsx)(u.Z.Item,{label:N("addons"),name:[n,"addons"],rules:[{required:!1,message:N("required")}],children:(0,_.jsx)(b.h,{mode:"multiple",style:{minWidth:"300px"},fetchOptions:te,allowClear:!0})})}),(0,_.jsx)(s.Z,{children:(0,_.jsx)(u.Z.Item,{label:N("sku"),name:[n,"sku"],children:(0,_.jsx)(v.Z,{className:"w-100",style:{minWidth:200}})})}),(0,_.jsx)(s.Z,{children:(0,_.jsx)(u.Z.Item,{label:N("quantity"),name:[n,"quantity"],rules:[{required:!0,message:N("required")}],children:(0,_.jsx)(f.Z,{min:0,className:"w-100",style:{minWidth:200}})})}),(0,_.jsx)(s.Z,{children:(0,_.jsx)(u.Z.Item,{label:"".concat(N("price")," (").concat(null===R||void 0===R?void 0:R.symbol,")"),name:[n,"price"],rules:[{required:!0,message:N("requried")}],children:(0,_.jsx)(f.Z,{min:0,className:"w-100",style:{minWidth:200}})})}),(0,_.jsxs)(s.Z,{children:[(0,_.jsx)(u.Z.Item,{label:N("tax"),name:[n,"tax"],children:(0,_.jsx)(f.Z,{className:"w-100",disabled:!0,style:{minWidth:200},addonAfter:"%"})}),(0,_.jsx)(u.Z.Item,{hidden:!0,label:N("id"),name:[n,"stock_id"],children:(0,_.jsx)(f.Z,{className:"w-100",disabled:!0,style:{minWidth:200},addonAfter:"%"})})]})," ",(0,_.jsx)(s.Z,{children:(0,_.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(n,t){return n.stocks[e.name].price!==t.stocks[e.name].price},children:function(n){var t=n.getFieldValue,a=t(["stocks",e.name,"tax"])||0,i=t(["stocks",e.name,"price"]),l=0===a?i:i*a/100+i;return(0,_.jsx)(u.Z.Item,{label:"".concat(N("total.price")," (").concat(null===R||void 0===R?void 0:R.symbol,")"),children:(0,_.jsx)(f.Z,{min:1,disabled:!0,value:l,className:"w-100",style:{minWidth:200}})})}})}),(0,_.jsx)(s.Z,{children:e.key?(0,_.jsx)(p.Z,{type:"primary",className:"mt-2",danger:!0,icon:(0,_.jsx)(I.Z,{}),onClick:function(){t(e.name)}}):""})]},e.key)}))})}}),(0,_.jsxs)(Z.Z,{className:"mt-4",children:[(0,_.jsx)(p.Z,{onClick:t,children:N("prev")}),(0,_.jsx)(p.Z,{type:"primary",htmlType:"submit",loading:!!K,children:N("next")})]})]})})}},32937:function(e,n,t){var a=t(4942),i=t(93433),l=t(1413),r=t(29439),o=t(47313),u=t(10976),c=t(68197),d=t(59624),s=t(77181),v=t(66672),f=t(16124),p=t(86345),Z=t(59491),m=t(89281),h=t(11101),x=t(29955),j=t(2717),g=t(18333),y=t(90954),b=t(33403),k=t(97890),q=t(24511),I=t(5764),S=t(49080),_=t(82138),C=t(20776),w=t(46417);n.Z=function(e){var n,t,O,N=e.next,F=e.action_type,U=void 0===F?"":F,A=e.isRequest,E=(0,q.$)().t,M=u.Z.useForm(),L=(0,r.Z)(M,1)[0],T=(0,j.I0)(),V=(0,k.UO)().uuid,P=(0,k.s0)(),W=(0,o.useState)(null),G=(0,r.Z)(W,2),B=(G[0],G[1]),$=(0,j.v9)((function(e){return e.menu}),j.wU).activeMenu,z=(0,j.v9)((function(e){return e.formLang}),j.wU),R=z.defaultLang,D=z.languages,H=(0,o.useState)(null!==(n=$.data)&&void 0!==n&&n.images?null===(t=$.data)||void 0===t?void 0:t.images:[]),K=(0,r.Z)(H,2),X=K[0],J=K[1],Q=(0,o.useState)(!1),Y=(0,r.Z)(Q,2),ee=Y[0],ne=Y[1],te=(0,o.useState)(Boolean(null===(O=$.data)||void 0===O?void 0:O.kcal)),ae=(0,r.Z)(te,2),ie=ae[0],le=ae[1],re=(0,j.v9)((function(e){return e.globalSettings})).settings;var oe=function(){T((0,y.bL)({url:"seller/category/add",id:"seller/category/add",name:E("edit.category")})),P("/seller/category/add")};return(0,w.jsxs)(u.Z,{layout:"vertical",form:L,initialValues:(0,l.Z)({active:!0,vegetarian:!0},$.data),onFinish:function(e){var n,t,o,u;ne(!0);var c,d,s,v,f=(0,l.Z)((0,l.Z)({},e),{},{active:Number(e.active),vegetarian:Number(e.vegetarian),brand_id:null===(n=e.brand)||void 0===n?void 0:n.value,category_id:(null===(t=e.category)||void 0===t?void 0:t.value)||e.category,shop_id:null===(o=e.shop)||void 0===o?void 0:o.value,unit_id:null===(u=e.unit)||void 0===u?void 0:u.value,kcal:ie?String(e.kcal):void 0,carbs:ie?String(e.carbs):void 0,protein:ie?String(e.protein):void 0,fats:ie?String(e.fats):void 0,images:X,brand:e.brand,category:e.category,shop:e.shop,unit:e.unit,tax:e.tax||0},Object.assign.apply(Object,[{}].concat((0,i.Z)(X.map((function(e,n){return(0,a.Z)({},"images[".concat(n,"]"),e.name)}))))));if(A)return T((0,y.nc)({activeMenu:$,data:(0,l.Z)((0,l.Z)((0,l.Z)({},$.data),e),{},{active:Number(e.active),vegetarian:Number(e.vegetarian),brand_id:null===(c=e.brand)||void 0===c?void 0:c.value,category_id:(null===(d=e.category)||void 0===d?void 0:d.value)||e.category,shop_id:null===(s=e.shop)||void 0===s?void 0:s.value,unit_id:null===(v=e.unit)||void 0===v?void 0:v.value,kcal:ie?String(e.kcal):void 0,carbs:ie?String(e.carbs):void 0,protein:ie?String(e.protein):void 0,fats:ie?String(e.fats):void 0,tax:e.tax||0,title:(0,l.Z)({},Object.assign.apply(Object,[{}].concat((0,i.Z)(D.map((function(n){return(0,a.Z)({},n.locale,e["title[".concat(n.locale,"]")])})))))),description:(0,l.Z)({},Object.assign.apply(Object,[{}].concat((0,i.Z)(D.map((function(n){return(0,a.Z)({},n.locale,e["description[".concat(n.locale,"]")])}))))))},Object.assign.apply(Object,[{}].concat((0,i.Z)(X.map((function(e,n){return(0,a.Z)({},"images[".concat(n,"]"),e.name)}))))))})),void N();var p=!1;if(Object.entries(e).forEach((function(e){var n,t,a,i,l,o,u=(0,r.Z)(e,2),c=u[0],d=u[1];((c.startsWith("title")||c.startsWith("description"))&&$.data&&$.data[c]!==d&&(p=!0),"category"===c)&&((null===(a=$.data)||void 0===a||null===(i=a.category)||void 0===i?void 0:i.value)!==(null===d||void 0===d?void 0:d.value)&&(p=!0));"brand"===c&&((null===(l=$.data)||void 0===l||null===(o=l.brand)||void 0===o?void 0:o.value)!==(null===d||void 0===d?void 0:d.value)&&(p=!0));((null===X||void 0===X?void 0:X.find((function(e){return"done"===e.status})))||(null===X||void 0===X?void 0:X.length)!==(null===(n=$.data)||void 0===n||null===(t=n.images)||void 0===t?void 0:t.length))&&(p=!0)})),"edit"===U){var Z=(0,l.Z)({},f);if(Z.title=(0,l.Z)({},Object.assign.apply(Object,[{}].concat((0,i.Z)(D.map((function(n){return(0,a.Z)({},n.locale,e["title[".concat(n.locale,"]")])})))))),Z.description=(0,l.Z)({},Object.assign.apply(Object,[{}].concat((0,i.Z)(D.map((function(n){return(0,a.Z)({},n.locale,e["description[".concat(n.locale,"]")])})))))),(0,y.nc)({activeMenu:$,data:Z}),p&&"0"===(null===re||void 0===re?void 0:re.product_auto_approve))return void function(e){P("/seller/product/".concat(V,"?step=1"),{state:e})}(Z);!function(e,n){var t;n.product_id=null===(t=$.data)||void 0===t?void 0:t.product_id,g.Z.update(V,n).then((function(e){e.data;T((0,y.nc)({activeMenu:$,data:(0,l.Z)((0,l.Z)({},n),null===$||void 0===$?void 0:$.data)})),N()})).catch((function(e){return B(e.response.data.params)})).finally((function(){return ne(!1)}))}(0,f)}else!function(e,n){g.Z.create(n).then((function(n){var t=n.data;T((0,y.SS)({id:"product-".concat(t.uuid),url:"seller/product/".concat(t.uuid),name:E("add.product"),data:e,refetch:!1})),P("/seller/product/".concat(t.uuid,"?step=1"),{state:{create:!0}})})).catch((function(e){return B(e.response.data.params)})).finally((function(){return ne(!1)}))}(e,f)},children:[(0,w.jsxs)(c.Z,{gutter:12,children:[(0,w.jsx)(d.Z,{span:16,children:(0,w.jsxs)(c.Z,{children:[(0,w.jsx)(d.Z,{span:24,children:(0,w.jsx)(s.Z,{title:E("basic.info"),children:(0,w.jsxs)(c.Z,{children:[(0,w.jsx)(d.Z,{span:24,children:D.map((function(e){return(0,w.jsx)(u.Z.Item,{label:E("name"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===R,message:E("required")}],hidden:e.locale!==R,children:(0,w.jsx)(v.Z,{})},"name"+e.id)}))}),(0,w.jsx)(d.Z,{span:24,children:D.map((function(e){return(0,w.jsx)(u.Z.Item,{label:E("description"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===R,message:E("required")}],hidden:e.locale!==R,children:(0,w.jsx)(S.Z,{rows:3})},"description"+e.id)}))})]})})}),(0,w.jsx)(d.Z,{span:24,children:(0,w.jsx)(s.Z,{title:E("pricing"),children:(0,w.jsxs)(c.Z,{gutter:12,children:[(0,w.jsx)(d.Z,{span:8,children:(0,w.jsx)(u.Z.Item,{label:E("min.qty"),name:"min_qty",rules:[{required:!0,message:E("required")}],children:(0,w.jsx)(f.Z,{min:0,className:"w-100"})})}),(0,w.jsx)(d.Z,{span:8,children:(0,w.jsx)(u.Z.Item,{label:E("max.qty"),name:"max_qty",rules:[{required:!0,message:E("required")}],children:(0,w.jsx)(f.Z,{min:0,className:"w-100"})})}),(0,w.jsx)(d.Z,{span:8,children:(0,w.jsx)(u.Z.Item,{label:E("tax"),name:"tax",children:(0,w.jsx)(f.Z,{min:0,className:"w-100",addonAfter:"%"})})})]})})}),(0,w.jsx)(d.Z,{span:24,children:(0,w.jsx)(s.Z,{title:E("additions"),children:(0,w.jsxs)(c.Z,{gutter:12,children:[(0,w.jsx)(d.Z,{span:6,children:(0,w.jsx)(u.Z.Item,{label:E("active"),name:"active",valuePropName:"checked",children:(0,w.jsx)(p.Z,{})})}),(0,w.jsx)(d.Z,{span:6,children:(0,w.jsx)(u.Z.Item,{label:E("vegetarian"),name:"vegetarian",valuePropName:"checked",children:(0,w.jsx)(p.Z,{})})}),(0,w.jsx)(d.Z,{span:6,children:(0,w.jsx)(u.Z.Item,{label:E("nutrition.".concat(ie?"on":"off")),valuePropName:"checked",children:(0,w.jsx)(p.Z,{checked:ie,onChange:function(e){return le(e)}})})})]})})}),ie&&(0,w.jsx)(d.Z,{span:24,children:(0,w.jsx)(s.Z,{title:E("nutritional.value.of.food"),children:(0,w.jsxs)(c.Z,{gutter:12,children:[(0,w.jsx)(d.Z,{span:6,children:(0,w.jsx)(u.Z.Item,{rules:[{required:!0,message:E("required")}],label:E("kcal"),name:"kcal",children:(0,w.jsx)(f.Z,{max:10,className:"w-100"})})}),(0,w.jsx)(d.Z,{span:6,children:(0,w.jsx)(u.Z.Item,{rules:[{required:!0,message:E("required")}],label:E("carbs"),name:"carbs",children:(0,w.jsx)(f.Z,{max:10,className:"w-100"})})}),(0,w.jsx)(d.Z,{span:6,children:(0,w.jsx)(u.Z.Item,{rules:[{required:!0,message:E("required")}],label:E("protein"),name:"protein",children:(0,w.jsx)(f.Z,{max:10,className:"w-100"})})}),(0,w.jsx)(d.Z,{span:6,children:(0,w.jsx)(u.Z.Item,{rules:[{required:!0,message:E("required")}],label:E("fats"),name:"fats",children:(0,w.jsx)(f.Z,{max:10,className:"w-100"})})})]})})})]})}),(0,w.jsx)(d.Z,{span:8,children:(0,w.jsxs)(c.Z,{children:[(0,w.jsx)(d.Z,{span:24,children:(0,w.jsx)(s.Z,{title:E("organization"),children:(0,w.jsxs)(c.Z,{children:[(0,w.jsx)(d.Z,{span:24,children:(0,w.jsx)(u.Z.Item,{label:E("category"),name:"category",rules:[{required:!0,message:E("required")}],children:(0,w.jsx)(C.o,{fetchOptions:function(e){var n={search:e||null,type:"main",lang:R,"statuses[0]":"pending","statuses[1]":"published",active:1};return x.Z.paginateSelect(n).then((function(e){return e.data.map((function(e){var n,t;return{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id,key:e.id,disabled:e.children.length>0,children:null===(t=e.children)||void 0===t?void 0:t.map((function(e){var n;return{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id,key:e.id}}))}}))}))},refetch:!0,dropdownRender:function(e){return(0,w.jsxs)(w.Fragment,{children:[e,(0,w.jsx)("div",{className:"p-1",children:(0,w.jsx)(Z.Z,{icon:(0,w.jsx)(_.Z,{}),className:"w-100",onClick:oe,children:E("add.category")})})]})}})})}),(0,w.jsx)(d.Z,{span:24,children:(0,w.jsx)(u.Z.Item,{label:E("brand"),name:"brand",rules:[{required:!1,message:E("required")}],children:(0,w.jsx)(m.h,{fetchOptions:function(e){var n={search:e};return h.Z.getAll(n).then((function(e){return e.data.map((function(e){return{label:e.title,value:e.id}}))}))}})})}),(0,w.jsx)(d.Z,{span:24,children:(0,w.jsx)(u.Z.Item,{label:E("unit"),name:"unit",rules:[{required:!0,message:E("required")}],children:(0,w.jsx)(m.h,{fetchOptions:function(e){var n={perPage:10,page:1,active:1,search:e};return b.Z.getAll(n).then((function(e){return function(e){return e.map((function(e){var n;return{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id}}))}(e.data)}))}})})}),(0,w.jsx)(d.Z,{span:24,children:(0,w.jsx)(u.Z.Item,{label:E("interval"),name:"interval",rules:[{required:!0,message:E("required")},{type:"number",min:1,message:E("should.be.more.than.1")}],children:(0,w.jsx)(f.Z,{className:"w-100"})})}),(0,w.jsx)(d.Z,{span:24,children:(0,w.jsx)(u.Z.Item,{label:E("sku"),name:"sku",children:(0,w.jsx)(v.Z,{className:"w-100"})})})]})})}),(0,w.jsx)(d.Z,{span:24,children:(0,w.jsx)(s.Z,{title:E("media"),children:(0,w.jsx)(c.Z,{children:(0,w.jsx)(d.Z,{span:24,children:(0,w.jsx)(u.Z.Item,{name:"images",children:(0,w.jsx)(I.Z,{type:"products",imageList:X,setImageList:J,form:L,multiple:!0})})})})})})]})})]}),(0,w.jsx)(Z.Z,{type:"primary",htmlType:"submit",loading:ee,children:E("next")})]})}},16848:function(e,n,t){t.d(n,{S:function(){return a}});var a=[{title:"food",content:"First-content"},{title:"food.extras",content:"Second-content"},{title:"stocks",content:"Third-content"},{title:"food.property",content:"Fourth-content"},{title:"finish",content:"Finish-content"}]}}]);