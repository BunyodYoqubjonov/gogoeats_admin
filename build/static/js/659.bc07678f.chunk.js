"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[659],{659:function(e,t,n){n.r(t);var a=n(1413),i=n(93433),o=n(4942),u=n(29439),l=n(47313),r=n(10976),c=n(77181),s=n(72652),d=n(23560),v=n(97890),f=n(73431),p=n(2717),h=n(90954),Z=n(30763),g=n(97421),m=n(49991),y=n(24511),b=n(71740),_=n(46417);t.default=function(){var e=(0,y.$)().t,t=(0,v.s0)(),n=(0,p.I0)(),j=(0,p.v9)((function(e){return e.menu}),p.wU).activeMenu,k=(0,p.v9)((function(e){return e.shopCategory}),p.wU).params,w=(0,l.useState)(!1),x=(0,u.Z)(w,2),U=x[0],C=x[1],F=r.Z.useForm(),M=(0,u.Z)(F,1)[0],O=(0,l.useState)(null),S=(0,u.Z)(O,2),V=S[0],A=S[1],E=(0,v.UO)().uuid,I=(0,p.v9)((function(e){return e.formLang}),p.wU).languages;(0,l.useEffect)((function(){return function(){var e=M.getFieldsValue(!0);n((0,h.nc)({activeMenu:j,data:e}))}}),[]);var N=function(e){C(!0),Z.Z.getById(e).then((function(e){var t,u,l,r=e.data,c=(0,a.Z)((0,a.Z)((0,a.Z)({},r),function(e){if(!e)return{};var t=e.translations,n=I.map((function(e){var n,a,i;return i={},(0,o.Z)(i,"title[".concat(e.locale,"]"),null===(n=t.find((function(t){return t.locale===e.locale})))||void 0===n?void 0:n.title),(0,o.Z)(i,"description[".concat(e.locale,"]"),null===(a=t.find((function(t){return t.locale===e.locale})))||void 0===a?void 0:a.description),i}));return Object.assign.apply(Object,[{}].concat((0,i.Z)(n)))}(r)),{},{image:[(l=null===r||void 0===r?void 0:r.img,{name:l,url:g.bV+l})],keywords:null===r||void 0===r?void 0:r.keywords.split(","),parent_id:{label:null===r||void 0===r||null===(t=r.parent)||void 0===t||null===(u=t.translation)||void 0===u?void 0:u.title,value:null===r||void 0===r?void 0:r.parent_id,key:null===r||void 0===r?void 0:r.parent_id}});M.setFieldsValue(c),n((0,h.nc)({activeMenu:j,data:c}))})).finally((function(){C(!1),n((0,h.A_)(j))}))};return(0,l.useEffect)((function(){j.refetch&&N(E)}),[j.refetch]),(0,_.jsx)(c.Z,{title:e("edit.category"),extra:(0,_.jsx)(f.Z,{}),children:U?(0,_.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,_.jsx)(s.Z,{size:"large",className:"mt-5 pt-5"})}):(0,_.jsx)(b.Z,{form:M,handleSubmit:function(i,o){var u,l,r,c=(0,a.Z)((0,a.Z)({},i),{},{type:null!==(u=i.parent_id)&&void 0!==u&&u.value?"sub_shop":"shop",active:i.active?1:0,keywords:i.keywords.join(","),parent_id:null===(l=i.parent_id)||void 0===l?void 0:l.value,"images[0]":null===(r=o[0])||void 0===r?void 0:r.name});return Z.Z.update(E,c).then((function(){d.Am.success(e("successfully.updated")),(0,p.dC)((function(){n((0,h.ph)((0,a.Z)((0,a.Z)({},j),{},{nextUrl:"catalog/shop/categories"}))),n((0,m.a)(k))})),t("/catalog/shop/categories")})).catch((function(e){return A(e.response.data.params)}))},error:V})})}}}]);