"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7544],{41481:function(n,e,t){t.d(e,{Z:function(){return v}});var i=t(1413),l=t(29439),o=t(45987),a=t(47313),r=t(66672),s=t(16031),u=t(40765),c=t(46417),d=["handleChange","defaultValue","resetSearch"];function v(n){var e=n.handleChange,t=n.defaultValue,v=n.resetSearch,f=(0,o.Z)(n,d),h=(0,a.useState)(t),m=(0,l.Z)(h,2),p=m[0],x=m[1],Z=(0,a.useMemo)((function(){return(0,s.debounce)((function(n){e(n)}),800)}),[e]);return(0,a.useEffect)((function(){x(t)}),[v,t]),(0,c.jsx)(r.Z,(0,i.Z)({value:p,onChange:function(n){x(n.target.value),Z(n.target.value)},prefix:(0,c.jsx)(u.Z,{})},f))}},89281:function(n,e,t){t.d(e,{h:function(){return f}});var i=t(1413),l=t(29439),o=t(45987),a=t(47313),r=t(12279),s=t.n(r),u=t(74294),c=t(72652),d=t(46417),v=["fetchOptions","debounceTimeout","onClear"],f=function(n){var e=n.fetchOptions,t=n.debounceTimeout,r=void 0===t?400:t,f=n.onClear,h=(0,o.Z)(n,v),m=(0,a.useState)(!1),p=(0,l.Z)(m,2),x=p[0],Z=p[1],j=(0,a.useState)([]),g=(0,l.Z)(j,2),y=g[0],b=g[1],C=(0,a.useMemo)((function(){return s()((function(n){b([]),Z(!0),e(n).then((function(n){b(n),Z(!1)}))}),r)}),[e,r]);return(0,d.jsx)(u.Z,(0,i.Z)((0,i.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:C,onClear:function(){C(""),f&&f()},notFoundContent:x?(0,d.jsx)(c.Z,{size:"small"}):"no results"},h),{},{options:y,onFocus:function(){C("")}}))}},17649:function(n,e,t){t.d(e,{Z:function(){return i}});t(97421);function i(n){if(null===n||void 0===n||!n.location)return{lat:47.4143302506288,lng:8.532059477976883};var e=n.location.split(", ");return{lat:Number(null===e||void 0===e?void 0:e[0]),lng:Number(null===e||void 0===e?void 0:e[1])}}},84017:function(n,e,t){function i(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$";if(!n)return"0";var t=Number(n).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return e+" "+t}t.d(e,{Z:function(){return i}})},36311:function(n,e,t){var i=t(34344),l={orderExport:function(n,e){return i.Z.get("dashboard/user/export/order/".concat(n,"/pdf"),{params:e,responseType:"blob"})}};e.Z=l},24391:function(n,e,t){var i=t(29439),l=t(47313),o=t(36311),a=t(83334),r=t.n(a),s=t(51282),u=t(77181),c=t(9274),d=t(59491),v=t(68197),f=t(59624),h=t(24511),m=t(58821),p=t(57864),x=t(97890),Z=t(46417),j=u.Z.Meta;e.Z=function(n){var e=n.id,t=n.handleCancel,a=(0,l.useState)(null),g=(0,i.Z)(a,2),y=g[0],b=g[1],C=(0,h.$)().t,w=(0,x.s0)();return(0,Z.jsx)(Z.Fragment,{children:y?(0,Z.jsx)(s.Z,{}):(0,Z.jsx)(c.Z,{visible:!!e,title:C("selected.download"),closable:!1,handleCancel:t,footer:[(0,Z.jsx)(d.Z,{type:"default",onClick:t,children:C("cancel")},"cancelBtn")],children:(0,Z.jsxs)(v.Z,{children:[(0,Z.jsx)(f.Z,{span:12,children:(0,Z.jsx)(u.Z,{title:C("download.pdf"),onClick:function(){return function(n){b(!0),o.Z.orderExport(n).then((function(e){r()(e,"invoice_".concat(n,".pdf"),"application/pdf"),t()})).finally((function(){return b(!1)}))}(e)},className:"text-center cursor-pointer",children:(0,Z.jsx)(j,{className:"d-flex align-items-center justify-content-center",title:(0,Z.jsx)(m._JY,{size:80})})})}),(0,Z.jsx)(f.Z,{span:12,children:(0,Z.jsx)(u.Z,{title:C("download.check"),onClick:function(){return function(n){w("/orders/generate-invoice/".concat(n))}(e)},className:"text-center cursor-pointer",children:(0,Z.jsx)(j,{className:"d-flex align-items-center justify-content-center",title:(0,Z.jsx)(p.ih9,{size:85})})})})]})})})}},24077:function(n,e,t){t.d(e,{Z:function(){return g}});var i=t(15861),l=t(29439),o=t(87757),a=t.n(o),r=t(47313),s=t(10976),u=t(9274),c=t(59491),d=t(68197),v=t(59624),f=t(2717),h=t(7370),m=t(90954),p=t(24511),x=t(49986),Z=t(89281),j=t(46417);function g(n){var e,t,o,g=n.orderDetails,y=n.handleCancel,b=(0,p.$)().t,C=(0,f.v9)((function(n){return n.menu}),f.wU).activeMenu,w=s.Z.useForm(),S=(0,l.Z)(w,1)[0],k=(0,f.I0)(),_=(0,r.useState)(!1),N=(0,l.Z)(_,2),F=N[0],I=N[1];function M(){return(M=(0,i.Z)(a().mark((function n(e){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={search:e.length?e:void 0,page:1,perPage:10,role:"deliveryman",shop_id:g.shop.id,exist_token:1},n.abrupt("return",x.Z.getAll(t).then((function(n){return n.data.map((function(n){return{label:n.firstname+" "+n.lastname||"no name",value:n.id}}))})));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,j.jsx)(u.Z,{visible:!!g,onCancel:y,footer:[(0,j.jsx)(c.Z,{type:"primary",onClick:function(){return S.submit()},loading:F,children:b("save")},"saveBtn"),(0,j.jsx)(c.Z,{type:"default",onClick:y,children:b("cancel")},"cancelBtn")],children:(0,j.jsx)(s.Z,{form:S,layout:"vertical",onFinish:function(n){var e={deliveryman:n.deliveryman.value};I(!0),h.Z.updateDelivery(g.id,e).then((function(){y(),k((0,m.xo)(C))})).finally((function(){return I(!1)}))},initialValues:{deliveryman:{label:g.deliveryman?(null===g||void 0===g||null===(e=g.deliveryman)||void 0===e?void 0:e.firstname)+" "+(null===g||void 0===g||null===(t=g.deliveryman)||void 0===t?void 0:t.lastname):null,value:g.deliveryman?null===g||void 0===g||null===(o=g.deliveryman)||void 0===o?void 0:o.id:null}},children:(0,j.jsx)(d.Z,{gutter:12,children:(0,j.jsx)(v.Z,{span:24,children:(0,j.jsx)(s.Z.Item,{label:b("deliveryman"),name:"deliveryman",rules:[{required:!0,message:b("required")}],children:(0,j.jsx)(Z.h,{className:"w-100",debounceTimeout:500,placeholder:b("select.shop"),fetchOptions:function(n){return M.apply(this,arguments)},allowClear:!0})})})})})})}},7920:function(n,e,t){t.d(e,{Z:function(){return x}});var i=t(1413),l=t(29439),o=t(47313),a=t(10976),r=t(9274),s=t(59491),u=t(68197),c=t(59624),d=t(74294),v=t(2717),f=t(24511),h=t(7370),m=t(90954),p=t(46417);function x(n){var e=n.orderDetails,t=n.handleCancel,x=n.status,Z=(0,v.v9)((function(n){return n.menu}),v.wU).activeMenu,j=a.Z.useForm(),g=(0,l.Z)(j,1)[0],y=(0,v.I0)(),b=(0,f.$)().t,C=(0,o.useState)(!1),w=(0,l.Z)(C,2),S=w[0],k=w[1],_=(0,o.useState)(x),N=(0,l.Z)(_,2),F=N[0],I=N[1];(0,o.useEffect)((function(){var n=x.findIndex((function(n){return n.name===e.status})),t=[x[n],x[n+1],{name:"canceled",id:8,active:!0}];n<0&&(t=[x[n+1],"canceled"]),I(t)}),[e]);return(0,p.jsx)(r.Z,{visible:!!e,title:e.title,onCancel:t,footer:[(0,p.jsx)(s.Z,{type:"primary",onClick:function(){return g.submit()},loading:S,children:b("save")},"save-form"),(0,p.jsx)(s.Z,{type:"default",onClick:t,children:b("cancel")},"cansel-modal")],children:(0,p.jsx)(a.Z,{form:g,layout:"vertical",onFinish:function(n){k(!0);var l=(0,i.Z)({},n);h.Z.updateStatus(e.id,l).then((function(){t(),y((0,m.xo)(Z))})).finally((function(){return k(!1)}))},initialValues:{status:e.status},children:(0,p.jsx)(u.Z,{gutter:12,children:(0,p.jsx)(c.Z,{span:24,children:(0,p.jsx)(a.Z.Item,{label:b("status"),name:"status",rules:[{required:!0,message:b("required")}],children:(0,p.jsx)(d.Z,{children:null===F||void 0===F?void 0:F.map((function(n){return(0,p.jsx)(d.Z.Option,{value:null===n||void 0===n?void 0:n.name,children:b(null===n||void 0===n?void 0:n.name)},null===n||void 0===n?void 0:n.name)}))})})})})})})}},80355:function(n,e,t){var i=t(29439),l=t(84697),o=t(83999),a=t(9274),r=t(59491),s=t(77181),u=t(68197),c=t(59624),d=t(66204),v=t(47313),f=t(24511),h=t(7370),m=t(51282),p=t(58821),x=t(2717),Z=t(97421),j=t(18478),g=t(84618),y=t(17649),b=t(66461),C=t(22539),w=t(3394),S=t(57864),k=t(70816),_=t.n(k),N=t(46417),F=o.Z.Step,I=function(){return(0,N.jsx)("img",{src:j,width:"50",alt:"Pin"})},M=function(){return(0,N.jsx)("img",{src:g,width:"50",alt:"Pin"})},B=["blue","red","gold","volcano","cyan","lime"];e.Z=function(n){var e,t,j,g,k,D,T=n.id,U=n.handleCancel,V=(0,f.$)().t,$=(0,v.useState)(null),E=(0,i.Z)($,2),O=E[0],Y=E[1],q=(0,v.useState)(null),A=(0,i.Z)(q,2),L=A[0],P=A[1],z=(0,v.useState)(null),G=(0,i.Z)(z,2),H=G[0],W=G[1],J=(0,x.v9)((function(n){return n.globalSettings}),x.wU).settings,K=(0,y.Z)(J),Q=(0,v.useState)(0),R=(0,i.Z)(Q,2),X=R[0],nn=R[1],en=(0,v.useState)((0,y.Z)(J)),tn=(0,i.Z)(en,2),ln=tn[0],on=tn[1],an=(0,v.useState)((0,y.Z)(J)),rn=(0,i.Z)(an,2),sn=rn[0],un=rn[1],cn=(0,v.useState)([{id:0,name:"new",icon:(0,N.jsx)(b.Z,{})},{id:1,name:"accepted",icon:(0,N.jsx)(p.IQF,{})},{id:2,name:"ready",icon:(0,N.jsx)(C.TkG,{})},{id:3,name:"on_a_way",icon:(0,N.jsx)(w.Akc,{})},{id:4,name:"delivered",icon:(0,N.jsx)(w.kme,{})}]),dn=(0,i.Z)(cn,2),vn=dn[0],fn=dn[1];var hn=(0,x.v9)((function(n){return n.globalSettings.settings}),x.wU).google_map_key;(0,v.useEffect)((function(){Y(!0),h.Z.getById(T).then((function(n){var e,t=n.data;fn("canceled"===t.status?[{id:1,name:"new",icon:(0,N.jsx)(b.Z,{})},{id:5,name:"canceled",icon:(0,N.jsx)(S.SV5,{})}]:vn),nn("canceled"===t.status?1:null===(e=vn.find((function(n){return n.name===t.status})))||void 0===e?void 0:e.id),W("canceled"===t.status?"error":"success"),P(t),un({lat:t.location.latitude,lng:t.location.longitude}),on({lat:t.shop.location.latitude,lng:t.shop.location.longitude})})).finally((function(){Y(!1)}))}),[]);return(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(a.Z,{visible:!!T,title:V("show.locations"),onCancel:function(){return U()},style:{minWidth:"80vw"},footer:[(0,N.jsx)(r.Z,{type:"default",onClick:U,children:V("cancel")},"cancelBtn")],children:O?(0,N.jsx)(m.Z,{}):(0,N.jsxs)(s.Z,{children:[(0,N.jsx)(o.Z,{current:X,status:H,className:"mb-5",children:null===vn||void 0===vn?void 0:vn.map((function(n,e){return(0,N.jsx)(F,{title:V(n.name),icon:null===n||void 0===n?void 0:n.icon},n.id+e)}))}),(0,N.jsxs)(u.Z,{gutter:12,children:[(0,N.jsxs)(c.Z,{span:12,children:[(0,N.jsxs)("h3",{children:[V("order.id")," #",null===L||void 0===L?void 0:L.id]}),(0,N.jsxs)("p",{children:[(0,N.jsx)(p.D73,{})," ",_()(null===L||void 0===L?void 0:L.created_at).format("YYYY-MM-DD HH:mm")]}),(0,N.jsxs)("p",{children:[V("schedulet.at")," ",null===L||void 0===L?void 0:L.delivery_date]}),(0,N.jsxs)("span",{children:[(0,N.jsx)("strong",{children:null===L||void 0===L||null===(e=L.shop)||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title})," ",null===L||void 0===L||null===(j=L.details)||void 0===j?void 0:j.map((function(n,e){var t,i,l;return(0,N.jsx)(d.Z,{color:B[e],children:null===n||void 0===n||null===(t=n.stock)||void 0===t||null===(i=t.product)||void 0===i||null===(l=i.translation)||void 0===l?void 0:l.title})}))]})]}),(0,N.jsxs)(c.Z,{span:12,children:[(0,N.jsxs)("p",{children:[V("status")," ","new"===(null===L||void 0===L?void 0:L.status)?(0,N.jsx)(d.Z,{color:"blue",children:V(null===L||void 0===L?void 0:L.status)}):"canceled"===(null===L||void 0===L?void 0:L.status)?(0,N.jsx)(d.Z,{color:"error",children:V(null===L||void 0===L?void 0:L.status)}):(0,N.jsx)(d.Z,{color:"cyan",children:V(null===L||void 0===L?void 0:L.status)})]}),(0,N.jsxs)("p",{children:[V("payment.method")," ",(0,N.jsx)("strong",{children:null===L||void 0===L||null===(g=L.transaction)||void 0===g||null===(k=g.payment_system)||void 0===k?void 0:k.tag})]}),(0,N.jsxs)("p",{children:[V("order.type")," ",(0,N.jsx)("strong",{children:null===L||void 0===L?void 0:L.delivery_type})]}),(0,N.jsxs)("p",{children:[V("payment.type")," ",(0,N.jsx)("strong",{children:null===L||void 0===L||null===(D=L.transaction)||void 0===D?void 0:D.status})]})]}),(0,N.jsxs)(c.Z,{span:24,className:"mt-5",children:[(0,N.jsx)("h4",{children:V("map")}),(0,N.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,N.jsxs)(l.ZP,{bootstrapURLKeys:{key:Z.kr||hn},defaultZoom:15,center:K,yesIWantToUseGoogleMapApiInternals:!0,options:{fullscreenControl:!1},onGoogleApiLoaded:function(n){for(var e=n.map,t=n.maps,i=[ln,sn].map((function(n){return{lat:Number(n.lat||"0"),lng:Number(n.lng||"0")}})),l=new t.LatLngBounds,o=0;o<i.length;o++)l.extend(i[o]);e.fitBounds(l)},children:[(0,N.jsx)(M,{lat:null===ln||void 0===ln?void 0:ln.lat,lng:null===ln||void 0===ln?void 0:ln.lng}),(0,N.jsx)(I,{lat:null===sn||void 0===sn?void 0:sn.lat,lng:null===sn||void 0===sn?void 0:sn.lng})]})})]})]})]})})})}},84618:function(n,e,t){n.exports=t.p+"static/media/shop.46d7a94ca800c711764a.png"},18478:function(n,e,t){n.exports=t.p+"static/media/user.fbe7078c52acde79652d.jpg"}}]);