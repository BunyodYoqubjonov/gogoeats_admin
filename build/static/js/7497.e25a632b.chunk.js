"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7497],{97388:function(e,r,n){n.d(r,{Z:function(){return Z}});var t=n(15861),i=n(29439),l=n(87757),a=n.n(l),s=n(47313),o=n(16609),u=n(97421),d=n.p+"static/media/pin.0e41858db80c699cd8a2.png",c=n(31881),m=n.n(c);function v(e){return p.apply(this,arguments)}function p(){return p=(0,t.Z)(a().mark((function e(r){var n,t,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:u.kr,t={latlng:"".concat(null===r||void 0===r?void 0:r.lat,",").concat(null===r||void 0===r?void 0:r.lng),key:n},e.abrupt("return",m().get("https://maps.googleapis.com/maps/api/geocode/json",{params:t}).then((function(e){var r;return null===(r=e.data.results[0])||void 0===r?void 0:r.formatted_address})).catch((function(e){return"not found"})));case 3:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}var h=n(5958),f=n(23560),j=n(24511),g=n(46417);var Z=(0,o.GoogleApiWrapper)({apiKey:u.kr})((function(e){var r=(0,s.useState)(),n=(0,i.Z)(r,2),l=n[0],c=n[1],m=(0,j.$)().t,p=function(){var r=(0,t.Z)(a().mark((function r(n,t,i){var l,s,o;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l=i.latLng,s={lat:l.lat(),lng:l.lng()},e.setLocation(s),r.next=5,v(s,u.kr);case 5:o=r.sent,e.setAddress(o);case 7:case"end":return r.stop()}}),r)})));return function(e,n,t){return r.apply(this,arguments)}}(),Z=function(){var r=(0,t.Z)(a().mark((function r(n){var t,i;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t={lat:null===n||void 0===n?void 0:n.lat,lng:null===n||void 0===n?void 0:n.lng},e.setLocation(t),r.next=4,v(t,u.kr);case 4:i=r.sent,e.setAddress(i);case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),x=function(){var e=(0,t.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.geolocation.getCurrentPosition((function(e){var r={lat:e.coords.latitude,lng:e.coords.longitude};c(r)}),(function(e){f.Am.warning(m("turn.on.gps"))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){x()}),[]);for(var w=[{lat:Number(e.location.lat)||0,lng:Number(e.location.lng)||0}],b=new e.google.maps.LatLngBounds,y=0;y<w.length;y++)b.extend(w[y]);return(0,g.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,g.jsx)("button",{className:"map-button",type:"button",onClick:function(){x(),l&&Z(l)},children:(0,g.jsx)(h.nDs,{})}),(0,g.jsx)(o.Map,{cursor:"pointer",onClick:p,google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,g.jsx)(o.Marker,{position:e.location,icon:{url:d,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))},89281:function(e,r,n){n.d(r,{h:function(){return v}});var t=n(1413),i=n(29439),l=n(45987),a=n(47313),s=n(12279),o=n.n(s),u=n(74294),d=n(72652),c=n(46417),m=["fetchOptions","debounceTimeout","onClear"],v=function(e){var r=e.fetchOptions,n=e.debounceTimeout,s=void 0===n?400:n,v=e.onClear,p=(0,l.Z)(e,m),h=(0,a.useState)(!1),f=(0,i.Z)(h,2),j=f[0],g=f[1],Z=(0,a.useState)([]),x=(0,i.Z)(Z,2),w=x[0],b=x[1],y=(0,a.useMemo)((function(){return o()((function(e){b([]),g(!0),r(e).then((function(e){b(e),g(!1)}))}),s)}),[r,s]);return(0,c.jsx)(u.Z,(0,t.Z)((0,t.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:y,onClear:function(){y(""),v&&v()},notFoundContent:j?(0,c.jsx)(d.Z,{size:"small"}):"no results"},p),{},{options:w,onFocus:function(){y("")}}))}},17649:function(e,r,n){n.d(r,{Z:function(){return t}});n(97421);function t(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};var r=e.location.split(", ");return{lat:Number(null===r||void 0===r?void 0:r[0]),lng:Number(null===r||void 0===r?void 0:r[1])}}},68652:function(e,r,n){n.r(r),n.d(r,{default:function(){return T}});var t=n(15861),i=n(1413),l=n(29439),a=n(87757),s=n.n(a),o=n(47313),u=n(10976),d=n(77181),c=n(68197),m=n(59624),v=n(66672),p=n(16124),h=n(99096),f=n(74294),j=n(46155),g=n(59491),Z=n(97890),x=n(23560),w=n(2717),b=n(90954),y=n(49986),P=n(24511),k=n(70816),q=n.n(k),_=n(5764),E=n(89281),I=n(53149),N=n(84304),S=n(45321),C=n(17649),L=n(86345),O=n(97388),A=n(46417),F=[{label:"Benzine",value:"benzine"},{label:"Diesel",value:"diesel"},{label:"Gas",value:"gas"},{label:"Motorbike",value:"motorbike"},{label:"Bike",value:"bike"},{label:"Foot",value:"foot"},{label:"Electric",value:"electric"}],z=function(e){var r=e.location,n=e.setLocation,t=e.form,i=e.image,l=e.setImage,a=(0,P.$)().t;return(0,A.jsxs)(c.Z,{gutter:12,children:[(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("brand"),name:"brand",rules:[{validator:function(e,r){return r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(a("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,A.jsx)(v.Z,{})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("model"),name:"model",rules:[{validator:function(e,r){return r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(a("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,A.jsx)(v.Z,{})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("type.of.technique"),name:"type_of_technique",rules:[{required:!0,message:a("required")}],children:(0,A.jsx)(f.Z,{options:F})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("car.number"),name:"number",rules:[{validator:function(e,r){return r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(a("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,A.jsx)(v.Z,{})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("car.color"),name:"color",rules:[{validator:function(e,r){return r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(a("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,A.jsx)(v.Z,{})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("height"),name:"height",rules:[{validator:function(e,r){return r||0===r?!r||r<1?Promise.reject(new Error(a("min.1"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,A.jsx)(p.Z,{className:"w-100",addonAfter:"sm"})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("weight"),name:"kg",rules:[{validator:function(e,r){return r||0===r?!r||r<1?Promise.reject(new Error(a("min.1"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,A.jsx)(p.Z,{className:"w-100",addonAfter:"kg"})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("length"),name:"length",rules:[{validator:function(e,r){return r||0===r?!r||r<1?Promise.reject(new Error(a("min.1"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,A.jsx)(p.Z,{className:"w-100",addonAfter:"sm"})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("width"),name:"width",rules:[{validator:function(e,r){return r||0===r?!r||r<1?Promise.reject(new Error(a("min.1"))):Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,A.jsx)(p.Z,{className:"w-100",addonAfter:"sm"})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:a("image"),name:"images",rules:[{validator:function(){return 0===(null===i||void 0===i?void 0:i.length)?Promise.reject(new Error(a("required"))):Promise.resolve()}}],children:(0,A.jsx)(_.Z,{type:"deliveryman/settings",imageList:i,setImageList:l,form:t,length:"1",multiple:!0})})}),(0,A.jsx)(m.Z,{span:6,children:(0,A.jsx)(u.Z.Item,{label:a("online"),name:"online",rules:[{required:!0,message:a("required")}],valuePropName:"checked",children:(0,A.jsx)(L.Z,{})})}),(0,A.jsx)(m.Z,{span:24,children:(0,A.jsx)(u.Z.Item,{label:a("map"),name:"location",children:(0,A.jsx)(O.Z,{location:r,setLocation:n})})})]})},M=n(81566);function T(){var e,r,n=(0,P.$)().t,a=u.Z.useForm(),k=(0,l.Z)(a,1)[0],L=(0,o.useState)(),O=(0,l.Z)(L,2),F=O[0],T=O[1],V=(0,o.useState)(null),U=(0,l.Z)(V,2),B=U[0],D=U[1],$=(0,o.useState)(!1),G=(0,l.Z)($,2),J=G[0],W=G[1],H=(0,Z.s0)(),K=(0,w.v9)((function(e){return e.user}),w.wU),Q=(0,Z.UO)().role,R=(0,w.v9)((function(e){return e.globalSettings}),w.wU).settings,X=(0,o.useState)((0,C.Z)(R)),Y=(0,l.Z)(X,2),ee=Y[0],re=Y[1];(0,o.useEffect)((function(){return function(){var e=k.getFieldsValue(!0);e.birthday=JSON.stringify(null===e||void 0===e?void 0:e.birthday),ie((0,b.nc)({activeMenu:te,data:(0,i.Z)((0,i.Z)({},te.data),e)}))}}),[]);var ne=(0,Z.TH)(),te=(0,w.v9)((function(e){return e.menu.activeMenu})),ie=(0,w.I0)(),le=(0,o.useState)(null!==te&&void 0!==te&&null!==(e=te.data)&&void 0!==e&&e.image?[null===te||void 0===te||null===(r=te.data)||void 0===r?void 0:r.image]:[]),ae=(0,l.Z)(le,2),se=ae[0],oe=ae[1],ue=(0,o.useState)([]),de=(0,l.Z)(ue,2),ce=de[0],me=de[1];function ve(e){return pe.apply(this,arguments)}function pe(){return pe=(0,t.Z)(s().mark((function e(r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={search:r,status:"approved"},e.abrupt("return",I.Z.search(n).then((function(e){return e.data.map((function(e){return{label:null!==e.translation?e.translation.title:"no name",value:e.id}}))})));case 2:case"end":return e.stop()}}),e)}))),pe.apply(this,arguments)}return(0,A.jsx)(d.Z,{title:n("add.user"),children:(0,A.jsx)(u.Z,{form:k,layout:"vertical",initialValues:(0,i.Z)({online:!0,gender:"male"},function(){var e,r;if(null===(e=te.data)||void 0===e||!e.birthday)return{};var n=JSON.parse(null===(r=te.data)||void 0===r?void 0:r.birthday);return{birthday:q()(n)}}()),onFinish:function(e){var r,t;W(!0);var l={firstname:e.firstname,lastname:e.lastname,email:e.user_email,phone:e.phone,birthday:F,gender:e.gender,password_confirmation:e.password_confirmation,password:e.password,images:se[0]?[null===(r=se[0])||void 0===r?void 0:r.name]:void 0,shop_id:null!==e&&void 0!==e&&e.shop_id?void 0!==(null===e||void 0===e?void 0:e.shop_id.length)?null===e||void 0===e||null===(t=e.shop_id)||void 0===t?void 0:t.map((function(e){return e.value})):[null===e||void 0===e?void 0:e.shop_id.value]:void 0,role:Q||void 0,online:Number(e.online),height:e.height,kg:e.kg,length:e.length,price:e.price,price_per_km:e.price_per_km,width:e.width},a=ne.pathname.search("/user/delivery/")?"deliveries/list":"users/admin";console.log(a),y.Z.create(l).then((function(r){var t=r.data;if("deliveryman"===Q){var l={color:e.color,number:e.number,type_of_technique:e.type_of_technique,brand:e.brand,model:e.model,user_id:t.id,images:se.map((function(e){return e.name})),location:{latitude:ee.lat,longitude:ee.lng},online:Number(e.online),height:e.height,kg:e.kg,length:e.length,price:e.price,price_per_km:e.price_per_km,width:e.width};S.Z.create(l).then((function(){x.Am.success(n("successfully.created")),ie((0,b.ph)((0,i.Z)((0,i.Z)({},te),{},{nextUrl:a}))),H("/".concat(a)),ie(ne.pathname.search("/user/delivery/")?(0,M.W)():(0,N.uh)({role:Q}))}))}else{var s="users/admin",o=(0,i.Z)((0,i.Z)({},K.params),{},{role:t.role});ie((0,b.ph)((0,i.Z)((0,i.Z)({},te),{},{menu:s}))),H("/".concat(s)),ie((0,N.uh)(o))}k.resetFields()})).catch((function(e){var r,n,t,i,l,a,s,o,u;null!==e&&void 0!==e&&null!==(r=e.response)&&void 0!==r&&null!==(n=r.data)&&void 0!==n&&n.params&&(x.Am.dismiss(),null===(s=Object.values(null===e||void 0===e||null===(o=e.response)||void 0===o||null===(u=o.data)||void 0===u?void 0:u.params))||void 0===s||s.map((function(e){return x.Am.error(e[0])})));console.log(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.params),D(null===e||void 0===e||null===(l=e.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.params)})).finally((function(){return W(!1)}))},children:(0,A.jsxs)(c.Z,{gutter:12,children:[(0,A.jsx)(m.Z,{span:24,children:(0,A.jsx)(u.Z.Item,{rules:[{validator:function(){return 0===(null===se||void 0===se?void 0:se.length)?Promise.reject(new Error(n("required"))):Promise.resolve()}}],name:"images",label:n("avatar"),children:(0,A.jsx)(_.Z,{type:"users",imageList:se,setImageList:oe,form:k,multiple:!1})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("firstname"),name:"firstname",help:null!==B&&void 0!==B&&B.firstname?B.firstname[0]:null,validateStatus:null!==B&&void 0!==B&&B.firstname?"error":"success",rules:[{validator:function(e,r){return r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(n("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(n("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(n("required")))}}],children:(0,A.jsx)(v.Z,{})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:"lastname",name:"lastname",help:null!==B&&void 0!==B&&B.lastname?B.lastname[0]:null,validateStatus:null!==B&&void 0!==B&&B.lastname?"error":"success",rules:[{validator:function(e,r){return r?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(n("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(n("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(n("required")))}}],children:(0,A.jsx)(v.Z,{})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("phone"),name:"phone",help:null!==B&&void 0!==B&&B.phone?B.phone[0]:null,validateStatus:null!==B&&void 0!==B&&B.phone?"error":"success",rules:[{required:!0,message:n("required")}],children:(0,A.jsx)(p.Z,{min:0,className:"w-100"})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("birthday"),name:"birthday",rules:[{required:!0,message:n("required")}],children:(0,A.jsx)(h.Z,{onChange:function(e,r){return T(r)},className:"w-100",disabledDate:function(e){return q()().add(-18,"years")<=e},defaultPickerValue:q()().add(-18,"years")})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("gender"),name:"gender",rules:[{required:!0,message:n("required")}],children:(0,A.jsxs)(f.Z,{picker:"dayTime",className:"w-100",children:[(0,A.jsx)(f.Z.Option,{value:"male",children:n("male")}),(0,A.jsx)(f.Z.Option,{value:"female",children:n("female")})]})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("email"),name:"user_email",help:null!==B&&void 0!==B&&B.email?B.email[0]:null,validateStatus:null!==B&&void 0!==B&&B.email?"error":"success",rules:[{required:!0,message:n("required")},{type:"email",message:n("invalid.email")}],children:(0,A.jsx)(v.Z,{type:"email"})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("password"),name:"password",help:null!==B&&void 0!==B&&B.password?B.password[0]:null,validateStatus:null!==B&&void 0!==B&&B.password?"error":"success",rules:[{required:!0,message:n("required")},{validator:function(e,r){return r&&(null===r||void 0===r?void 0:r.length)<6?Promise.reject(new Error(n("min.6.letters"))):Promise.resolve()}}],normalize:function(e){return""===(null===e||void 0===e?void 0:e.trim())?null===e||void 0===e?void 0:e.trim():e},children:(0,A.jsx)(v.Z.Password,{type:"password",className:"w-100"})})}),"admin"!==Q&&"manager"!==Q&&"moderator"!==Q&&"seller"!==Q&&"cook"!==Q&&"user"!==Q&&(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("shop"),name:"shop_id",rules:[{required:!0,message:n("required")}],children:(0,A.jsx)(E.h,{mode:"multiple",className:"w-100",placeholder:n("select.shop"),fetchOptions:ve,allowClear:!1})})}),"cook"===Q&&(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("shop"),name:"shop_id",rules:[{required:!0,message:n("required")}],children:(0,A.jsx)(E.h,{fetchOptions:ve,className:"w-100",placeholder:n("select.shop"),allowClear:!1})})}),"moderator"===Q&&(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("branches"),name:"shop_id",rules:[{required:!0,message:n("required")}],children:(0,A.jsx)(E.h,{fetchOptions:ve,className:"w-100",placeholder:n("select.shop"),allowClear:!1})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(u.Z.Item,{label:n("password.confirmation"),help:null!==B&&void 0!==B&&B.password_confirmation?B.password_confirmation[0]:null,validateStatus:null!==B&&void 0!==B&&B.password_confirmation?"error":"success",name:"password_confirmation",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:n("required")},function(e){var r=e.getFieldValue;return{validator:function(e,t){return t&&r("password")!==t?Promise.reject(n("two.passwords.dont.match")):Promise.resolve()}}}],normalize:function(e){return""===(null===e||void 0===e?void 0:e.trim())?null===e||void 0===e?void 0:e.trim():e},children:(0,A.jsx)(v.Z.Password,{type:"password"})})}),"deliveryman"===Q&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(j.Z,{className:"pt-3 pb-3",dashed:!0,orientation:"left",plain:!0,children:n("deliveryman.settings")}),(0,A.jsx)(z,{setLocation:re,location:ee,setImage:me,image:ce,form:k})]}),(0,A.jsx)(m.Z,{span:24,children:(0,A.jsx)(g.Z,{type:"primary",htmlType:"submit",loading:J,children:n("save")})})]})})})}}}]);