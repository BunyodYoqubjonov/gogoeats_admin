(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8062],{33834:function(t,e,n){"use strict";n.d(e,{K:function(){return l}});var a=n(4942),i=n(1413),r=n(97890),o=n(74776),u=n.n(o),l=function(){var t=(0,r.s0)(),e=(0,r.TH)(),n=u().parse(e.search,{ignoreQueryPrefix:!0});return{values:n,set:function(e,r){return t({search:u().stringify((0,i.Z)((0,i.Z)({},n),{},(0,a.Z)({},e,r)))})},reset:function(e){var a=(0,i.Z)({},n);a[e]&&delete a[e],t({search:u().stringify((0,i.Z)({},a))})},clear:function(){return t({search:u().stringify({})})},merge:function(e){return t({search:u().stringify((0,i.Z)((0,i.Z)({},n),e))})}}}},60124:function(t,e,n){"use strict";n.r(e);var a=n(4942),i=n(93433),r=n(1413),o=n(29439),u=n(47313),l=n(16848),c=n(83999),s=n(77181),d=n(72652),v=n(16636),f=n(44902),p=n(63945),g=n(89904),Z=n(32937),x=n(73431),h=n(97890),m=n(18333),_=n(2717),b=n(90954),j=n(24511),y=n(33834),k=n(46417),S=c.Z.Step;e.default=function(){var t,e=(0,j.$)().t,n=(0,h.UO)().uuid,O=(0,y.K)(),w=(0,_.v9)((function(t){return t.menu}),_.wU).activeMenu,F=(0,_.v9)((function(t){return t.formLang}),_.wU).languages,N=(0,_.I0)(),C=Number((null===(t=O.values)||void 0===t?void 0:t.step)||0),E=(0,u.useState)(w.refetch),M=(0,o.Z)(E,2),U=M[0],q=M[1],I=function(){var t=C+1;O.set("step",t)},K=function(){var t=C-1;O.set("step",t)},T=function(t){return t?{label:t.translation?t.translation.title:t.title,value:t.id}:null};function z(t){q(!0),m.Z.getById(t).then((function(t){var e={};t.data.stocks.forEach((function(t){t.extras.forEach((function(n){var a,i,r,o,u,l,c;n.extra_group_id in e?null!==(a=e[n.extra_group_id].values)&&void 0!==a&&a.some((function(t){return t.value===n.id}))||null===(i=e[n.extra_group_id].values)||void 0===i||i.push({value:n.id,label:n.value,stock_id:t.id,group:null===(r=n.group)||void 0===r||null===(o=r.translation)||void 0===o?void 0:o.title}):e[n.extra_group_id]={label:null===(u=n.group.translation)||void 0===u?void 0:u.title,value:n.extra_group_id,id:n.extra_group_id,stock_id:t.id,values:[{value:n.id,label:n.value,stock_id:t.id,group:null===(l=n.group)||void 0===l||null===(c=l.translation)||void 0===c?void 0:c.title}]}}))}));var n,o=(0,r.Z)((0,r.Z)((0,r.Z)({},t.data),function(t){if(null===t||void 0===t||!t.translations)return{};var e=t.translations,n=F.map((function(t){var n,i,r;return r={},(0,a.Z)(r,"title[".concat(t.locale,"]"),null===(n=e.find((function(e){return e.locale===t.locale})))||void 0===n?void 0:n.title),(0,a.Z)(r,"description[".concat(t.locale,"]"),null===(i=e.find((function(e){return e.locale===t.locale})))||void 0===i?void 0:i.description),r}));return Object.assign.apply(Object,[{}].concat((0,i.Z)(n)))}(t.data)),{},{category:T(t.data.category),brand:T(t.data.brand),unit:T(t.data.unit),images:(n=t.data.galleries,n.map((function(t){return{uid:t.id,name:t.path,url:t.path}}))),product_id:t.data.id,extras:Object.values(e),stocks:t.data.stocks.map((function(t){return(0,r.Z)((0,r.Z)((0,r.Z)({},t),Object.assign.apply(Object,[{}].concat((0,i.Z)(t.extras.map((function(t,e){var n;return(0,a.Z)({},"extras[".concat(e,"]"),{label:t.value,value:t.id,group:null===(n=t.group.translation)||void 0===n?void 0:n.title})})))))),{},{quantity:t.quantity||0,extras:void 0})})),properties:t.data.properties.map((function(t,e){var n;return n={id:e},(0,a.Z)(n,"key[".concat(t.locale,"]"),t.key),(0,a.Z)(n,"value[".concat(t.locale,"]"),t.value),n})),translation:void 0,translations:void 0});N((0,b.nc)({activeMenu:w,data:o}))})).finally((function(){q(!1),N((0,b.A_)(w))}))}(0,u.useEffect)((function(){z(n)}),[w.refetch,n]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(s.Z,{title:e("edit.food"),extra:(0,k.jsx)(x.Z,{}),children:(0,k.jsx)(c.Z,{current:C,onChange:function(t){N((0,b.nc)({activeMenu:w,data:(0,r.Z)((0,r.Z)({},w.data),{},{step:t})})),O.set("step",t)},children:l.S.map((function(t){return(0,k.jsx)(S,{title:e(t.title)},t.title)}))})}),U?(0,k.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,k.jsx)(d.Z,{size:"large",className:"py-5"})}):(0,k.jsxs)("div",{className:"",children:["First-content"===l.S[C].content&&(0,k.jsx)(Z.Z,{next:I,action_type:"edit"}),"Second-content"===l.S[C].content&&(0,k.jsx)(g.Z,{next:I,prev:K,mode:"edit"}),"Third-content"===l.S[C].content&&(0,k.jsx)(p.Z,{next:I,prev:K,mode:"edit"}),"Fourth-content"===l.S[C].content&&(0,k.jsx)(v.Z,{next:I,prev:K,mode:"edit"}),"Finish-content"===l.S[C].content&&(0,k.jsx)(f.Z,{prev:K,mode:"edit"})]})]})}},24654:function(){}}]);