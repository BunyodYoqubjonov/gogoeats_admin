"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2926],{89802:function(e,t,n){n.d(t,{q:function(){return c}});var r=n(1413),i=n(29439),o=n(45987),l=n(47313),a=n(74294),u=n(72652),d=n(46417),s=["fetchOptions","refetch"],c=function(e){var t=e.fetchOptions,n=e.refetch,c=void 0!==n&&n,v=(0,o.Z)(e,s),p=(0,l.useState)(!1),f=(0,i.Z)(p,2),m=f[0],y=f[1],h=(0,l.useState)([]),x=(0,i.Z)(h,2),j=x[0],g=x[1];return(0,d.jsx)(a.Z,(0,r.Z)((0,r.Z)({labelInValue:!0,filterOption:!1,notFoundContent:m?(0,d.jsx)(u.Z,{size:"small"}):"no results"},v),{},{options:m?[]:j,onFocus:function(){j.length&&!c||(y(!0),t().then((function(e){g(e),y(!1)})))}}))}},89281:function(e,t,n){n.d(t,{h:function(){return p}});var r=n(1413),i=n(29439),o=n(45987),l=n(47313),a=n(12279),u=n.n(a),d=n(74294),s=n(72652),c=n(46417),v=["fetchOptions","debounceTimeout","onClear"],p=function(e){var t=e.fetchOptions,n=e.debounceTimeout,a=void 0===n?400:n,p=e.onClear,f=(0,o.Z)(e,v),m=(0,l.useState)(!1),y=(0,i.Z)(m,2),h=y[0],x=y[1],j=(0,l.useState)([]),g=(0,i.Z)(j,2),Z=g[0],b=g[1],_=(0,l.useMemo)((function(){return u()((function(e){b([]),x(!0),t(e).then((function(e){b(e),x(!1)}))}),a)}),[t,a]);return(0,c.jsx)(d.Z,(0,r.Z)((0,r.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:_,onClear:function(){_(""),p&&p()},notFoundContent:h?(0,c.jsx)(s.Z,{size:"small"}):"no results"},f),{},{options:Z,onFocus:function(){_("")}}))}},16030:function(e,t,n){n.r(t),n.d(t,{default:function(){return ke}});var r=n(1413),i=n(29439),o=n(47313),l=n(10976),a=n(256),u=n(59491),d=n(68197),s=n(59624),c=n(72652),v=n(15861),p=n(87757),f=n.n(p),m=n(77181),y=n(74294),h=n(66672),x=n(16031),j=n(49986),g=n(89281),Z=n(2717),b=n(73270),_=n(24511),w=n(55768),k=n(90954),O=n(97890),S=n(23560),M=n(89802),q=n(20637),C=n(9274),P=n(97388),N=n(17649),I=n(47168),E=n(97421),D=n(46417);function U(e){var t,n,a=e.uuid,d=e.handleCancel,s=(0,_.$)().t,c=l.Z.useForm(),v=(0,i.Z)(c,1)[0],p=(0,Z.I0)(),f=(0,Z.v9)((function(e){return e.menu}),Z.wU).activeMenu,m=(0,Z.v9)((function(e){return e.globalSettings}),Z.wU).settings,y=(0,Z.v9)((function(e){return e.globalSettings.settings}),Z.wU).google_map_key,h=(0,Z.v9)((function(e){return e.order}),Z.wU).data,x=(0,I.usePlacesWidget)({apiKey:y||E.kr,onPlaceSelected:function(e){var t={lat:null===e||void 0===e?void 0:e.geometry.location.lat(),lng:null===e||void 0===e?void 0:e.geometry.location.lng()};S(t)}}),j=x.ref,g=(0,o.useState)(h.address?{lat:h.address.lat,lng:h.address.lng}:(0,N.Z)(m)),w=(0,i.Z)(g,2),O=w[0],S=w[1];return(0,D.jsx)(C.Z,{visible:!!a,title:s("create.address"),onCancel:d,footer:[(0,D.jsx)(u.Z,{type:"primary",onClick:function(){return v.submit()},children:s("save")},"saveBtn"),(0,D.jsx)(u.Z,{type:"default",onClick:d,children:s("cancel")},"cancelBtn")],children:(0,D.jsxs)(l.Z,{layout:"vertical",name:"user-address",form:v,onFinish:function(e){var t=(0,r.Z)((0,r.Z)({},e),{},{active:1,lat:O.lat,lng:O.lng});p((0,b.oM)({address:t})),p((0,k.nc)({activeMenu:f,data:(0,r.Z)((0,r.Z)({},f.data),{},{addressData:t})})),d()},initialValues:{address:null===f||void 0===f||null===(t=f.data)||void 0===t||null===(n=t.addressData)||void 0===n?void 0:n.address},children:[(0,D.jsx)(l.Z.Item,{name:"address",label:s("address"),rules:[{required:!0,message:s("required")}],children:(0,D.jsx)("input",{className:"address-input",ref:j,placeholder:""})}),(0,D.jsx)(l.Z.Item,{label:s("map"),children:(0,D.jsx)(P.Z,{location:O,setLocation:S,setAddress:function(e){return v.setFieldsValue({address:e})}})})]})})}var A=function(e){var t,n,r=e.form,a=(0,_.$)().t,c=(0,Z.I0)(),p=(0,O.s0)(),C=(0,Z.v9)((function(e){return e.order}),Z.wU).data,P=(0,Z.v9)((function(e){return e.currency}),Z.wU).currencies,N=(0,Z.v9)((function(e){return e.menu}),Z.wU).activeMenu,I=(0,o.useState)(null),E=(0,i.Z)(I,2),A=E[0],B=E[1],L=(0,o.useState)([]),Y=(0,i.Z)(L,2),R=Y[0],H=Y[1],T=(0,o.useState)(!1),F=(0,i.Z)(T,2),V=F[0],G=F[1],W=(0,Z.v9)((function(e){return e.globalSettings.settings}),Z.wU).payment_type;function K(){return K=(0,v.Z)(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={search:t,perPage:10},e.abrupt("return",j.Z.search(n).then((function(e){var t=e.data;return H(t),J(t)})));case 2:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}function $(){return($=(0,v.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",q.Z.getAll().then((function(e){return e.data.filter((function(e){return"cash"===e.tag||"wallet"===e.tag})).map((function(e){return{label:e.tag||"no name",value:e.id,key:e.id}}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=(0,v.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",q.Z.getById(C.shop.value).then((function(e){return e.data.filter((function(e){return"cash"===e.tag||"wallet"===e.tag})).map((function(e){return{label:e.payment.tag||"no name",value:e.payment.id,key:e.payment.id}}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){if(e)return(0,x.isArray)(e)?e.map((function(e){return{label:"".concat(e.firstname," ").concat(e.lastname||""),value:e.id}})):{label:"".concat(e.firstname," ").concat(e.lastname||""),value:e.id,key:e.id}}(0,o.useEffect)((function(){G(!0)}),[C.shop]);return(0,D.jsxs)(m.Z,{title:a("customer.details"),children:[(0,D.jsxs)(d.Z,{gutter:12,children:[(0,D.jsx)(s.Z,{span:16,children:(0,D.jsx)(l.Z.Item,{label:a("client"),name:"user",rules:[{required:!0,message:a("required")}],children:(0,D.jsx)(g.h,{placeholder:a("select.client"),fetchOptions:function(e){return K.apply(this,arguments)},onSelect:function(e){var t=R.find((function(t){return t.id===e.value}));c((0,b.oM)({user:e,userUuid:t.uuid,userOBJ:t})),r.setFieldsValue({address:null})}})})}),(0,D.jsx)(s.Z,{span:8,children:(0,D.jsx)(l.Z.Item,{label:a("add"),className:"label-hidden",children:(0,D.jsx)(u.Z,{icon:(0,D.jsx)(w.Z,{}),onClick:function(){c((0,k.bL)({url:"user/add",id:"user_add",name:a("add.user")})),p("/user/add")},children:a("add")})})}),(0,D.jsx)(s.Z,{span:24,children:(0,D.jsx)(l.Z.Item,{label:a("address"),name:"address",rules:[{required:!1,message:a("required")}],children:(0,D.jsx)("div",{className:"address w-100",onClick:function(){C.userUuid?B(C.userUuid):S.Am.warning(a("please.select.client"))},children:null===(t=N.data)||void 0===t||null===(n=t.addressData)||void 0===n?void 0:n.address})})}),(0,D.jsx)(s.Z,{span:12,children:(0,D.jsx)(l.Z.Item,{label:a("currency"),name:"currency_id",rules:[{required:!0,message:a("required")}],children:(0,D.jsx)(y.Z,{placeholder:a("select.currency"),onSelect:function(e){var t=P.find((function(t){return t.id===e}));c((0,b.dY)(t))},children:P.map((function(e,t){return(0,D.jsxs)(y.Z.Option,{value:e.id,children:[e.title," (",e.symbol,")"]},t)}))})})}),(0,D.jsx)(s.Z,{span:12,children:(0,D.jsx)(l.Z.Item,{label:a("payment.type"),name:"payment_type",rules:[{required:!0,message:a("required")}],children:(0,D.jsx)(M.q,{refetch:V,fetchOptions:"admin"===W?function(){return $.apply(this,arguments)}:function(){return z.apply(this,arguments)},className:"w-100",placeholder:a("select.payment.type"),onSelect:function(e){return c((0,b.oM)({paymentType:e}))}})})}),(0,D.jsx)(s.Z,{span:24,children:(0,D.jsx)(l.Z.Item,{label:a("note"),name:"note",children:(0,D.jsx)(h.Z,{})})})]}),A&&(0,D.jsx)(U,{uuid:A,handleCancel:function(){return B(null)}})]})},B=n(99096),L=n(70816),Y=n.n(L),R=n(53149),H=[{title:"sunday"},{title:"monday"},{title:"tuesday"},{title:"wednesday"},{title:"thursday"},{title:"friday"},{title:"saturday"}],T=function(){var e,t,n,i,a,u,c,v=(0,_.$)().t,p=(0,Z.I0)(),f=(0,Z.v9)((function(e){return e.order}),Z.wU).data,h=(0,Z.v9)((function(e){return e.menu}),Z.wU).activeMenu,x=new Date(null===f||void 0===f?void 0:f.delivery_date),j=null===(e=h.data)||void 0===e||null===(t=e.CurrentShop)||void 0===t||null===(n=t.shop_working_days)||void 0===n?void 0:n.filter((function(e){return!0!==e.disabled})).find((function(e){var t;return(null===e||void 0===e?void 0:e.day)===(null===(t=H[x.getDay()])||void 0===t?void 0:t.title)})),g=null===(i=h.data)||void 0===i||null===(a=i.CurrentShop)||void 0===a||null===(u=a.shop_closed_date)||void 0===u?void 0:u.map((function(e){return e.day}));var w=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n},O=[{label:"delivery",value:(null===(c=f.shop)||void 0===c?void 0:c.price)||0,key:1},{label:"pickup",value:"0",key:2}];return(0,o.useEffect)((function(){var e,t,n;null!==f&&void 0!==f&&null!==(e=f.shop)&&void 0!==e&&e.value&&(n=null===f||void 0===f||null===(t=f.shop)||void 0===t?void 0:t.value,R.Z.getById(n).then((function(e){var t=null===e||void 0===e?void 0:e.data;p((0,b.oM)({currency_shop:t})),p((0,k.nc)({activeMenu:h,data:(0,r.Z)((0,r.Z)({},null===h||void 0===h?void 0:h.data),{},{CurrentShop:null===e||void 0===e?void 0:e.data})}))})))}),[null===f||void 0===f?void 0:f.shop]),(0,D.jsx)(m.Z,{title:v("shipping.info"),children:(0,D.jsxs)(d.Z,{gutter:12,children:[(0,D.jsx)(s.Z,{span:24,children:(0,D.jsx)(l.Z.Item,{name:"delivery",label:v("delivery"),rules:[{required:!0,message:v("required")}],children:(0,D.jsx)(y.Z,{options:O,labelInValue:!0,onSelect:function(e){return p((0,b.oM)({delivery_fee:null===e||void 0===e?void 0:e.value}))},onChange:function(e){return p((0,b.oM)({deliveries:e}))}})})}),(0,D.jsx)(s.Z,{span:24,children:(0,D.jsxs)(d.Z,{gutter:12,children:[(0,D.jsx)(s.Z,{span:12,children:(0,D.jsx)(l.Z.Item,{name:"delivery_date",label:v("delivery.date"),rules:[{required:!0,message:v("required")}],children:(0,D.jsx)(B.Z,{placeholder:v("delivery.date"),className:"w-100",format:"YYYY-MM-DD",disabledDate:function(e){var t=null===g||void 0===g?void 0:g.find((function(t){return t===Y()(e).format("YYYY-MM-DD")})),n=Y()().add(-1,"days")>=e;return t||n},onChange:function(e){var t=Y()(e).format("YYYY-MM-DD");p((0,b.oM)({delivery_date:t}))}})})}),(0,D.jsx)(s.Z,{span:12,children:(0,D.jsx)(l.Z.Item,{label:"".concat(v("delivery.time")," (").concat(v("up.to"),")"),name:"delivery_time",rules:[{required:!1,message:v("required")}],children:(0,D.jsx)(B.Z,{disabled:!(null!==f&&void 0!==f&&f.delivery_date),picker:"time",placeholder:v("start.time"),className:"w-100",format:"HH:mm:ss",showNow:!1,disabledTime:function(){return{disabledHours:function(){return function(e,t){for(var n=parseInt(e),r=parseInt(t),i=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],o=n;o<=r;o++)delete i[o];return i}((null===j||void 0===j?void 0:j.from.substring(0,2))>=Y()(new Date).format("HH")?null===j||void 0===j?void 0:j.from.substring(0,2):Y()(new Date).format("HH"),null===j||void 0===j?void 0:j.to.substring(0,2))},disabledMinutes:function(){return w(0,60)},disabledSeconds:function(){return w(0,60)}}},onChange:function(e){var t=Y()(e).format("HH:mm:ss");p((0,b.oM)({delivery_time:t}))}})})})]})})]})})},F=n(45705),V=n(11216),G=n(30763),W=n(11875),K=n(45464),$=n(82138),z=n(11829),J=n(12019),Q=n(8846),X=n(43681),ee=n(7370),te=n(93433),ne=n(26824),re=n(83371),ie=n(32697),oe=n(84017),le=n(91220),ae=n(77370),ue=n(28939),de=n(80314),se=n(17101);function ce(e){var t,n,l,a,v,p,f,m=e.extrasModal,y=e.setExtrasModal,h=(0,o.useState)(!1),x=(0,i.Z)(h,2),j=x[0],g=x[1],w=(0,o.useState)({}),k=(0,i.Z)(w,2),O=k[0],M=k[1],q=(0,_.$)().t,P=(0,o.useState)(m.quantity||O.quantity||O.min_qty),N=(0,i.Z)(P,2),I=N[0],E=N[1],U=(0,o.useState)({}),A=(0,i.Z)(U,2),B=A[0],L=A[1],Y=(0,Z.v9)((function(e){return e.order.data}),Z.wU).currency,R=(0,Z.I0)(),H=(0,o.useState)([]),T=(0,i.Z)(H,2),V=T[0],G=T[1],W=(0,o.useState)([]),z=(0,i.Z)(W,2),J=z[0],X=z[1],ee=(0,o.useState)({extras:[],stock:{id:0,quantity:1,price:0}}),ce=(0,i.Z)(ee,2),ve=ce[0],pe=ce[1],fe=(0,o.useState)([]),me=(0,i.Z)(fe,2),ye=me[0],he=me[1],xe=(0,o.useState)([]),je=(0,i.Z)(xe,2),ge=je[0],Ze=je[1],be=(0,o.useState)([]),_e=(0,i.Z)(be,2),we=_e[0],ke=_e[1],Oe=function(){return y(!1)};var Se=function(e){var t,n=ye.findIndex((function(t){return t.extra_group_id===e.extra_group_id})),r=ye;n>-1&&(r=r.slice(0,n)),r.push(e);var i=r.map((function(e){return e.id})).join(","),o=(0,ae.y)(i,V,J);pe(o),null===(t=o.extras)||void 0===t||t.forEach((function(t){var n=ye.findIndex((function(n){return t[0].extra_group_id!=e.extra_group_id?n.extra_group_id===t[0].extra_group_id:n.extra_group_id===e.extra_group_id}));if(t[0].level>=e.level){var i=t[0].extra_group_id!=e.extra_group_id?t[0]:e;-1==n?r.push(i):r[n]=i}})),he(r)};(0,o.useEffect)((function(){null!==ve&&void 0!==ve&&ve.stock&&L((0,r.Z)((0,r.Z)({},ve.stock),{},{extras:ye}))}),[ve]);function Me(e){return(null===ge||void 0===ge?void 0:ge.reduce((function(e,t){return e+t.product.stock.price*(t.product.quantity||t.product.min_qty)}),0))+ve.stock[e||"price"]*I}function qe(e,t){pe((function(n){return(0,r.Z)((0,r.Z)({},n),{},{stock:(0,r.Z)((0,r.Z)({},n.stock),{},{addons:n.stock.addons.map((function(n){return n.addon_id===e?(0,r.Z)((0,r.Z)({},n),{},{product:(0,r.Z)((0,r.Z)({},n.product),{},{quantity:t})}):n}))})})})),Ze((function(n){return n.map((function(n){return n.addon_id===e?(0,r.Z)((0,r.Z)({},n),{},{product:(0,r.Z)((0,r.Z)({},n.product),{},{quantity:t})}):n}))}))}return(0,de.Z)((function(){var e=ve.stock.addons.filter((function(e){return we.includes(String(e.addon_id))}));Ze(e)}),[we]),(0,o.useEffect)((function(){g(!0),se.Z.getById(m.uuid).then((function(e){var t,n=e.data;M(n);var r,i=(0,ae.o)(n,null===m||void 0===m?void 0:m.addons);(console.log(m),console.log(i),G(i.extras),E(m.quantity||n.quantity||n.min_qty),X(i.stock),pe((0,ae.y)("",i.extras,i.stock)),null===(t=(0,ae.y)("",i.extras,i.stock).extras)||void 0===t||t.forEach((function(e){he((function(t){return[].concat((0,te.Z)(t),[e[0]])}))})),null!==m&&void 0!==m&&m.addons)&&ke((null===m||void 0===m||null===(r=m.addons)||void 0===r?void 0:r.map((function(e){var t,n;return String((null===e||void 0===e||null===(t=e.stock)||void 0===t||null===(n=t.product)||void 0===n?void 0:n.id)||e.addon_id)})))||[])})).finally((function(){return g(!1)}))}),[m.uuid]),(0,D.jsx)(C.Z,{visible:!!O,title:null===O||void 0===O||null===(t=O.translation)||void 0===t?void 0:t.title,onCancel:Oe,footer:[j?null:(0,D.jsx)(u.Z,{type:"primary",onClick:function(){R((0,b.oM)({calculate:!1}));var e=ge.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{quantity:e.product.quantity||e.product.min_qty,stock_id:e.product.stock.id})})),t=(0,r.Z)((0,r.Z)({},O),{},{stock:B,quantity:I,id:B.id,img:(0,ue.Z)(B)||O.img,stockID:B,addons:e,price:B.price});t.quantity>B.quantity?S.Am.warning("".concat(q("you.cannot.order.more.than")," ").concat(B.quantity)):(R((0,b.x$)(t)),y(null))},children:q("add")},"add-product"),(0,D.jsx)(u.Z,{type:"default",onClick:Oe,children:q("cancel")},"cancel-modal")],children:(0,D.jsxs)(c.Z,{spinning:j,children:[(0,D.jsxs)(d.Z,{gutter:24,children:[(0,D.jsx)(s.Z,{span:8,children:(0,D.jsx)(ne.Z,{src:(0,K.Z)((0,ue.Z)(B)||O.img),alt:O.name,height:200,style:{objectFit:"contain"}})}),(0,D.jsx)(s.Z,{span:16,children:(0,D.jsxs)(re.Z,{title:null===(n=O.translation)||void 0===n?void 0:n.title,children:[(0,D.jsxs)(re.Z.Item,{label:q("price"),span:3,children:[(0,D.jsx)("div",{className:null!==B&&void 0!==B&&B.discount?"strike":"",children:(0,oe.Z)(Me(),Y.symbol)}),null!==B&&void 0!==B&&B.discount?(0,D.jsx)("div",{className:"ml-2 font-weight-bold",children:(0,oe.Z)(Me("total_price"),Y.symbol)}):""]}),(0,D.jsx)(re.Z.Item,{label:q("in.stock"),span:3,children:(0,le.Z)(null===B||void 0===B?void 0:B.quantity,O.unit)}),(0,D.jsx)(re.Z.Item,{label:q("tax"),span:3,children:(0,oe.Z)(null===B||void 0===B?void 0:B.tax,Y.symbol)})]})})]}),null===ve||void 0===ve||null===(l=ve.extras)||void 0===l?void 0:l.map((function(e,t){return(0,D.jsx)("div",{className:"extra-group",children:(0,D.jsx)(F.Z,{className:"extras-select",children:e.map((function(e){return"color"===e.group.type?(0,D.jsx)("span",{className:"extras-color-wrapper ".concat(ye.find((function(t){return t.id===e.id}))?"selected":""),onClick:function(){return Se(e)},children:(0,D.jsx)("i",{className:"extras-color",style:{backgroundColor:e.value}})}):"text"===e.group.type?(0,D.jsx)("span",{className:"extras-text rounded ".concat(ye.find((function(t){return t.id===e.id}))?"selected":""),onClick:function(){return Se(e)},children:e.value}):(0,D.jsx)("span",{className:"extras-image rounded ".concat(ye.find((function(t){return t.id===e.id}))?"selected":""),onClick:function(){return Se(e)},children:(0,D.jsx)("img",{src:(0,K.Z)(e.value),alt:"extra"})})}))},"extra-group"+t)})})),(0,D.jsx)(F.Z,{direction:"vertical",size:"middle",children:null===(a=ve.stock)||void 0===a||null===(v=a.addons)||void 0===v?void 0:v.filter((function(e){return!!e.product})).map((function(e){var t,n,r=we.includes(String(e.addon_id));return(0,D.jsxs)("div",{children:[(0,D.jsx)(ie.Z,{id:String(e.id),name:String(e.id),checked:r,onChange:function(){return function(e){var t=String(e.addon_id);we.includes(t)?ke((function(e){return e.filter((function(e){return e!==t}))})):ke((function(e){return[].concat((0,te.Z)(e),[t])}))}(e)}}),(0,D.jsxs)("label",{htmlFor:String(e.id),children:[r&&(0,D.jsxs)(F.Z,{size:0,children:[(0,D.jsx)(u.Z,{type:"text",className:"minus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,D.jsx)(Q.Z,{}),disabled:1===e.product.quantity,onClick:function(t){t.stopPropagation(),qe(e.addon_id,e.product.quantity-1)}}),(0,D.jsxs)("span",{className:"ml-2",children:[(e.product.quantity||e.product.min_qty)*((null===e||void 0===e?void 0:e.interval)||1),null===(t=e.unit)||void 0===t||null===(n=t.translation)||void 0===n?void 0:n.title]}),(0,D.jsx)(u.Z,{type:"text",className:"plus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,D.jsx)($.Z,{}),onClick:function(t){t.stopPropagation(),qe(e.addon_id,e.product.quantity?e.product.quantity+1:e.product.min_qty+1)}})]}),(0,D.jsx)("span",{className:"ml-2",children:e.product.translation.title})]})]},e.id)}))}),(0,D.jsx)(d.Z,{gutter:12,className:"mt-3",children:(0,D.jsx)(s.Z,{span:24,children:(0,D.jsxs)(F.Z,{children:[(0,D.jsx)(u.Z,{type:"primary",icon:(0,D.jsx)(Q.Z,{}),onClick:function(){1!==I&&(I<=O.min_qty||E((function(e){return e-1})))}},"plus"),(I||1)*((null===O||void 0===O?void 0:O.interval)||1),null===O||void 0===O||null===(p=O.unit)||void 0===p||null===(f=p.translation)||void 0===f?void 0:f.title,(0,D.jsx)(u.Z,{type:"primary",icon:(0,D.jsx)($.Z,{}),onClick:function(){I!==O.max_qty&&E((function(e){return e+1}))}},"minus")]})})})]})})}var ve=n(95882),pe=n(21448),fe=n(74776),me=n.n(fe),ye=n(58821);function he(){var e,t,n,r,l,a,v,p,f,y=(0,_.$)().t,x=(0,Z.I0)(),j=(0,O.s0)(),g=(0,Z.v9)((function(e){return e.order}),Z.wU),w=g.orderItems,S=g.data,M=g.total,q=g.coupon,C=g.orderProducts,P=(0,o.useState)(!1),N=(0,i.Z)(P,2),I=N[0],E=N[1],U=(0,o.useState)(null),A=(0,i.Z)(U,2),B=A[0],L=A[1],Y=(0,o.useState)(!1),R=(0,i.Z)(Y,2),H=R[0],T=R[1],V=(0,Z.v9)((function(e){return e.menu}),Z.wU).activeMenu;(0,de.Z)((function(){w.length?function(){var e;if(null!==S&&void 0!==S&&null!==(e=S.deliveries)&&void 0!==e&&e.label){var t=function(e){var t,n,r,i,o,l,a,u=null===e||void 0===e?void 0:e.map((function(e){var t,n;return{quantity:e.quantity,stock_id:e.stockID?null===(t=e.stockID)||void 0===t?void 0:t.id:null===(n=e.stock)||void 0===n?void 0:n.id}})),d=null===e||void 0===e?void 0:e.flatMap((function(e){var t;return null===(t=e.addons)||void 0===t?void 0:t.map((function(t,n){var r,i;return{quantity:t.quantity,stock_id:t.stock_id,parent_id:e.stockID?null===(r=e.stockID)||void 0===r?void 0:r.id:null===(i=e.stock)||void 0===i?void 0:i.id}}))})),s={products:u.concat(d),currency_id:null===S||void 0===S||null===(t=S.currency)||void 0===t?void 0:t.id,coupon:null===S||void 0===S||null===(n=S.coupon)||void 0===n?void 0:n.name,shop_id:null===S||void 0===S||null===(r=S.shop)||void 0===r?void 0:r.value,type:null===S||void 0===S||null===(i=S.deliveries)||void 0===i||null===(o=i.label)||void 0===o?void 0:o.toLowerCase(),address:{latitude:null===S||void 0===S||null===(l=S.address)||void 0===l?void 0:l.lat,longitude:null===S||void 0===S||null===(a=S.address)||void 0===a?void 0:a.lng}};return me().stringify(s,{addQueryPrefix:!0})}(w);E(!0),ee.Z.calculate(t).then((function(e){var t=e.data.data,n={product_tax:t.total_tax,shop_tax:t.total_shop_tax,order_total:t.total_price,delivery_fee:t.delivery_fee};x((0,b.rU)(n))})).catch((function(){return x((0,b.r3)(C))})).finally((function(){return E(!1)}))}}():x((0,b.pX)())}),[w,S.currency,S.address]);var G=function(e){x((0,k.bL)({id:"product-".concat(e.uuid),url:"product/".concat(e.uuid),name:y("edit.product")})),j("/product/".concat(e.uuid))};var te=function(e,t){x((0,b.OQ)({quantity:e,id:t}))};return(0,D.jsxs)("div",{className:"order-items",children:[I&&(0,D.jsx)("div",{className:"loader",children:(0,D.jsx)(c.Z,{})}),(0,D.jsx)(d.Z,{gutter:24,className:"mt-4",children:(0,D.jsx)(s.Z,{span:24,children:(0,D.jsxs)(m.Z,{className:"shop-card",children:[null===w||void 0===w?void 0:w.map((function(e,t){var n,r,i,o,l,a,d,s,c;return void 0===e.bonus||!1===e.bonus?(0,D.jsx)("div",{children:(0,D.jsxs)(m.Z,{className:"position-relative",children:[(0,D.jsx)(z.Z,{className:"close-order",onClick:function(){return x((0,b.Sg)(e))}}),(0,D.jsxs)(F.Z,{className:"mr-3",children:[(0,D.jsx)("div",{className:"order-item-img",children:(0,D.jsx)("img",{src:(0,K.Z)(null===e||void 0===e?void 0:e.img),alt:null===(n=e.translation)||void 0===n?void 0:n.title})}),(0,D.jsx)(W.Z,{title:(0,D.jsxs)("div",{children:[(0,D.jsxs)(F.Z,{children:[(0,D.jsx)("div",{className:"cursor-pointer white-space-wrap",onClick:function(){return G(e)},children:null===(r=e.translation)||void 0===r?void 0:r.title}),(0,D.jsx)(u.Z,{icon:(0,D.jsx)(J.Z,{}),type:"text",size:"small",onClick:function(){return L(e)}})]}),(0,D.jsx)("div",{className:"product-price",children:(0,oe.Z)(e.price,null===S||void 0===S||null===(i=S.currency)||void 0===i?void 0:i.symbol)})]}),description:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(F.Z,{children:[(0,D.jsx)(u.Z,{disabled:e.quantity<e.min_qty+1,onClick:function(){return te(e.quantity-1,e.id)},type:"primary",icon:(0,D.jsx)(Q.Z,{})})," ",(0,D.jsxs)("span",{children:[e.quantity*((null===e||void 0===e?void 0:e.interval)||1),null===(o=e.unit)||void 0===o||null===(l=o.translation)||void 0===l?void 0:l.title]}),(0,D.jsx)(u.Z,{onClick:function(){return te(e.quantity+1,e.id)},type:"primary",icon:(0,D.jsx)($.Z,{})})]}),(0,D.jsx)("div",{className:"mt-2",children:(0,D.jsx)(F.Z,{wrap:!0,children:null===e||void 0===e||null===(a=e.addons)||void 0===a?void 0:a.map((function(e){var t,n,r,i;return(0,D.jsxs)("span",{className:"extras-text rounded",children:[(null===e||void 0===e||null===(t=e.stock)||void 0===t||null===(n=t.product)||void 0===n||null===(r=n.translation)||void 0===r?void 0:r.title)||(null===e||void 0===e||null===(i=e.product.translation)||void 0===i?void 0:i.title)," ","x ",null===e||void 0===e?void 0:e.quantity]},e.id)}))})})]})})]})]})}):(0,D.jsx)("div",{children:(0,D.jsx)("div",{children:(0,D.jsx)(m.Z,{className:"position-relative",children:(0,D.jsxs)(F.Z,{className:"mr-3 w-100 justify-content-between align-items-start",children:[(0,D.jsxs)(F.Z,{children:[(0,D.jsx)("div",{className:"order-item-img",children:(0,D.jsx)("img",{src:(0,K.Z)(null===e||void 0===e?void 0:e.img),alt:null===(d=e.translation)||void 0===d?void 0:d.title})}),(0,D.jsx)(W.Z,{title:(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{className:"cursor-pointer white-space-wrap",onClick:function(){return G(e)},children:null===(s=e.translation)||void 0===s?void 0:s.title}),(0,D.jsx)("div",{className:"product-price",children:(0,oe.Z)(e.price,null===(c=S.currency)||void 0===c?void 0:c.symbol)})]})})]}),(0,D.jsxs)("div",{className:"bonus",children:[(0,D.jsx)(ye.ojn,{})," Bonus"]})]})})})},t)})),(0,D.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,D.jsxs)(F.Z,{children:[(0,D.jsx)("img",{src:(0,K.Z)(null===(e=V.data)||void 0===e||null===(t=e.shop)||void 0===t?void 0:t.logo_img),alt:"logo",width:40,height:40,className:"rounded-circle"}),(0,D.jsx)("div",{children:null===(n=V.data)||void 0===n||null===(r=n.shop)||void 0===r||null===(l=r.translation)||void 0===l?void 0:l.title})]}),(0,D.jsxs)(F.Z,{children:[(0,D.jsx)(h.Z,{placeholder:y("coupon"),addonAfter:q.verified?(0,D.jsx)(X.Z,{style:{color:"#18a695"}}):null,defaultValue:q.coupon,onBlur:function(e){var t;return x((0,b.cp)({coupon:e.target.value,user_id:null===(t=S.user)||void 0===t?void 0:t.value,shop_id:S.shop.value,verified:!1}))}}),(0,D.jsx)(u.Z,{onClick:function(){return S.shop.id,void(q&&(T(!0),pe.Z.checkCoupon(q).then((function(e){var t=e.data;x((0,b.oM)({coupon:t})),x((0,b.NS)({price:e.data.price,verified:!0}))})).catch((function(){return x((0,b.NS)({price:0,verified:!1}))})).finally((function(){return T(!1)}))))},loading:H,children:y("check.coupon")})]}),(0,D.jsxs)("div",{className:"mt-2 text-right shop-total",children:[(0,D.jsxs)(F.Z,{children:[(0,D.jsxs)("p",{className:"font-weight-bold",children:[y("product.tax"),":"]}),(0,D.jsx)("p",{children:(0,oe.Z)(M.product_tax,null===(a=S.currency)||void 0===a?void 0:a.symbol)})]}),(0,D.jsx)("div",{}),(0,D.jsxs)(F.Z,{children:[(0,D.jsxs)("p",{className:"font-weight-bold",children:[y("shop.tax"),":"]}),(0,D.jsx)("p",{children:(0,oe.Z)(M.shop_tax,null===(v=S.currency)||void 0===v?void 0:v.symbol)})]}),(0,D.jsx)("div",{}),(0,D.jsxs)(F.Z,{children:[(0,D.jsxs)("p",{className:"font-weight-bold",children:[y("delivery.fee"),":"]}),(0,D.jsx)("p",{children:(0,oe.Z)(M.delivery_fee,null===(p=S.currency)||void 0===p?void 0:p.symbol)})]}),(0,D.jsx)("div",{}),(0,D.jsxs)(F.Z,{children:[(0,D.jsxs)("p",{className:"font-weight-bold",children:[y("total"),":"]}),(0,D.jsx)("p",{children:(0,oe.Z)(M.order_total,null===(f=S.currency)||void 0===f?void 0:f.symbol)})]})]})]})]})})}),B&&(0,D.jsx)(ce,{extrasModal:B,setExtrasModal:L})]})}var xe=n(41481),je=n(49067),ge=n(51988),Ze=function(e){var t=e.form,n=(0,_.$)().t,r=(0,o.useState)(null),l=(0,i.Z)(r,2),a=l[0],u=l[1],p=(0,o.useState)(null),y=(0,i.Z)(p,2),h=y[0],x=y[1],j=(0,o.useState)(null),w=(0,i.Z)(j,2),k=w[0],M=w[1],q=(0,o.useState)(null),C=(0,i.Z)(q,2),P=C[0],N=C[1],I=(0,O.UO)().id,E=(0,Z.I0)(),U=(0,Z.v9)((function(e){return e.order}),Z.wU).data,A=(0,Z.v9)((function(e){return e.product}),Z.wU),B=A.products,L=A.loading;function Y(){return Y=(0,v.Z)(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V.Z.search(t).then((function(e){return e.data.map((function(e){return{label:e.title,value:e.id}}))})));case 1:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function R(){return R=(0,v.Z)(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={search:t,type:"main"},e.abrupt("return",G.Z.search(n).then((function(e){return e.data.map((function(e){var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}}))})));case 2:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}(0,de.Z)((function(){var e,t={perPage:10,page:1,brand_id:null===a||void 0===a?void 0:a.value,category_id:null===h||void 0===h?void 0:h.value,search:k,shop_id:null===(e=U.shop)||void 0===e?void 0:e.value,active:1};E((0,ve.q1)(t))}),[a,h,k,U.shop]);function H(){return H=(0,v.Z)(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={search:t,status:"approved"},e.abrupt("return",je.Z.getAll(n).then((function(e){return e.data.map((function(e){var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}}))})));case 2:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}return(0,D.jsxs)(m.Z,{title:n("order.details"),extra:(0,D.jsxs)(F.Z,{wrap:!0,children:[(0,D.jsx)(g.h,{placeholder:n("select.shop"),fetchOptions:function(e){return H.apply(this,arguments)},style:{minWidth:150},onChange:function(e){E((0,b.HL)(e)),E((0,b.mf)()),t.setFieldsValue({delivery:null,delivery_date:null,delivery_time:null})},allowClear:!1,value:null===U||void 0===U?void 0:U.shop,disabled:I}),(0,D.jsx)(g.h,{placeholder:n("select.category"),fetchOptions:function(e){return R.apply(this,arguments)},style:{minWidth:150},onChange:function(e){return x(e)},value:h}),(0,D.jsx)(g.h,{placeholder:n("select.brand"),fetchOptions:function(e){return Y.apply(this,arguments)},style:{minWidth:150},onChange:function(e){return u(e)},value:a})]}),children:[(0,D.jsx)("div",{className:"d-flex justify-content-end mb-4",children:(0,D.jsx)(xe.Z,{placeholder:n("search"),handleChange:M,defaultValue:null===k||void 0===k?void 0:k.search})}),(0,D.jsxs)("div",{className:"products-row order-items",children:[B.length?B.map((function(e){var t,r,i,o;return(0,D.jsxs)(m.Z,{className:"products-col",cover:(0,D.jsx)("img",{alt:null===(t=e.product)||void 0===t||null===(r=t.translation)||void 0===r?void 0:r.title,src:(0,K.Z)(null===e||void 0===e?void 0:e.img)}),onClick:function(){return function(e){U.currency?U.address?U.deliveries?N(e):S.Am.warning(n("please.select.delivery")):S.Am.warning(n("please.select.address")):S.Am.warning(n("please.select.currency"))}(e)},children:[(0,D.jsx)(W.Z,{title:null===e||void 0===e||null===(i=e.product)||void 0===i||null===(o=i.translation)||void 0===o?void 0:o.title}),(0,D.jsx)("div",{className:"preview",children:(0,D.jsx)($.Z,{})}),e.stocks.map((function(e){var t,n;return(0,D.jsxs)("span",{className:e.bonus?"show-bonus":"d-none",children:[(0,D.jsx)(ye.ojn,{})," ",null===(t=e.bonus)||void 0===t?void 0:t.value,"+",null===(n=e.bonus)||void 0===n?void 0:n.bonus_quantity]})}))]},e.id)})):(0,D.jsx)(d.Z,{children:(0,D.jsx)(s.Z,{span:24,children:(0,D.jsx)(ge.Z,{id:"nosell"})})}),L&&(0,D.jsx)("div",{className:"loader",children:(0,D.jsx)(c.Z,{})})]}),P&&(0,D.jsx)(ce,{extrasModal:P,setExtrasModal:N}),(0,D.jsx)(he,{form:t})]})},be=n(16233),_e=n(22054),we=n(1003);function ke(){var e,t=(0,_.$)().t,n=l.Z.useForm(),v=(0,i.Z)(n,1)[0],p=(0,Z.I0)(),f=(0,O.UO)().id,m=(0,O.s0)(),y=(0,o.useState)(!1),h=(0,i.Z)(y,2),x=h[0],j=h[1],g=(0,o.useState)(null),w=(0,i.Z)(g,2),S=w[0],M=w[1],q=(0,o.useState)(!1),C=(0,i.Z)(q,2),P=C[0],N=C[1],I=(0,Z.v9)((function(e){return e.order}),Z.wU),E=I.data,U=I.total,B=I.coupon,L=I.orderProducts,R=I.orderItems,H=(0,Z.v9)((function(e){return e.currency}),Z.wU).currencies,F=(0,Z.v9)((function(e){return e.menu}),Z.wU).activeMenu;function V(e){return{label:e.firstname+" "+(e.lastname||""),value:e.id,uuid:e.uuid}}function G(e){var t;return e?{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id,open_time:e.open_time,close_time:e.close_time}:null}var W=function(e,t){var n={payment_sys_id:t.value};j(!0),ee.Z.update(f,e).then((function(e){!function(e,t){we.Z.create(e,t).then((function(e){M(e.data.id),p((0,b.bn)())})).finally((function(){return j(!1)}))}(e.data.id,n)})).catch((function(){return j(!1)}))};return(0,o.useEffect)((function(){F.refetch&&(N(!0),ee.Z.getById(f).then((function(e){var t,n,i,o,l=e.data;p((0,b.oM)({calculate:!0}));var a=l.details.map((function(e){var t;return(0,r.Z)((0,r.Z)({},e.stock.product),{},{stocks:e.stock.extras,stock:e.stock,stockID:e.stock,quantity:e.quantity,img:null===(t=e.stock.product)||void 0===t?void 0:t.img,price:e.stock.price,bonus:e.bonus,addons:e.addons})})),u={product_tax:null===l||void 0===l||null===(t=l.details)||void 0===t||null===(n=t.flatMap((function(e){return e.total_price})))||void 0===n?void 0:n.reduce((function(e,t){return e+t}),0),shop_tax:l.tax,order_total:l.total_price};p((0,b.r3)(a)),p((0,b.B4)(a)),p((0,b.rU)(u)),p((0,b.dY)(l.currency)),p((0,k.nc)({activeMenu:F,data:(0,r.Z)((0,r.Z)({},F.data),{},{addressData:{address:l.address.address,lat:l.location.latitude,lng:l.location.longitude}})})),p((0,b.oM)({userUuid:l.user.uuid,shop:G(l.shop),delivery_type:l.delivery_type,delivery_fee:l.delivery_fee,delivery_date:JSON.stringify(l.delivery_date),delivery_time:l.delivery_time,address:{address:l.address.address,lat:l.location.latitude,lng:l.location.longitude},currency:{id:l.currency.payment_system},payment_type:l.transaction,deliveries:{label:l.delivery_type},status:l.status})),v.setFieldsValue({delivery_time:Y()(null===l||void 0===l?void 0:l.delivery_time,"HH:mm:ss"),delivery_date:Y()(l.delivery_date,"YYYY-MM-DD"),user:V(l.user),currency_id:l.currency.id,payment_type:{label:(null===(i=l.transaction)||void 0===i?void 0:i.payment_system.tag)||"cash",value:(null===(o=l.transaction)||void 0===o?void 0:o.payment_system.id)||1},note:l.note,delivery:{label:l.delivery_type,value:l.shop.price}})})).finally((function(){N(!1),p((0,k.A_)(F))})))}),[F.refetch]),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(a.Z,{title:t("edit.order"),extra:(0,D.jsx)(u.Z,{type:"primary",loading:x,onClick:function(){return v.submit()},disabled:!(null!==L&&void 0!==L&&L.length),children:t("save")})}),(0,D.jsxs)(l.Z,{name:"order-form",form:v,layout:"vertical",onFinish:function(e){var t,n,r,i,o,l=function(e){var t=null===e||void 0===e?void 0:e.map((function(e){var t,n;return{quantity:e.quantity,stock_id:e.stockID?null===(t=e.stockID)||void 0===t?void 0:t.id:null===(n=e.stock)||void 0===n?void 0:n.id}})),n=null===e||void 0===e?void 0:e.flatMap((function(e){var t;return null===(t=e.addons)||void 0===t?void 0:t.map((function(t,n){var r,i;return{quantity:t.quantity,stock_id:t.stock_id,parent_id:e.stockID?null===(r=e.stockID)||void 0===r?void 0:r.id:null===(i=e.stock)||void 0===i?void 0:i.id}}))}));return t.concat(n)}(R),a={currency_id:e.currency_id,rate:null===(t=H.find((function(t){return t.id===e.currency_id})))||void 0===t?void 0:t.rate,shop_id:E.shop.value,delivery_id:e.delivery.label,delivery_fee:E.delivery_fee,coupon:B.coupon,tax:U.order_tax,payment_type:null===(n=e.payment_type)||void 0===n?void 0:n.label,note:e.note,delivery_date:Y()(e.delivery_date).format("YYYY-MM-DD"),address:{address:null===(r=F.data.addressData)||void 0===r?void 0:r.address,office:null,house:null,floor:null},location:{latitude:null===(i=F.data.addressData)||void 0===i?void 0:i.lat,longitude:null===(o=F.data.addressData)||void 0===o?void 0:o.lng},delivery_time:Y()(E.delivery_time,"HH:mm").format("HH:mm"),delivery_type:E.delivery_type,products:l,status:null===E||void 0===E?void 0:E.status};W(a,e.payment_type)},className:"order-add",initialValues:{user:E.user||void 0,address:E.address||null,currency_id:null===E||void 0===E||null===(e=E.currency)||void 0===e?void 0:e.id,payment_type:E.payment_type||null},children:[(0,D.jsxs)(d.Z,{gutter:24,hidden:P,children:[(0,D.jsx)(s.Z,{span:16,children:(0,D.jsx)(Ze,{form:v})}),(0,D.jsxs)(s.Z,{span:8,children:[(0,D.jsx)(A,{form:v}),(0,D.jsx)(T,{form:v})]})]}),P&&(0,D.jsx)("div",{className:"loader",children:(0,D.jsx)(c.Z,{})})]}),S?(0,D.jsx)(be.Z,{orderId:S,handleClose:function(){M(null);var e="orders-board";p((0,k.ph)((0,r.Z)((0,r.Z)({},F),{},{nextUrl:e}))),m("/".concat(e)),p((0,_e.AU)())}}):""]})}},47168:function(e,t,n){e.exports=n(34317)},91318:function(e,t,n){function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var a=o?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(i,l,a):i[l]=e[l]}i.default=e,n&&n.set(e,i);return i}(n(47313)),o=a(n(75192)),l=a(n(93754));function a(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function c(e){var t=e.onPlaceSelected,n=e.apiKey,r=e.libraries,o=e.inputAutocompleteValue,a=e.options,u=e.googleMapsScriptBaseUrl,c=e.refProp,v=e.language,p=s(e,["onPlaceSelected","apiKey","libraries","inputAutocompleteValue","options","googleMapsScriptBaseUrl","refProp","language"]),f=(0,l.default)({ref:c,googleMapsScriptBaseUrl:u,onPlaceSelected:t,apiKey:n,libraries:r,inputAutocompleteValue:o,options:a,language:v}).ref;return i.default.createElement("input",d({ref:f},p))}c.propTypes={apiKey:o.default.string,libraries:o.default.arrayOf(o.default.string),ref:o.default.oneOfType([o.default.func,o.default.shape({current:o.default.any})]),googleMapsScriptBaseUrl:o.default.string,onPlaceSelected:o.default.func,inputAutocompleteValue:o.default.string,options:o.default.shape({componentRestrictions:o.default.object,bounds:o.default.object,location:o.default.object,offset:o.default.number,origin:o.default.object,radius:o.default.number,sessionToken:o.default.object,types:o.default.arrayOf(o.default.string)}),language:o.default.string};var v=(0,i.forwardRef)((function(e,t){return i.default.createElement(c,d({},e,{refProp:t}))}));t.default=v},56236:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GOOGLE_MAP_SCRIPT_BASE_URL=void 0;t.GOOGLE_MAP_SCRIPT_BASE_URL="https://maps.googleapis.com/maps/api/js"},34317:function(e,t,n){Object.defineProperty(t,"usePlacesWidget",{enumerable:!0,get:function(){return i.default}});var r=o(n(91318)),i=o(n(93754));function o(e){return e&&e.__esModule?e:{default:e}}},93754:function(e,t,n){function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.ref,n=e.onPlaceSelected,r=e.apiKey,a=e.libraries,u=void 0===a?"places":a,s=e.inputAutocompleteValue,c=void 0===s?"new-password":s,v=e.options,p=(v=void 0===v?{}:v).types,f=void 0===p?["(cities)"]:p,m=v.componentRestrictions,y=v.fields,h=void 0===y?["address_components","geometry.location","place_id","formatted_address"]:y,x=v.bounds,j=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(v,["types","componentRestrictions","fields","bounds"]),g=e.googleMapsScriptBaseUrl,Z=void 0===g?l.GOOGLE_MAP_SCRIPT_BASE_URL:g,b=e.language,_=(0,i.useRef)(null),w=(0,i.useRef)(null),k=(0,i.useRef)(null),O=(0,i.useRef)(null),S=b?"&language=".concat(b):"",M="".concat(Z,"?libraries=").concat(u,"&key=").concat(r).concat(S),q=(0,i.useCallback)((function(){return(0,o.loadGoogleMapScript)(Z,M)}),[Z,M]);return(0,i.useEffect)((function(){var e=d(d({},j),{},{fields:h,types:f,bounds:x});if(m&&(e.componentRestrictions=m),!k.current&&_.current&&o.isBrowser){t&&!t.current&&(t.current=_.current);var i=function(){var t;return"undefined"===typeof google?console.error("Google has not been found. Make sure your provide apiKey prop."):null!==(t=google.maps)&&void 0!==t&&t.places?!_.current instanceof HTMLInputElement?console.error("Input ref must be HTMLInputElement."):(k.current=new google.maps.places.Autocomplete(_.current,e),void(k.current&&(w.current=k.current.addListener("place_changed",(function(){n&&k&&k.current&&n(k.current.getPlace(),_.current,k.current)}))))):console.error("Google maps places API must be loaded.")};return r?q().then((function(){return i()})):i(),function(){return w.current?w.current.remove():void 0}}}),[]),(0,i.useEffect)((function(){var e;(null===i.default||void 0===i.default||null===(e=i.default.version)||void 0===e||!e.startsWith("18"))&&o.isBrowser&&window.MutationObserver&&_.current&&_.current instanceof HTMLInputElement&&(O.current=new MutationObserver((function(){O.current.disconnect(),_.current&&(_.current.autocomplete=c)})),O.current.observe(_.current,{attributes:!0,attributeFilter:["autocomplete"]}))}),[c]),(0,i.useEffect)((function(){k.current&&k.current.setFields(h)}),[h]),(0,i.useEffect)((function(){k.current&&k.current.setBounds(x)}),[x]),(0,i.useEffect)((function(){k.current&&k.current.setComponentRestrictions(m)}),[m]),(0,i.useEffect)((function(){k.current&&k.current.setOptions(j)}),[j]),{ref:_,autocompleteRef:k}};var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(i,l,u):i[l]=e[l]}i.default=e,n&&n.set(e,i);return i}(n(47313)),o=n(39003),l=n(56236);function a(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},39003:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.loadGoogleMapScript=t.isBrowser=void 0;var n="undefined"!==typeof window&&window.document;t.isBrowser=n;t.loadGoogleMapScript=function(e,t){if(!n)return Promise.resolve();if("undefined"!==typeof google&&google.maps&&google.maps.api)return Promise.resolve();var r=document.querySelectorAll('script[src*="'.concat(e,'"]'));if(r&&r.length)return new Promise((function(e){if("undefined"!==typeof google)return e();r[0].addEventListener("load",(function(){return e()}))}));var i=new URL(t);i.searchParams.set("callback","__REACT_GOOGLE_AUTOCOMPLETE_CALLBACK__");var o=document.createElement("script");return o.src=i.toString(),new Promise((function(e){window.__REACT_GOOGLE_AUTOCOMPLETE_CALLBACK__=e,document.body.appendChild(o)}))}}}]);