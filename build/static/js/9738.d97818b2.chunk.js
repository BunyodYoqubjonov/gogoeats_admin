"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9738],{89802:function(e,n,t){t.d(n,{q:function(){return c}});var u=t(1413),i=t(29439),a=t(45987),s=t(47313),r=t(74294),l=t(72652),o=t(46417),d=["fetchOptions","refetch"],c=function(e){var n=e.fetchOptions,t=e.refetch,c=void 0!==t&&t,f=(0,a.Z)(e,d),v=(0,s.useState)(!1),b=(0,i.Z)(v,2),m=b[0],p=b[1],x=(0,s.useState)([]),h=(0,i.Z)(x,2),Z=h[0],j=h[1];return(0,o.jsx)(r.Z,(0,u.Z)((0,u.Z)({labelInValue:!0,filterOption:!1,notFoundContent:m?(0,o.jsx)(l.Z,{size:"small"}):"no results"},f),{},{options:m?[]:Z,onFocus:function(){Z.length&&!c||(p(!0),n().then((function(e){j(e),p(!1)})))}}))}},79738:function(e,n,t){t.r(n);var u=t(1413),i=t(29439),a=t(47313),s=t(97890),r=t(23560),l=t(10976),o=t(77181),d=t(2717),c=t(90954),f=t(24511),v=t(70816),b=t.n(v),m=t(96708),p=t(73346),x=t(51282),h=t(77397),Z=t(46417);n.default=function(){var e=(0,f.$)().t,n=(0,d.v9)((function(e){return e.menu}),d.wU).activeMenu,t=(0,d.I0)(),v=l.Z.useForm(),j=(0,i.Z)(v,1)[0],_=(0,s.s0)(),y=(0,a.useState)(!1),q=(0,i.Z)(y,2),g=q[0],k=q[1],S=(0,s.UO)().id;(0,a.useEffect)((function(){return function(){var e=j.getFieldsValue(!0),i=(0,u.Z)((0,u.Z)({},e),{},{expired_at:JSON.stringify(null===e||void 0===e?void 0:e.expired_at)});t((0,c.nc)({activeMenu:n,data:i}))}}),[]);var N=function(e){k(!0),p.Z.getById(e).then((function(e){!function(e){var i,a,s,r,l,o,d=(0,u.Z)((0,u.Z)({},e),{},{expired_at:b()(e.expired_at,"YYYY-MM-DD"),bonusable_id:{label:(null===e||void 0===e||null===(i=e.bonusable)||void 0===i?void 0:i.product.translation.title)+" "+(null===(a=e.bonusable)||void 0===a?void 0:a.extras.map((function(e){return e.value})).join(", ")),value:null===(s=e.bonusable)||void 0===s?void 0:s.id},bonus_stock_id:{label:(null===e||void 0===e||null===(r=e.bonusStock)||void 0===r?void 0:r.product.translation.title)+" "+(null===(l=e.bonusStock)||void 0===l?void 0:l.extras.map((function(e){return e.value})).join(", ")),value:null===e||void 0===e||null===(o=e.bonusStock)||void 0===o?void 0:o.id}});j.setFieldsValue((0,u.Z)({},d)),t((0,c.nc)({activeMenu:n,data:(0,u.Z)((0,u.Z)({},d),{},{expired_at:JSON.stringify(d.expired_at)})})),k(!1)}(e.data)})).finally((function(){k(!1),t((0,c.A_)(n))}))};(0,a.useEffect)((function(){n.refetch&&N(S)}),[n.refetch]);return(0,Z.jsx)(o.Z,{title:e("edit.bonus"),className:"h-100",children:g?(0,Z.jsx)(x.Z,{}):(0,Z.jsx)(h.Z,{form:j,handleSubmit:function(i){var a={expired_at:b()(i.expired_at).format("YYYY-MM-DD"),status:i.status,type:"count",bonusable_id:i.bonusable_id.value,value:i.value,bonus_stock_id:i.bonus_stock_id.value,bonus_quantity:i.bonus_quantity},s="seller/bonus/product";p.Z.update(S,a).then((function(){r.Am.success(e("successfully.updated")),(0,d.dC)((function(){t((0,c.ph)((0,u.Z)((0,u.Z)({},n),{},{nextUrl:s}))),t((0,m.k)({}))})),_("/".concat(s))}))}})})}},77397:function(e,n,t){t.d(n,{Z:function(){return j}});var u=t(1413),i=t(29439),a=t(47313),s=t(10976),r=t(68197),l=t(59624),o=t(16124),d=t(99096),c=t(86345),f=t(59491),v=t(89802),b=t(70816),m=t.n(b),p=t(24511),x=t(2717),h=t(18333),Z=t(46417);function j(e){var n=e.form,t=e.handleSubmit,b=(0,p.$)().t,j=(0,x.v9)((function(e){return e.menu}),x.wU).activeMenu,_=(0,a.useState)(!1),y=(0,i.Z)(_,2),q=y[0],g=y[1];function k(){return h.Z.getStock().then((function(e){return e.data.map((function(e){return{label:e.product.translation.title+"".concat(e.extras.length>0?": ".concat(e.extras.map((function(e){return e.value})).join(", ")):""),value:e.id,key:e.id}}))}))}return(0,Z.jsxs)(s.Z,{name:"product-bonus-form",layout:"vertical",onFinish:function(e){g(!0),t(e).finally((function(){return g(!1)}))},form:n,initialValues:(0,u.Z)((0,u.Z)({status:!0},j.data),function(){var e,n;if(null===(e=j.data)||void 0===e||!e.expired_at)return{};var t=JSON.parse(null===(n=j.data)||void 0===n?void 0:n.expired_at);return{expired_at:m()(t,"HH:mm:ss")}}()),className:"d-flex flex-column h-100",children:[(0,Z.jsxs)(r.Z,{gutter:12,children:[(0,Z.jsx)(l.Z,{span:12,children:(0,Z.jsx)(s.Z.Item,{label:b("products.stock"),name:"bonusable_id",rules:[{required:!0,message:b("required")}],children:(0,Z.jsx)(v.q,{fetchOptions:k,debounceTimeout:200})})}),(0,Z.jsx)(l.Z,{span:12,children:(0,Z.jsx)(s.Z.Item,{label:b("product.quantity"),name:"value",rules:[{required:!0,message:b("required")}],children:(0,Z.jsx)(o.Z,{className:"w-100"})})}),(0,Z.jsx)(l.Z,{span:12,children:(0,Z.jsx)(s.Z.Item,{label:b("bonus.product.stock"),name:"bonus_stock_id",rules:[{required:!0,message:b("required")}],children:(0,Z.jsx)(v.q,{fetchOptions:k,debounceTimeout:200})})}),(0,Z.jsx)(l.Z,{span:12,children:(0,Z.jsx)(s.Z.Item,{label:b("bonus.product.quantity"),name:"bonus_quantity",rules:[{required:!0,message:b("required")}],children:(0,Z.jsx)(o.Z,{className:"w-100"})})}),(0,Z.jsx)(l.Z,{span:12,children:(0,Z.jsx)(s.Z.Item,{name:"expired_at",label:b("expired.at"),rules:[{required:!0,message:b("required")}],children:(0,Z.jsx)(d.Z,{className:"w-100",placeholder:"",disabledDate:function(e){return m()().add(-1,"days")>=e}})})}),(0,Z.jsx)(l.Z,{span:8,children:(0,Z.jsx)(s.Z.Item,{label:b("active"),name:"status",valuePropName:"checked",children:(0,Z.jsx)(c.Z,{})})})]}),(0,Z.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,Z.jsx)("div",{className:"pb-5",children:(0,Z.jsx)(f.Z,{type:"primary",htmlType:"submit",loading:q,children:b("submit")})})})]})}}}]);