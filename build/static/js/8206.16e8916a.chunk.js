"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8206],{49655:function(e,n,t){t.d(n,{_:function(){return x}});var i=t(1413),l=t(93433),r=t(15861),a=t(29439),o=t(45987),s=t(87757),u=t.n(s),d=t(47313),c=t(12279),v=t.n(c),p=t(74294),h=t(72652),f=t(46417),m=["fetchOptions","debounceTimeout","hasMore"],x=function(e){var n=e.fetchOptions,t=e.debounceTimeout,s=void 0===t?400:t,c=e.hasMore,x=(0,o.Z)(e,m),Z=(0,d.useState)(!1),y=(0,a.Z)(Z,2),j=y[0],g=y[1],_=(0,d.useState)([]),b=(0,a.Z)(_,2),k=b[0],N=b[1],w=(0,d.useState)(!1),q=(0,a.Z)(w,2),C=q[0],S=q[1],I=(0,d.useState)(null),D=(0,a.Z)(I,2),P=D[0],T=D[1],A=(0,d.useState)(1),B=(0,a.Z)(A,2),E=B[0],M=B[1],U=(0,d.useMemo)((function(){return v()((function(e){N([]),T(e),g(!0),n({search:e}).then((function(e){N(e),M(2),g(!1)})).finally((function(){return S(!1)}))}),s)}),[n,s,E]),F=function(){var e=(0,r.Z)(u().mark((function e(t){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.target,C||i.scrollTop+i.offsetHeight!==i.scrollHeight||c&&(S(!0),i.scrollTo(0,i.scrollHeight),n({search:P,page:E}).then((function(e){M((function(e){return e+1})),N([].concat((0,l.Z)(k),(0,l.Z)(e)))})).finally((function(){return S(!1)})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,f.jsxs)(p.Z,(0,i.Z)((0,i.Z)({showSearch:!0,allowClear:!0,onPopupScroll:F,labelInValue:!0,filterOption:!1,onSearch:U,notFoundContent:j?(0,f.jsx)(h.Z,{size:"small"}):"no results",onFocus:function(){k.length||U("")}},x),{},{children:[k.map((function(e,n){return(0,f.jsx)(p.Z.Option,{value:e.value,children:e.label},n)})),C&&(0,f.jsx)(p.Z.Option,{children:(0,f.jsx)(h.Z,{size:"small"})})]}))}},19107:function(e,n,t){t.d(n,{Z:function(){return u}});var i=t(15861),l=t(87757),r=t.n(l),a=t(31881),o=t.n(a),s=t(97421);function u(e){return d.apply(this,arguments)}function d(){return d=(0,i.Z)(r().mark((function e(n){var t,i,l=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:s.kr,i={address:n,key:t},e.abrupt("return",o().get("https://maps.googleapis.com/maps/api/geocode/json",{params:i}).then((function(e){return e.data.results[0]})).catch((function(e){return"not found"})));case 3:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}},71136:function(e,n,t){t.d(n,{Z:function(){return r}});var i=t(29439),l=t(47313);function r(e,n){var t=(0,l.useState)(e),r=(0,i.Z)(t,2),a=r[0],o=r[1];return(0,l.useEffect)((function(){var t=setTimeout((function(){o(e)}),n);return function(){clearTimeout(t)}}),[e,n]),a}},63226:function(e,n,t){function i(e){return e.cartItems.filter((function(n){return n.bag_id===e.currentBag}))}function l(e){return e.data.find((function(n){return n.bag_id===e.currentBag}))}t.d(n,{TW:function(){return l},fq:function(){return i}})},49616:function(e,n,t){t.r(n),t.d(n,{default:function(){return Te}});var i=t(47313),l=t(15861),r=t(29439),a=t(87757),o=t.n(a),s=t(77181),u=t(68197),d=t(59624),c=t(49067),v=t(11216),p=t(30763),h=t(80314),f=t(2717),m=t(95882),x=t(41481),Z=t(24511),y=t(59681),j=t(42111),g=t(90954),_=t(63226),b=t(20637),k=t(49655),N=t(46417),w=function(){var e=(0,Z.$)().t,n=(0,f.I0)(),t=(0,i.useState)(null),a=(0,r.Z)(t,2),w=a[0],q=a[1],C=(0,i.useState)(null),S=(0,r.Z)(C,2),I=S[0],D=S[1],P=(0,i.useState)(null),T=(0,r.Z)(P,2),A=T[0],B=T[1],E=(0,f.v9)((function(e){return e.menu}),f.wU).activeMenu,M=(0,f.v9)((function(e){return e.allShops}),f.wU).allShops,U=(0,f.v9)((function(e){return e.cart}),f.wU).currentBag,F=function(e){var n;return{label:null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,value:null===e||void 0===e?void 0:e.id}}(M[0]),V=(0,f.v9)((function(e){return(0,_.TW)(e.cart)})),H=(0,i.useState)(null),O=(0,r.Z)(H,2),z=O[0],Y=O[1];function W(){return W=(0,l.Z)(o().mark((function e(n){var t,i,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.search,i=n.page,l={search:t,page:i,status:"approved"},e.abrupt("return",c.Z.search(l).then((function(e){return Y(e.links),e.data.map((function(e){return{label:null!==e.translation?e.translation.title:"no name",value:e.id}}))})));case 3:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function $(){return $=(0,l.Z)(o().mark((function e(n){var t,i,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.search,i=n.page,l={search:t,page:void 0===i?1:i},e.abrupt("return",v.Z.search(l).then((function(e){return Y(e.links),e.data.map((function(e){return{label:e.title,value:e.id}}))})));case 3:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}function L(){return L=(0,l.Z)(o().mark((function e(n){var t,i,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.search,i=n.page,l={search:t,page:i,type:"main"},e.abrupt("return",p.Z.search(l).then((function(e){return Y(e.links),e.data.map((function(e){return{label:null!==e.translation?e.translation.title:"no name",value:e.id}}))})));case 3:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function J(){return(J=(0,l.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null===V||void 0===V?void 0:V.shop.value,e.abrupt("return",b.Z.getById(t).then((function(e){n((0,y.Ng)({bag_id:U,payment_type:e.data.map((function(e){return e.payment}))}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,h.Z)((function(){var e,t,i={brand_id:null===w||void 0===w?void 0:w.value,category_id:null===I||void 0===I?void 0:I.value,search:A,shop_id:null===V||void 0===V||null===(e=V.shop)||void 0===e?void 0:e.value,status:"published"};n((0,m.q1)(i)),null!==V&&void 0!==V&&null!==(t=V.shop)&&void 0!==t&&t.value&&function(){J.apply(this,arguments)}()}),[w,I,A,V.shop]);return(0,i.useEffect)((function(){var e={shop_id:null===F||void 0===F?void 0:F.value};E.refetch&&(n((0,j.dA)(e)),n((0,y.Ng)({bag_id:U,shop:F})),n((0,g.A_)(E)))}),[E.refetch]),(0,N.jsx)(s.Z,{children:(0,N.jsxs)(u.Z,{gutter:12,children:[(0,N.jsx)(d.Z,{span:6,children:(0,N.jsx)(x.Z,{className:"w-100",placeholder:e("search"),handleChange:B})}),(0,N.jsx)(d.Z,{span:6,children:(0,N.jsx)(k._,{className:"w-100",hasMore:null===z||void 0===z?void 0:z.next,debounceTimeout:500,placeholder:e("select.shop"),fetchOptions:function(e){return W.apply(this,arguments)},allowClear:!1,onChange:function(e){n((0,y.Ng)({bag_id:U,shop:e})),n((0,y.LL)())},value:null===V||void 0===V?void 0:V.shop})}),(0,N.jsx)(d.Z,{span:6,children:(0,N.jsx)(k._,{className:"w-100",hasMore:null===z||void 0===z?void 0:z.next,placeholder:e("select.category"),fetchOptions:function(e){return L.apply(this,arguments)},onChange:function(e){return D(e)},value:I})}),(0,N.jsx)(d.Z,{span:6,children:(0,N.jsx)(k._,{hasMore:null===z||void 0===z?void 0:z.next,className:"w-100",placeholder:e("select.brand"),fetchOptions:function(e){return $.apply(this,arguments)},onChange:function(e){return q(e)},value:w})})]})})},q=t(15508),C=t(1413),S=t(72652),I=t(18074),D=t(66909),P=t(82138),T=t(45464),A=t(23560),B=t(93433),E=t(9274),M=t(59491),U=t(26824),F=t(83371),V=t(45705),H=t(55768),O=t(8846),z=t(84017),Y=t(91220),W=t(28939),$=t(77370),L=t(32697),J=function(e){var n,t,i=e.showExtras,l=e.addonCalculate,r=e.selectedValues,a=e.handleChange;return(0,N.jsx)(V.Z,{direction:"vertical",size:"middle",children:null===(n=i.stock)||void 0===n||null===(t=n.addons)||void 0===t?void 0:t.filter((function(e){return!!e.product})).map((function(e){var n=r.includes(String(e.addon_id));return(0,N.jsxs)("div",{children:[(0,N.jsx)(L.Z,{id:String(e.id),name:String(e.id),checked:n,onChange:function(){return a(e)}}),(0,N.jsxs)("label",{htmlFor:String(e.id),children:[n&&(0,N.jsxs)(V.Z,{size:0,children:[(0,N.jsx)(M.Z,{type:"text",className:"minus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,N.jsx)(O.Z,{}),disabled:1===e.product.quantity,onClick:function(n){n.stopPropagation(),l(e.addon_id,e.product.quantity-1)}}),(0,N.jsx)("span",{className:"ml-2",children:e.product.quantity||e.product.min_qty}),(0,N.jsx)(M.Z,{type:"text",className:"plus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,N.jsx)(P.Z,{}),onClick:function(n){n.stopPropagation(),l(e.addon_id,e.product.quantity?e.product.quantity+1:e.product.min_qty+1)}})]}),(0,N.jsx)("span",{className:"ml-2",children:e.product.translation.title})]})]},e.id)}))})},K=t(17101);function X(e){var n,t,l,a,o=e.extrasModal,s=e.setExtrasModal,c=(0,i.useState)(!1),v=(0,r.Z)(c,2),p=v[0],m=v[1],x=(0,i.useState)({}),j=(0,r.Z)(x,2),g=j[0],_=j[1],b=(0,Z.$)().t,k=(0,i.useState)({}),w=(0,r.Z)(k,2),q=w[0],I=w[1],D=(0,f.I0)(),L=(0,i.useState)([]),X=(0,r.Z)(L,2),Q=X[0],R=X[1],G=(0,i.useState)([]),ee=(0,r.Z)(G,2),ne=ee[0],te=ee[1],ie=(0,i.useState)([]),le=(0,r.Z)(ie,2),re=le[0],ae=le[1],oe=(0,i.useState)([]),se=(0,r.Z)(oe,2),ue=se[0],de=se[1],ce=(0,i.useState)([]),ve=(0,r.Z)(ce,2),pe=ve[0],he=ve[1],fe=(0,i.useState)({extras:[],stock:{id:0,quantity:1,price:0}}),me=(0,r.Z)(fe,2),xe=me[0],Ze=me[1],ye=(0,i.useState)(o.quantity||g.quantity||g.min_qty),je=(0,r.Z)(ye,2),ge=je[0],_e=je[1],be=(0,f.v9)((function(e){return e.cart}),f.wU),ke=be.currentBag,Ne=be.currency;var we=function(){return s(!1)};function qe(e){return(null===ue||void 0===ue?void 0:ue.reduce((function(e,n){return e+n.product.stock.price*(n.product.quantity||n.product.min_qty)}),0))+(null===xe||void 0===xe?void 0:xe.stock)?null===xe||void 0===xe?void 0:xe.stock[e||"price"]:0*ge}return(0,h.Z)((function(){var e=xe.stock.addons.filter((function(e){return pe.includes(String(e.addon_id))}));de(e)}),[pe]),(0,i.useEffect)((function(){null!==xe&&void 0!==xe&&xe.stock&&I((0,C.Z)((0,C.Z)({},xe.stock),{},{extras:re}))}),[xe]),(0,i.useEffect)((function(){m(!0),K.Z.getById(o.uuid).then((function(e){var n,t=e.data;_(t);var i,l=(0,$.o)(t,null===o||void 0===o?void 0:o.addons);(R(l.extras),_e(o.quantity||t.quantity||t.min_qty),te(l.stock),Ze((0,$.y)(re,l.extras,l.stock)),null===(n=(0,$.y)("",l.extras,l.stock).extras)||void 0===n||n.forEach((function(e){ae((function(n){return[].concat((0,B.Z)(n),[e[0]])}))})),null!==o&&void 0!==o&&o.addons)&&he((null===o||void 0===o||null===(i=o.addons)||void 0===i?void 0:i.map((function(e){var n;return String((null===e||void 0===e||null===(n=e.countable)||void 0===n?void 0:n.id)||e.countable_id)})))||[])})).finally((function(){return m(!1)}))}),[o.uuid]),(0,N.jsx)(E.Z,{visible:!!g,title:g.name,onCancel:we,footer:[p?null:(0,N.jsx)(M.Z,{icon:(0,N.jsx)(H.Z,{}),type:"primary",onClick:function(){var e=ue.map((function(e){return(0,C.Z)((0,C.Z)({},e),{},{stockID:e.product.stock.id,quantity:e.product.quantity||e.product.min_qty})})),n=(0,C.Z)((0,C.Z)({},g),{},{stock:q,quantity:ge,id:q.id,img:(0,W.Z)(q)||g.img,bag_id:ke,stockID:q,addons:e});n.quantity>q.quantity?A.Am.warning("".concat(b("you.cannot.order.more.than")," ").concat(q.quantity)):(D((0,y.Xq)(n)),s(null))},children:b("add")},"add-product"),(0,N.jsx)(M.Z,{type:"default",onClick:we,children:b("cancel")},"cancel-product")],children:(0,N.jsxs)(S.Z,{spinning:p,children:[(0,N.jsxs)(u.Z,{gutter:24,children:[(0,N.jsx)(d.Z,{span:8,children:(0,N.jsx)(U.Z,{src:(0,T.Z)((0,W.Z)(q)||g.img),alt:g.name,height:200,style:{objectFit:"contain"}})}),(0,N.jsx)(d.Z,{span:16,children:(0,N.jsxs)(F.Z,{title:null===(n=g.translation)||void 0===n?void 0:n.title,children:[(0,N.jsxs)(F.Z.Item,{label:b("price"),span:3,children:[(0,N.jsx)("div",{className:null!==q&&void 0!==q&&q.discount?"strike":"",children:(0,z.Z)(qe(),null===Ne||void 0===Ne?void 0:Ne.symbol)}),null!==q&&void 0!==q&&q.discount?(0,N.jsx)("div",{className:"ml-2 font-weight-bold",children:(0,z.Z)(qe("total_price"),null===Ne||void 0===Ne?void 0:Ne.symbol)}):""]}),(0,N.jsx)(F.Z.Item,{label:b("in.stock"),span:3,children:(0,Y.Z)(null===q||void 0===q?void 0:q.quantity,g.unit)}),(0,N.jsx)(F.Z.Item,{label:b("tax"),span:3,children:(0,z.Z)(null===q||void 0===q?void 0:q.tax,null===Ne||void 0===Ne?void 0:Ne.symbol)})]})})]}),null===xe||void 0===xe||null===(t=xe.extras)||void 0===t?void 0:t.map((function(e,n){return(0,N.jsx)("div",{className:"extra-group",children:(0,N.jsx)(V.Z,{className:"extras-select",children:e.map((function(e){return(0,N.jsx)("span",{className:"extras-text rounded ".concat(re.find((function(n){return n.id===e.id}))?"selected":""),onClick:function(){return function(e){var n,t=re.findIndex((function(n){return n.extra_group_id===e.extra_group_id})),i=re;t>-1&&(i=i.slice(0,t)),i.push(e);var l=i.map((function(e){return e.id})).join(","),r=(0,$.y)(l,Q,ne);Ze(r),null===(n=r.extras)||void 0===n||n.forEach((function(n){var t=re.findIndex((function(t){return n[0].extra_group_id!=e.extra_group_id?t.extra_group_id===n[0].extra_group_id:t.extra_group_id===e.extra_group_id}));if(n[0].level>=e.level){var l=n[0].extra_group_id!=e.extra_group_id?n[0]:e;-1==t?i.push(l):i[t]=l}})),ae(i)}(e)},children:e.value})}))},"extra-group"+n)})})),(0,N.jsx)(J,{showExtras:xe,selectedValues:pe,handleChange:function(e){var n=String(e.addon_id);pe.includes(n)?he((function(e){return e.filter((function(e){return e!==n}))})):he((function(e){return[].concat((0,B.Z)(e),[n])}))},addonCalculate:function(e,n){Ze((function(t){return(0,C.Z)((0,C.Z)({},t),{},{stock:(0,C.Z)((0,C.Z)({},t.stock),{},{addons:t.stock.addons.map((function(t){return t.addon_id===e?(0,C.Z)((0,C.Z)({},t),{},{product:(0,C.Z)((0,C.Z)({},t.product),{},{quantity:n})}):t}))})})})),de((function(t){return t.map((function(t){return t.addon_id===e?(0,C.Z)((0,C.Z)({},t),{},{product:(0,C.Z)((0,C.Z)({},t.product),{},{quantity:n})}):t}))}))}}),(0,N.jsx)(u.Z,{gutter:12,className:"mt-3",children:(0,N.jsx)(d.Z,{span:24,children:(0,N.jsxs)(V.Z,{children:[(0,N.jsx)(M.Z,{type:"primary",icon:(0,N.jsx)(O.Z,{}),onClick:function(){1!==ge&&(ge<=g.min_qty||_e((function(e){return e-1})))}}),(ge||1)*((null===g||void 0===g?void 0:g.interval)||1),null===g||void 0===g||null===(l=g.unit)||void 0===l||null===(a=l.translation)||void 0===a?void 0:a.title,(0,N.jsx)(M.Z,{type:"primary",icon:(0,N.jsx)(P.Z,{}),onClick:function(){ge!==(null===g||void 0===g?void 0:g.quantity)&&ge!==g.max_qty&&_e((function(e){return e+1}))}})]})})})]})})}var Q=t(58821),R=t(51988);function G(){var e={lg:8,xl:6,xxl:6},n=(0,Z.$)().t,t=(0,i.useState)(null),l=(0,r.Z)(t,2),a=l[0],o=l[1],c=(0,f.I0)(),v=(0,f.v9)((function(e){return e.product}),f.wU),p=v.products,h=v.loading,x=v.meta,y=v.params,j=(0,f.v9)((function(e){return e.cart}),f.wU).data,g=(0,f.v9)((function(e){return(0,_.TW)(e.cart)})),b=(0,f.v9)((function(e){return e.cart}),f.wU).currency,k=(0,f.v9)((function(e){return e.globalSettings.settings}),f.wU).before_order_phone_required;return(0,N.jsxs)("div",{className:"px-2",children:[h?(0,N.jsx)(S.Z,{className:"d-flex justify-content-center my-5"}):(0,N.jsx)(u.Z,{gutter:12,className:"mt-4 product-card",children:0===p.length?(0,N.jsx)(d.Z,{span:24,children:(0,N.jsx)(R.Z,{id:"nosell"})}):p.map((function(t,l){var r;return(0,i.createElement)(d.Z,(0,C.Z)((0,C.Z)({},e),{},{key:l}),(0,N.jsxs)(s.Z,{className:"products-col",cover:(0,N.jsx)("img",{alt:t.name,src:(0,T.Z)(t.img)}),onClick:function(){return function(e){var t;b?0!==(null===g||void 0===g||null===(t=g.user)||void 0===t?void 0:t.length)?null!==g&&void 0!==g&&g.phone||"1"!==k?Number(null===g||void 0===g?void 0:g.phone)<0?A.Am.warning(n("invalid.phone.number")):g.address?null!==g&&void 0!==g&&g.paymentType?g.deliveries?null!==g&&void 0!==g&&g.delivery_date?null!==(null===g||void 0===g?void 0:g.delivery_time)?o(e):A.Am.warning(n("please.select.delivery.time")):A.Am.warning(n("please.select.delivery.date")):A.Am.warning(n("please.select.delivery")):A.Am.warning(n("please.select.payment.type")):A.Am.warning(n("please.select.address")):A.Am.warning(n("please.enter.phone")):A.Am.warning(n("please.select.user")):A.Am.warning(n("please.select.currency"))}(t)},children:[(0,N.jsx)(D.Z,{title:null===t||void 0===t||null===(r=t.translation)||void 0===r?void 0:r.title}),(0,N.jsx)("div",{className:"preview",children:(0,N.jsx)(P.Z,{})}),t.stocks.map((function(e){var n,t;return(0,N.jsxs)("span",{className:e.bonus?"show-bonus":"d-none",children:[(0,N.jsx)(Q.ojn,{})," ",null===(n=e.bonus)||void 0===n?void 0:n.value,"+",null===(t=e.bonus)||void 0===t?void 0:t.bonus_quantity]})}))]},t.id))}))}),a&&(0,N.jsx)(X,{extrasModal:a,setExtrasModal:o}),(0,N.jsx)("div",{className:"d-flex justify-content-end my-5",children:(0,N.jsx)(I.Z,{total:x.total,current:y.page,pageSize:12,showSizeChanger:!1,onChange:function(e){c((0,m.q1)({perPage:12,page:e,shop_id:j[0].shop.value,status:"published",active:1}))},active:1})})]})}var ee=t(10976),ne=t(16124),te=t(66672),ie=t(74294),le=t(66461),re=t(11829),ae=t(40200),oe=t(49986),se=t(16031);function ue(e){var n=e.visible,t=e.handleCancel,l=(0,Z.$)().t,a=ee.Z.useForm(),o=(0,r.Z)(a,1)[0],s=(0,i.useState)(!1),c=(0,r.Z)(s,2),v=c[0],p=c[1],h=(0,i.useState)(null),f=(0,r.Z)(h,2),m=f[0],x=f[1];return(0,N.jsx)(E.Z,{title:l("add.client"),visible:n,onCancel:t,footer:[(0,N.jsx)(M.Z,{type:"primary",onClick:function(){return o.submit()},loading:v,children:l("save")},"ok-button"),(0,N.jsx)(M.Z,{onClick:t,children:l("cancel")},"cancel-button")],children:(0,N.jsx)(ee.Z,{layout:"vertical",name:"user-add-form",form:o,onFinish:function(e){var n=(0,C.Z)((0,C.Z)({},e),{},{role:"user"});p(!0),oe.Z.create(n).then((function(){A.Am.success(l("successfully.added")),t()})).catch((function(e){return x(e.response.data.params)})).finally((function(){return p(!1)}))},children:(0,N.jsxs)(u.Z,{gutter:12,children:[(0,N.jsx)(d.Z,{span:12,children:(0,N.jsx)(ee.Z.Item,{label:l("firstname"),name:"firstname",help:null!==m&&void 0!==m&&m.firstname?m.firstname[0]:null,validateStatus:null!==m&&void 0!==m&&m.firstname?"error":"success",rules:[{validator:function(e,n){return n?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(l("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(l("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(l("required")))}}],children:(0,N.jsx)(te.Z,{})})}),(0,N.jsx)(d.Z,{span:12,children:(0,N.jsx)(ee.Z.Item,{label:l("lastname"),name:"lastname",help:null!==m&&void 0!==m&&m.lastname?m.lastname[0]:null,validateStatus:null!==m&&void 0!==m&&m.lastname?"error":"success",rules:[{validator:function(e,n){return n?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(l("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(l("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(l("required")))}}],children:(0,N.jsx)(te.Z,{})})}),(0,N.jsx)(d.Z,{span:12,children:(0,N.jsx)(ee.Z.Item,{label:l("phone"),name:"phone",help:null!==m&&void 0!==m&&m.phone?m.phone[0]:null,validateStatus:null!==m&&void 0!==m&&m.phone?"error":"success",rules:[{required:!0,message:l("required")}],children:(0,N.jsx)(ne.Z,{min:0,className:"w-100"})})}),(0,N.jsx)(d.Z,{span:12,children:(0,N.jsx)(ee.Z.Item,{label:l("email"),name:"email",help:null!==m&&void 0!==m&&m.email?m.email[0]:null,validateStatus:null!==m&&void 0!==m&&m.email?"error":"success",rules:[{required:!0,message:l("required")},{type:"email",message:l("invalid.email")}],children:(0,N.jsx)(te.Z,{type:"email"})})})]})})})}var de=t(97388),ce=t(17649),ve=t(52838),pe=t(19107),he=t(97421);function fe(e){var n=e.uuid,t=e.handleCancel,a=(0,Z.$)().t,s=ee.Z.useForm(),u=(0,r.Z)(s,1)[0],d=(0,f.I0)(),c=(0,f.v9)((function(e){return(0,_.TW)(e.cart)})),v=(0,f.v9)((function(e){return e.cart}),f.wU).currentBag,p=(0,f.v9)((function(e){return e.globalSettings}),f.wU).settings,h=(0,i.useState)(c.address?{lat:c.address.lat,lng:c.address.lng}:(0,ce.Z)(p)),m=(0,r.Z)(h,2),x=m[0],j=m[1],g=(0,i.useState)(""),b=(0,r.Z)(g,2),k=b[0],w=b[1],q=(0,ve.Z)({apiKey:he.kr,libraries:["places","geocode"]}),S=q.placePredictions,I=q.getPlacePredictions,D=q.isPlacePredictionsLoading;return(0,i.useEffect)((function(){u.setFieldsValue({address:c.address.address||null})}),[v]),(0,N.jsx)(E.Z,{visible:!!n,title:a("create.address"),onCancel:t,footer:[(0,N.jsx)(M.Z,{type:"primary",onClick:function(){return u.submit()},children:a("save")},"saveBtn"),(0,N.jsx)(M.Z,{type:"default",onClick:t,children:a("cancel")},"cancelBtn")],children:(0,N.jsxs)(ee.Z,{layout:"vertical",name:"user-address",form:u,onFinish:function(e){var n=(0,C.Z)((0,C.Z)({},e),{},{active:1,lat:x.lat,lng:x.lng});d((0,y.Ng)({address:n,bag_id:v})),t()},children:[(0,N.jsx)(ee.Z.Item,{name:"address",label:a("address"),rules:[{required:!0,message:a("required")}],children:(0,N.jsx)(ie.Z,{allowClear:!0,searchValue:k,showSearch:!0,autoClearSearchValue:!0,loading:D,options:null===S||void 0===S?void 0:S.map((function(e){return{label:e.description,value:e.description}})),onSearch:function(e){w(e),e.length>0&&I({input:e})},onSelect:function(){var e=(0,l.Z)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,pe.Z)(n);case 2:t=e.sent,j({lat:null===t||void 0===t?void 0:t.geometry.location.lat,lng:null===t||void 0===t?void 0:t.geometry.location.lng});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})}),(0,N.jsx)(ee.Z.Item,{label:a("map"),children:(0,N.jsx)(de.Z,{location:x,setLocation:j,setAddress:function(e){return u.setFieldsValue({address:e})}})})]})})}var me=t(99096),xe=t(70816),Ze=t.n(xe),ye=t(53149),je=[{title:"sunday"},{title:"monday"},{title:"tuesday"},{title:"wednesday"},{title:"thursday"},{title:"friday"},{title:"saturday"}],ge=function(){var e,n,t,l,r,a,o=(0,Z.$)().t,c=(0,f.I0)(),v=(0,f.v9)((function(e){return(0,_.TW)(e.cart)})),p=(0,f.v9)((function(e){return e.menu}),f.wU).activeMenu,h=(0,f.v9)((function(e){return e.cart}),f.wU).currentBag,m=(0,f.v9)((function(e){return(0,_.TW)(e.cart)})),x=new Date(v.delivery_date),j=null===(e=p.data)||void 0===e||null===(n=e.CurrentShop)||void 0===n||null===(t=n.shop_working_days)||void 0===t?void 0:t.filter((function(e){return!0!==e.disabled})).find((function(e){var n;return(null===e||void 0===e?void 0:e.day)===(null===(n=je[x.getDay()])||void 0===n?void 0:n.title)})),b=null===(l=p.data)||void 0===l||null===(r=l.CurrentShop)||void 0===r||null===(a=r.shop_closed_date)||void 0===a?void 0:a.map((function(e){return e.day}));var k=function(e,n){for(var t=[],i=e;i<n;i++)t.push(i);return t};return(0,i.useEffect)((function(){var e,n,t;null!==m&&void 0!==m&&null!==(e=m.shop)&&void 0!==e&&e.value&&(t=null===m||void 0===m||null===(n=m.shop)||void 0===n?void 0:n.value,ye.Z.getById(t).then((function(e){var n=e.data;c((0,y.Ng)({currency_shop:n,bag_id:h})),c((0,g.nc)({activeMenu:p,data:(0,C.Z)((0,C.Z)({},p.data),{},{CurrentShop:e.data})}))})))}),[null===m||void 0===m?void 0:m.shop]),(0,N.jsx)(s.Z,{title:o("shipping.info"),className:"p-0",children:(0,N.jsxs)(u.Z,{gutter:12,children:[(0,N.jsx)(d.Z,{span:24,children:(0,N.jsx)(ee.Z.Item,{name:"delivery",label:o("delivery"),rules:[{required:!0,message:o("required")}],children:(0,N.jsx)(ie.Z,{placeholder:o("delivery.type"),options:[{label:"delivery",value:1,key:1},{label:"pickup",value:0,key:2}],labelInValue:!0,onSelect:function(e){return c((0,y.Ng)({delivery_fee:e.value,bag_id:h}))},onChange:function(e){return c((0,y.Ng)({deliveries:e,bag_id:h}))}})})}),(0,N.jsx)(d.Z,{span:24,children:(0,N.jsxs)(u.Z,{gutter:12,children:[(0,N.jsx)(d.Z,{span:12,children:(0,N.jsx)(ee.Z.Item,{name:"delivery_date",label:o("delivery.date"),rules:[{required:!0,message:o("required")}],valuePropName:"date",children:(0,N.jsx)(me.Z,{placeholder:o("delivery.date"),className:"w-100",format:"YYYY-MM-DD",disabledDate:function(e){var n=null===b||void 0===b?void 0:b.find((function(n){return n===Ze()(e).format("YYYY-MM-DD")})),t=Ze()().add(-1,"days")>=e;return n||t},onChange:function(e){var n=Ze()(e).format("YYYY-MM-DD");c((0,y.Ng)({delivery_date:n,bag_id:h}))}})})}),(0,N.jsx)(d.Z,{span:12,children:(0,N.jsx)(ee.Z.Item,{label:"".concat(o("delivery.time")," (").concat(o("up.to"),")"),name:"delivery_time",rules:[{required:!1,message:o("required")}],valuePropName:"date",children:(0,N.jsx)(me.Z,{disabled:!v.delivery_date,picker:"time",placeholder:o("start.time"),className:"w-100",format:"HH:mm:ss",showNow:!1,disabledTime:function(){return{disabledHours:function(){return function(e,n){for(var t=parseInt(e),i=parseInt(n),l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],r=t;r<=i;r++)delete l[r];return l}(Ze()(new Date).format("DD")===Ze()(v.delivery_date).format("DD")?(null===j||void 0===j?void 0:j.from.substring(0,2))>=Ze()(new Date).format("HH")?null===j||void 0===j?void 0:j.from.substring(0,2):Ze()(new Date).format("HH"):null===j||void 0===j?void 0:j.from.substring(0,2),null===j||void 0===j?void 0:j.to.substring(0,2))},disabledMinutes:function(){return k(0,60)},disabledSeconds:function(){return k(0,60)}}},onChange:function(e){var n=Ze()(e).format("HH:mm:ss");c((0,y.Ng)({delivery_time:n,bag_id:h}))}})})})]})})]})})};function _e(){var e,n,t,a=(0,Z.$)().t,c=ee.Z.useForm(),v=(0,r.Z)(c,1)[0],p=(0,f.I0)(),h=(0,f.v9)((function(e){return e.currency}),f.wU),m=h.currencies,x=h.loading,j=(0,f.v9)((function(e){return e.cart}),f.wU),g=j.currentBag,b=j.bags,w=j.currency,q=(0,f.v9)((function(e){return(0,_.TW)(e.cart)})),C=(0,f.v9)((function(e){return e.payment}),f.wU).payments,I=(0,i.useState)([]),D=(0,r.Z)(I,2),T=D[0],B=D[1],E=(0,i.useState)(null),U=(0,r.Z)(E,2),F=U[0],H=U[1],O=(0,i.useState)(null),z=(0,r.Z)(O,2),Y=z[0],W=z[1],$=(0,i.useState)(null),L=(0,r.Z)($,2),J=L[0],K=L[1],X=(0,f.v9)((function(e){return(0,_.TW)(e.cart)})),Q=(0,f.v9)((function(e){return e.globalSettings.settings}),f.wU),R=Q.payment_type,G=Q.before_order_phone_required;function de(){return(de=(0,l.Z)(o().mark((function e(n){var t,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.search,n.page,i={search:t,perPage:10},e.abrupt("return",oe.Z.getAll(i).then((function(e){return K(e.links),B(e.data),ce(e.data)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e){if(e)return(0,se.isArray)(e)?e.map((function(e){return{label:"".concat(e.firstname," ").concat(e.lastname?e.lastname:""),value:e.id}})):{label:"".concat(e.firstname," ").concat(e.lastname),value:e.id}}return(0,i.useEffect)((function(){if(w){var e={label:"".concat(null===w||void 0===w?void 0:w.title," (").concat(null===w||void 0===w?void 0:w.symbol,")"),value:null===w||void 0===w?void 0:w.id};p((0,y.Ng)({formCurrency:e,bag_id:g})),v.setFieldsValue({currency:e})}else{var n=m.find((function(e){return e.default})),t={label:"".concat(null===n||void 0===n?void 0:n.title," (").concat(null===n||void 0===n?void 0:n.symbol,")"),value:null===n||void 0===n?void 0:n.id};p((0,y.Ng)({currentCurrency:n,bag_id:g})),p((0,y.NW)(n)),v.setFieldsValue({currency:t})}}),[]),(0,i.useEffect)((function(){v.setFieldsValue({user:q.user||null,payment_type:q.paymentType||null,address:q.address.address||null,delivery:q.deliveries||null,delivery_time:(null===q||void 0===q?void 0:q.delivery_time)||null,delivery_date:(null===q||void 0===q?void 0:q.delivery_date)||null,phone:(null===q||void 0===q?void 0:q.phone)||null})}),[g,q]),(0,N.jsxs)("div",{className:"order-tabs",children:[(0,N.jsxs)("div",{className:"tabs-container",children:[(0,N.jsx)("div",{className:"tabs",children:b.map((function(e){return(0,N.jsx)("div",{className:e===g?"tab active":"tab",onClick:function(){return p((0,y.$s)(e))},children:(0,N.jsxs)(V.Z,{children:[(0,N.jsx)(le.Z,{}),(0,N.jsxs)("span",{children:[a("bag")," - ",e]}),e&&e===g?(0,N.jsx)(re.Z,{onClick:function(n){return function(e,n){e.preventDefault(),e.stopPropagation(),p((0,y.KI)(n))}(n,e)},className:"close-button",size:12}):""]})},"tab"+e)}))}),(0,N.jsx)(M.Z,{size:"small",type:"primary",shape:"circle",icon:(0,N.jsx)(P.Z,{}),className:"tab-add-button",onClick:function(){return p((0,y.Cs)({shop:X.shop}))}})]}),(0,N.jsxs)(ee.Z,{layout:"vertical",name:"pos-form",form:v,initialValues:{user:q.user||null,currency:w||void 0,payment_type:q.paymentType||null,deliveries:q.deliveries,delivery:{label:"pickup",value:"0"},delivery_time:null,delivery_date:null,phone:q.phone||null},children:[(0,N.jsxs)(s.Z,{className:g?"":"tab-card",children:[x&&(0,N.jsx)("div",{className:"loader",children:(0,N.jsx)(S.Z,{})}),(0,N.jsxs)(u.Z,{gutter:6,style:{marginBottom:15},children:[(0,N.jsx)(d.Z,{span:9,children:(0,N.jsx)(ee.Z.Item,{name:"user",rules:[{required:!0,message:""}],className:"w-100",children:(0,N.jsx)(k._,{hasMore:null===J||void 0===J?void 0:J.next,placeholder:a("select.client"),fetchOptions:function(e){return de.apply(this,arguments)},onSelect:function(e){var n=T.find((function(n){return n.id===e.value}));p((0,y.Ng)({user:e,userUuid:null===n||void 0===n?void 0:n.uuid,bag_id:g,userOBJ:n,phone:null===n||void 0===n?void 0:n.phone})),v.setFieldsValue({address:null,phone:null===n||void 0===n?void 0:n.phone})},onClear:function(){v.setFieldsValue({phone:null,user:null})}})})}),(0,N.jsx)(d.Z,{span:3,children:(0,N.jsx)(ee.Z.Item,{children:(0,N.jsx)(M.Z,{icon:(0,N.jsx)(ae.Z,{}),onClick:function(){return W(!0)}})})}),"1"===G&&(0,N.jsx)(d.Z,{span:12,children:(0,N.jsx)(ee.Z.Item,{name:"phone",rules:[{required:!0,message:a("required")},{validator:function(e,n){if(n<0)return Promise.reject(new Error(a("must.be.positive")))}}],children:(0,N.jsx)(ne.Z,{className:"w-100",placeholder:a("phone.number"),disabled:null===q||void 0===q||null===(e=q.userOBJ)||void 0===e?void 0:e.phone,onChange:function(e){return p((0,y.Ng)({phone:e,bag_id:g}))}})})}),(0,N.jsx)(d.Z,{span:12,children:(0,N.jsx)(ee.Z.Item,{name:"address",rules:[{required:!0,message:""}],onClick:function(){q.userUuid?H(q.userUuid):A.Am.warning(a("please.select.client"))},children:(0,N.jsx)(te.Z,{autoComplete:"off",placeholder:a("address")})})}),(0,N.jsx)(d.Z,{span:12,children:(0,N.jsx)(ee.Z.Item,{name:"currency",rules:[{required:!0,message:"missing_currency"}],children:(0,N.jsx)(ie.Z,{placeholder:a("select.currency"),onSelect:function(e){var n=m.find((function(n){return n.id===e.value}));p((0,y.NW)(n))},labelInValue:!0,disabled:!0,onChange:function(e){var n=e;p((0,y.Ng)({currency:n,bag_id:g}))},children:m.map((function(e,n){return(0,N.jsx)(ie.Z.Option,{value:null===e||void 0===e?void 0:e.id,children:"".concat(null===e||void 0===e?void 0:e.title," (").concat(null===e||void 0===e?void 0:e.symbol,")")},n)}))})})}),(0,N.jsx)(d.Z,{span:12,children:(0,N.jsx)(ee.Z.Item,{name:"payment_type",rules:[{required:!0,message:a("missing.payment.type")}],children:(0,N.jsx)(ie.Z,{placeholder:a("select.payment.type"),labelInValue:!0,onSelect:function(e){return p((0,y.Ng)({paymentType:e,bag_id:g}))},children:null===(n="admin"===R?C:null===X||void 0===X?void 0:X.payment_type)||void 0===n||null===(t=n.filter((function(e){return"cash"===e.tag||"wallet"===e.tag})))||void 0===t?void 0:t.map((function(e,n){return(0,N.jsx)(ie.Z.Option,{value:e.id,children:null===e||void 0===e?void 0:e.tag},n)}))})})})]})]}),(0,N.jsx)(ge,{})]}),F&&(0,N.jsx)(fe,{uuid:F,handleCancel:function(){return H(null)}}),Y&&(0,N.jsx)(ue,{visible:Y,handleCancel:function(){return W(!1)}})]})}var be=t(47515),ke=t(43681),Ne=t(7370),we=t(21448),qe=t(16233),Ce=t(71136),Se=t(1003),Ie=t(74776),De=t.n(Ie);function Pe(){var e,n,t=(0,Z.$)().t,l=ee.Z.useForm(),a=(0,r.Z)(l,1)[0],o=(0,f.I0)(),v=(0,f.v9)((function(e){return e.cart}),f.wU),p=v.cartItems,x=v.cartShops,j=v.currentBag,g=v.total,b=v.coupons,k=v.currency,w=v.notes,q=(0,f.v9)((function(e){return(0,_.fq)(e.cart)})),I=(0,f.v9)((function(e){return(0,_.TW)(e.cart)})),D=(0,i.useState)([]),E=(0,r.Z)(D,2),F=E[0],H=E[1],Y=(0,i.useState)(!1),W=(0,r.Z)(Y,2),$=W[0],L=W[1],J=(0,i.useState)(null),K=(0,r.Z)(J,2),X=K[0],Q=K[1],R=(0,i.useState)(null),G=(0,r.Z)(R,2),ne=G[0],ie=G[1],le=(0,i.useState)(""),re=(0,r.Z)(le,2),ae=re[0],oe=re[1],se=(0,Ce.Z)(p,300),ue=(0,f.v9)((function(e){return(0,_.TW)(e.cart)}));console.log("total",g);var de=function(e){var n;e.quantity!==(null===e||void 0===e||null===(n=e.stockID)||void 0===n?void 0:n.quantity)&&e.quantity!==e.max_qty&&o((0,y.Xq)((0,C.Z)((0,C.Z)({},e),{},{quantity:1})))},ce=function(e){1!==e.quantity&&(e.quantity<=e.min_qty||o((0,y.aN)((0,C.Z)((0,C.Z)({},e),{},{quantity:1}))))};function ve(){var e=function(e){var n,t,i,l,r,a,o=e.map((function(e){var n,t;return{quantity:e.quantity,stock_id:e.stockID?null===(n=e.stockID)||void 0===n?void 0:n.id:null===(t=e.stock)||void 0===t?void 0:t.id}})),s=e.flatMap((function(e){return e.addons.map((function(n){var t,i;return{quantity:n.quantity,stock_id:n.stockID,parent_id:e.stockID?null===(t=e.stockID)||void 0===t?void 0:t.id:null===(i=e.stock)||void 0===i?void 0:i.id}}))})),u={products:o.concat(s),currency_id:null===k||void 0===k?void 0:k.id,coupon:null===(n=b[0])||void 0===n?void 0:n.coupon,shop_id:null===I||void 0===I||null===(t=I.shop)||void 0===t?void 0:t.value,type:null===I||void 0===I||null===(i=I.deliveries)||void 0===i||null===(l=i.label)||void 0===l?void 0:l.toLowerCase(),address:{latitude:null===I||void 0===I||null===(r=I.address)||void 0===r?void 0:r.lat,longitude:null===I||void 0===I||null===(a=I.address)||void 0===a?void 0:a.lng}};return De().stringify(u,{addQueryPrefix:!0})}(q);L(!0),Ne.Z.calculate(e).then((function(e){var n,t=e.data.data,i=t.stocks.map((function(e){return(0,C.Z)((0,C.Z)((0,C.Z)((0,C.Z)({},q.find((function(n){return n.id===e.id}))),e),e.stock.countable),{},{stock:e.stock.stock_extras,stocks:e.stock.stock_extras,stockID:e.stock})})),l=[(0,C.Z)((0,C.Z)({},F),{},{products:i})];o((0,y.kT)(l));var r={product_total:null===(n=t.stocks)||void 0===n?void 0:n.reduce((function(e,n){return e+(n.total_price||n.price)}),0),product_tax:t.total_tax,shop_tax:t.total_shop_tax,order_total:t.total_price,delivery_fee:t.delivery_fee,service_fee:null===t||void 0===t?void 0:t.service_fee,couponOBJ:null===t||void 0===t?void 0:t.coupon};o((0,y.YP)(r))})).finally((function(){return L(!1)}))}(0,i.useEffect)((function(){var e;null!==I&&void 0!==I&&null!==(e=I.shop)&&void 0!==e&&e.value&&function(){var e;c.Z.getById(null===I||void 0===I||null===(e=I.shop)||void 0===e?void 0:e.value).then((function(e){return H(e.data)}))}()}),[]),(0,h.Z)((function(){var e;o((0,m.q1)({perPage:12,currency_id:null===k||void 0===k?void 0:k.id,shop_id:null===I||void 0===I||null===(e=I.shop)||void 0===e?void 0:e.value,active:1})),q.length&&ve()}),[k]),(0,h.Z)((function(){q.length?ve():o((0,y.ql)())}),[se,j,null===I||void 0===I?void 0:I.address,k,b,I.coupon]);function pe(e,n){Se.Z.create(e,n).then((function(e){return function(e){Q(e)}(e.data.id)})).finally((function(){return L(!1)}))}return(0,N.jsxs)(s.Z,{children:[$&&(0,N.jsx)("div",{className:"loader",children:(0,N.jsx)(S.Z,{})}),(0,N.jsxs)("div",{className:"card-save",children:[null===x||void 0===x?void 0:x.map((function(e,n){var i,l,r,a,s,c;return(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:"all-price",children:[(0,N.jsxs)("span",{className:"title",children:[null===e||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title," ",t("shop")]}),(0,N.jsxs)("span",{className:"counter",children:[null===e||void 0===e||null===(l=e.products)||void 0===l?void 0:l.length," ",(null===e||void 0===e||null===(r=e.products)||void 0===r?void 0:r.length)>1?t("products"):t("product")]})]}),null===e||void 0===e||null===(a=e.products)||void 0===a?void 0:a.map((function(e,n){var i,l,r,a,s,c,v,p,h,f;return!0!==(null===e||void 0===e?void 0:e.bonus)?(0,N.jsx)("div",{className:"custom-cart-container",children:(0,N.jsxs)(u.Z,{className:"product-row",children:[(0,N.jsx)(U.Z,{width:70,height:"auto",src:(0,T.Z)(null===e||void 0===e?void 0:e.img),preview:!0,placeholder:!0,className:"rounded"}),(0,N.jsx)(d.Z,{span:18,className:"product-col",children:(0,N.jsxs)("div",{children:[(0,N.jsx)("span",{className:"product-name",children:null===e||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title}),(0,N.jsx)("br",{}),(0,N.jsx)(V.Z,{wrap:!0,className:"mt-2",children:null===e||void 0===e||null===(l=e.stock)||void 0===l?void 0:l.map((function(e,n){return(0,N.jsx)("span",{className:"extras-text rounded pr-2 pl-2",children:e.value},n+"-"+e.value)}))}),(0,N.jsx)("br",{}),(0,N.jsx)(V.Z,{wrap:!0,className:"mt-2",children:null===e||void 0===e||null===(r=e.addons)||void 0===r?void 0:r.map((function(e,n){var t,i;return(0,N.jsxs)("span",{className:"extras-text rounded pr-2 pl-2",children:[null===e||void 0===e||null===(t=e.countable)||void 0===t||null===(i=t.translation)||void 0===i?void 0:i.title," x"," ",null===e||void 0===e?void 0:e.quantity]},n+"-"+(null===e||void 0===e?void 0:e.quantity))}))}),(0,N.jsxs)("div",{className:"product-counter",children:[(0,N.jsx)("span",{children:(0,z.Z)((null===e||void 0===e?void 0:e.total_price)||(null===e||void 0===e?void 0:e.price),null===k||void 0===k?void 0:k.symbol)}),(0,N.jsxs)("div",{className:"count",children:[(0,N.jsx)(M.Z,{className:"button-counter",shape:"circle",icon:(0,N.jsx)(O.Z,{size:14}),onClick:function(){return ce(e)}}),(0,N.jsxs)("span",{children:[(null===e||void 0===e?void 0:e.countable_quantity)*((null===e||void 0===e?void 0:e.interval)||1),null===e||void 0===e||null===(a=e.unit)||void 0===a||null===(s=a.translation)||void 0===s?void 0:s.title]}),(0,N.jsx)(M.Z,{className:"button-counter",shape:"circle",icon:(0,N.jsx)(P.Z,{size:14}),onClick:function(){return de(e)}}),(0,N.jsx)(M.Z,{className:"button-counter",shape:"circle",onClick:function(){return n=e,o((0,y.h2)(n));var n},icon:(0,N.jsx)(be.Z,{size:14})})]})]})]})}),(0,N.jsx)(d.Z,{span:24,children:(0,N.jsx)(te.Z,{placeholder:t("note"),className:"w-100 mt-2",defaultValue:w[e.stockID.id],onBlur:function(n){return o((0,y.Rt)({label:e.stockID.id,value:n.target.value||void 0}))}})})]})},(null===e||void 0===e?void 0:e.id)+"_"+n):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("h4",{className:"mt-2",children:[" ",t("Bonus.product")," "]}),(0,N.jsx)("div",{className:"custom-cart-container",children:(0,N.jsxs)(u.Z,{className:"product-row",children:[(0,N.jsx)(U.Z,{width:70,height:"auto",src:(0,T.Z)(null===e||void 0===e?void 0:e.img),preview:!0,placeholder:!0,className:"rounded"}),(0,N.jsx)(d.Z,{span:18,className:"product-col",children:(0,N.jsxs)("div",{children:[(0,N.jsx)("span",{className:"product-name",children:null===e||void 0===e||null===(c=e.translation)||void 0===c?void 0:c.title}),(0,N.jsx)("br",{}),(0,N.jsx)(V.Z,{wrap:!0,className:"mt-2",children:null===e||void 0===e||null===(v=e.stock)||void 0===v?void 0:v.map((function(e,n){return(0,N.jsx)("span",{className:"extras-text rounded pr-2 pl-2",children:null===e||void 0===e?void 0:e.value},n+"_"+(null===e||void 0===e?void 0:e.value))}))}),(0,N.jsx)("br",{}),(0,N.jsx)(V.Z,{wrap:!0,className:"mt-2",children:null===(p=e.addons)||void 0===p?void 0:p.map((function(e,n){var t,i;return(0,N.jsxs)("span",{className:"extras-text rounded pr-2 pl-2",children:[null===e||void 0===e||null===(t=e.countable)||void 0===t||null===(i=t.translation)||void 0===i?void 0:i.title," x"," ",null===e||void 0===e?void 0:e.quantity]},n+"_"+(null===e||void 0===e?void 0:e.quantity))}))}),(0,N.jsxs)("div",{className:"product-counter",children:[(0,N.jsx)("span",{children:(0,z.Z)((null===e||void 0===e?void 0:e.total_price)||(null===e||void 0===e?void 0:e.price),null===k||void 0===k?void 0:k.symbol)}),(0,N.jsxs)("div",{className:"count",children:[(0,N.jsx)(M.Z,{className:"button-counter",shape:"circle",icon:(0,N.jsx)(O.Z,{size:14}),onClick:function(){return ce(e)},disabled:!0}),(0,N.jsxs)("span",{children:[(null===e||void 0===e?void 0:e.quantity)*((null===e||void 0===e?void 0:e.interval)||1),null===e||void 0===e||null===(h=e.unit)||void 0===h||null===(f=h.translation)||void 0===f?void 0:f.title]}),(0,N.jsx)(M.Z,{className:"button-counter",shape:"circle",icon:(0,N.jsx)(P.Z,{size:14}),onClick:function(){return de(e)},disabled:!0})]})]})]})})]})},e.id+"_"+n)]})})),(0,N.jsxs)("div",{className:"d-flex my-3",children:[(0,N.jsx)(te.Z,{placeholder:t("coupon"),className:"w-100 mr-2",addonAfter:null!==(s=b.find((function(n){return n.shop_id===e.id})))&&void 0!==s&&s.verified?(0,N.jsx)(ke.Z,{style:{color:"#18a695"}}):null,defaultValue:null===(c=b.find((function(n){return n.shop_id===e.id})))||void 0===c?void 0:c.coupon,onBlur:function(n){var t;return o((0,y.gU)({coupon:n.target.value,user_id:null===I||void 0===I||null===(t=I.user)||void 0===t?void 0:t.value,shop_id:e.id,verified:!1}))},onChange:function(e){return oe(e.target.value)}}),(0,N.jsx)(M.Z,{disabled:0===ae.trim().length||ae.trim().length<2,onClick:function(){var n,t,i;return function(e){var n={coupon:ae,shop_id:e};ie(e),we.Z.checkCoupon(n).then((function(n){var t=n.data.id;o((0,y.Ng)({coupon:t,bag_id:j})),o((0,y.nC)({shop_id:e,price:n.data.price,verified:!0})),o((0,y.Io)(n.data))})).catch((function(){return o((0,y.nC)({shop_id:e,price:0,verified:!1}))})).finally((function(){return ie(null)}))}(null===e||void 0===e||null===(n=e.products)||void 0===n||null===(t=n[0])||void 0===t||null===(i=t.shop)||void 0===i?void 0:i.id)},loading:ne===e.id,children:t("check.coupon")})]})]},e.uuid+"_"+n)})),(0,N.jsx)(u.Z,{className:"all-price-row",children:(0,N.jsxs)(d.Z,{span:24,className:"col",children:[(0,N.jsxs)("div",{className:"all-price-container",children:[(0,N.jsx)("span",{children:t("sub.total")}),(0,N.jsx)("span",{children:(0,z.Z)(g.product_total,null===k||void 0===k?void 0:k.symbol)})]}),(0,N.jsxs)("div",{className:"all-price-container",children:[(0,N.jsx)("span",{children:t("shop.tax")}),(0,N.jsx)("span",{children:(0,z.Z)(g.shop_tax,null===k||void 0===k?void 0:k.symbol)})]}),(0,N.jsxs)("div",{className:"all-price-container",children:[(0,N.jsx)("span",{children:t("delivery.fee")}),(0,N.jsx)("span",{children:(0,z.Z)(g.delivery_fee,null===k||void 0===k?void 0:k.symbol)})]}),(0,N.jsxs)("div",{className:"all-price-container",children:[(0,N.jsx)("span",{children:t("service.fee")}),(0,N.jsx)("span",{children:(0,z.Z)(g.service_fee,null===k||void 0===k?void 0:k.symbol)})]}),(null===g||void 0===g||null===(e=g.couponOBJ)||void 0===e?void 0:e.price)&&(0,N.jsxs)("div",{className:"all-price-container",children:[(0,N.jsx)("span",{children:t("coupon")}),(0,N.jsxs)("span",{style:{color:"red"},children:["- ",(0,z.Z)(null===g||void 0===g||null===(n=g.couponOBJ)||void 0===n?void 0:n.price,null===k||void 0===k?void 0:k.symbol)]})]})]})}),(0,N.jsxs)(u.Z,{className:"submit-row",children:[(0,N.jsxs)(d.Z,{span:14,className:"col",children:[(0,N.jsx)("span",{children:t("total.amount")}),(0,N.jsx)("span",{children:(0,z.Z)(g.order_total,null===k||void 0===k?void 0:k.symbol)})]}),(0,N.jsx)(d.Z,{className:"col2",children:(0,N.jsx)(M.Z,{type:"primary",onClick:function(){return function(){var e,n,i,l,r,s,u,d;if(k)if(I.address)if(I.delivery_time)if(I.delivery_date){L(!0);var c=null===p||void 0===p?void 0:p.map((function(e){var n,t;return{stock_id:null===(n=e.stockID)||void 0===n?void 0:n.id,quantity:e.quantity,bonus:e.bonus,note:w[null===(t=e.stockID)||void 0===t?void 0:t.id]}})),v=null===p||void 0===p?void 0:p.flatMap((function(e){var n;return null===(n=e.addons)||void 0===n?void 0:n.map((function(n){return{stock_id:n.stockID,quantity:n.quantity,parent_id:e.stockID.id}}))})),h={user_id:null===(e=I.user)||void 0===e?void 0:e.value,currency_id:null===k||void 0===k?void 0:k.id,rate:k.rate,shop_id:I.shop.value,delivery_id:I.deliveries.label,delivery_fee:I.delivery_fee,coupon:null===(n=b[0])||void 0===n?void 0:n.coupon,tax:g.order_tax,payment_type:null===(i=I.paymentType)||void 0===i?void 0:i.label,delivery_date:I.delivery_date,delivery_address_id:null===(l=I.address)||void 0===l?void 0:l.address,address:{address:null===(r=I.address)||void 0===r?void 0:r.address,office:null,house:null,floor:null},location:{latitude:null===(s=I.address)||void 0===s?void 0:s.lat,longitude:null===(u=I.address)||void 0===u?void 0:u.lng},delivery_time:Ze()(I.delivery_time,"HH:mm").format("HH:mm"),delivery_type:I.deliveries.label.toLowerCase(),delivery_type_id:I.deliveries.value,products:c.concat.apply(c,(0,B.Z)(v)),phone:null===I||void 0===I||null===(d=I.phone)||void 0===d?void 0:d.toString()},f={payment_sys_id:I.paymentType.value};Ne.Z.create(h).then((function(e){o((0,y.q6)(e.data)),pe(e.data.id,f),a.resetFields()})).catch((function(e){return console.error(e)})).finally((function(){return L(!1)}))}else A.Am.warning(t("please.select.deliveryDate"));else A.Am.warning(t("shop.closed"));else A.Am.warning(t("please.select.address"));else A.Am.warning(t("please.select.currency"))}()},disabled:!x.length,loading:$,children:t("place.order")})})]})]}),X?(0,N.jsx)(qe.Z,{orderId:X,handleClose:function(){Q(null),o((0,y.LL)()),0!==j&&o((0,y.KI)(j)),A.Am.success(t("successfully.closed")),o((0,m.q1)({perPage:12,currency_id:null===k||void 0===k?void 0:k.id,shop_id:null===ue||void 0===ue?void 0:ue.shop.value,active:1}))}}):""]})}function Te(){return(0,N.jsx)("div",{className:"pos-system",children:(0,N.jsx)(q.Z,{className:"site-layout",children:(0,N.jsxs)(u.Z,{gutter:24,children:[(0,N.jsxs)(d.Z,{span:15,children:[(0,N.jsx)(w,{}),(0,N.jsx)(G,{})]}),(0,N.jsxs)(d.Z,{span:9,children:[(0,N.jsx)(_e,{}),(0,N.jsx)(Pe,{})]})]})})})}}}]);