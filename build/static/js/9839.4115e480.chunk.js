"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9839],{41481:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(1413),a=t(29439),i=t(45987),l=t(47313),o=t(66672),s=t(16031),c=t(40765),u=t(46417),d=["handleChange","defaultValue","resetSearch"];function f(e){var n=e.handleChange,t=e.defaultValue,f=e.resetSearch,h=(0,i.Z)(e,d),Z=(0,l.useState)(t),m=(0,a.Z)(Z,2),v=m[0],p=m[1],x=(0,l.useMemo)((function(){return(0,s.debounce)((function(e){n(e)}),800)}),[n]);return(0,l.useEffect)((function(){p(t)}),[f,t]),(0,u.jsx)(o.Z,(0,r.Z)({value:v,onChange:function(e){p(e.target.value),x(e.target.value)},prefix:(0,u.jsx)(c.Z,{})},h))}},69839:function(e,n,t){t.r(n),t.d(n,{default:function(){return B}});var r=t(93433),a=t(15861),i=t(4942),l=t(1413),o=t(29439),s=t(45987),c=t(87757),u=t.n(c),d=t(47313),f=t(10976),h=t(66672),Z=t(77181),m=t(45705),v=t(74294),p=t(59491),x=t(78508),g=t(34344),j={getAll:function(e){return g.Z.get("dashboard/admin/translations/paginate",{params:e})},delete:function(e){return g.Z.delete("dashboard/admin/translations/".concat(e))},getById:function(e,n){return g.Z.get("dashboard/admin/translations/".concat(e),{params:n})},create:function(e){return g.Z.post("dashboard/admin/translations",{},{params:e})},update:function(e,n){return g.Z.put("dashboard/admin/translations/".concat(e),{},{params:n})}},b=t(23560),y=t(12019),w=t(55768),S=t(9274),k=t(68197),C=t(59624),I=t(24511),P=t(46417);function E(e){var n=e.visible,t=e.setVisible,r=e.languages,a=e.refetch,i=(0,I.$)().t,l=(0,d.useState)(!1),s=(0,o.Z)(l,2),c=s[0],u=s[1],Z=f.Z.useForm(),m=(0,o.Z)(Z,1)[0],x=function(){t(!1)};return(0,P.jsx)(S.Z,{visible:n,title:i("add.translation"),onCancel:x,footer:[(0,P.jsx)(p.Z,{type:"primary",form:"translation-form",htmlType:"submit",loading:c,children:i("create")},"create-translation"),(0,P.jsx)(p.Z,{type:"default",onClick:x,children:i("cancel")},"create-translation-cancel")],children:(0,P.jsx)(f.Z,{id:"translation-form",name:"translation",layout:"vertical",onFinish:function(e){u(!0),j.create(e).then((function(){b.Am.success(i("successfully.created")),t(!1),a()})).finally((function(){return u(!1)}))},form:m,initialValues:{group:"web"},children:(0,P.jsxs)(k.Z,{gutter:12,children:[(0,P.jsx)(C.Z,{span:24,children:(0,P.jsx)(f.Z.Item,{label:i("name"),name:"key",rules:[{validator:function(e,n){return n?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(i("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(i("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(i("required")))}}],children:(0,P.jsx)(h.Z,{})})}),(0,P.jsx)(C.Z,{span:24,children:(0,P.jsx)(f.Z.Item,{label:i("group"),name:"group",rules:[{required:!0,message:""}],children:(0,P.jsxs)(v.Z,{children:[(0,P.jsx)(v.Z.Option,{value:"web",children:i("web")}),(0,P.jsx)(v.Z.Option,{value:"mobile",children:i("mobile")}),(0,P.jsx)(v.Z.Option,{value:"errors",children:i("errors")})]})})}),r.map((function(e,n){return(0,P.jsx)(C.Z,{span:24,children:(0,P.jsx)(f.Z.Item,{label:"".concat(i("translation")," (").concat(e.locale,")"),name:"value[".concat(e.locale,"]"),rules:[{validator:function(e,n){return n?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(i("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(i("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(i("required")))}}],children:(0,P.jsx)(h.Z,{})})},n)}))]})})})}var O=t(2717),V=t(41481),z=["index"],F=["title","editable","children","dataIndex","record","handleSave"],q=d.createContext(null),A=function(e){e.index;var n=(0,s.Z)(e,z),t=f.Z.useForm(),r=(0,o.Z)(t,1)[0];return(0,P.jsx)(f.Z,{form:r,component:!1,children:(0,P.jsx)(q.Provider,{value:r,children:(0,P.jsx)("tr",(0,l.Z)({},n))})})},M=function(e){e.title;var n=e.editable,t=e.children,r=e.dataIndex,c=e.record,Z=e.handleSave,m=(0,s.Z)(e,F),v=(0,I.$)().t,p=(0,d.useState)(!1),x=(0,o.Z)(p,2),g=x[0],j=x[1],b=(0,d.useRef)(null),w=(0,d.useContext)(q);(0,d.useEffect)((function(){g&&b.current.focus()}),[g]);var S=function(){j(!g),w.setFieldsValue((0,i.Z)({},r,c[r]))},k=function(){var e=(0,a.Z)(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.validateFields();case 3:n=e.sent,S(),Z((0,l.Z)((0,l.Z)((0,l.Z)({},c),n),{},{dataIndex:r})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),C=t;return n&&(C=g?(0,P.jsx)(f.Z.Item,{style:{margin:0},name:r,rules:[{validator:function(e,n){return n?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(v("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(v("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(v("required")))}}],children:(0,P.jsx)(h.Z,{ref:b,onPressEnter:k,onBlur:k})}):(0,P.jsxs)("div",{className:"editable-cell-value-wrap cursor-pointer d-flex justify-content-between align-items-center",style:{paddingRight:24},onClick:S,children:[(0,P.jsx)("div",{className:"w-100",children:t}),(0,P.jsx)(y.Z,{})]})),(0,P.jsx)("td",(0,l.Z)((0,l.Z)({},m),{},{children:C}))};function B(){var e=(0,I.$)().t,n=(0,d.useState)([]),t=(0,o.Z)(n,2),a=t[0],s=t[1],c=(0,d.useState)(10),u=(0,o.Z)(c,2),f=u[0],h=u[1],g=(0,d.useState)(1),y=(0,o.Z)(g,2),S=y[0],k=y[1],C=(0,d.useState)(0),z=(0,o.Z)(C,2),F=z[0],q=z[1],B=(0,d.useState)(!1),N=(0,o.Z)(B,2),R=N[0],$=N[1],H=(0,d.useState)(null),W=(0,o.Z)(H,2),_=W[0],K=W[1],L=(0,d.useState)(null),T=(0,o.Z)(L,2),U=T[0],D=T[1],G=(0,d.useState)(null),J=(0,o.Z)(G,2),Q=J[0],X=J[1],Y=(0,d.useState)(!1),ee=(0,o.Z)(Y,2),ne=ee[0],te=ee[1],re=(0,d.useState)(0),ae=(0,o.Z)(re,2),ie=ae[0],le=ae[1],oe=(0,O.v9)((function(e){return e.formLang}),O.wU).languages,se=(0,d.useState)(""),ce=(0,o.Z)(se,2),ue=ce[0],de=ce[1],fe=(0,d.useState)(""),he=(0,o.Z)(fe,2),Ze=he[0],me=he[1],ve=(0,d.useMemo)((function(){return[{title:e("name"),dataIndex:"key",sorter:function(e,n,t){return pe(t,"key")},width:250,fixed:"left"},{title:e("group"),dataIndex:"group",sorter:function(e,n,t){return pe(t,"group")},width:150,fixed:"left"}].concat((0,r.Z)(oe.filter((function(e){return!ue||e.locale===ue})).map((function(e){return{title:e.title,dataIndex:"value[".concat(e.locale,"]"),editable:!0,width:300}}))))}),[oe,ue]);function pe(e,n){var t;switch(e){case"ascend":t="asc";break;case"descend":t="desc"}D(t),X(n)}function xe(){$(!0);var e={perPage:f,skip:ie,group:_,sort:U,column:Q,search:Ze};j.getAll(e).then((function(e){var n=e.data,t=Object.entries(n.translations).map((function(e){return(0,l.Z)({key:e[0],group:e[1][0].group},Object.assign.apply(Object,[{}].concat((0,r.Z)(oe.map((function(n){var t;return(0,i.Z)({},"value[".concat(n.locale,"]"),null===(t=e[1].find((function(e){return e.locale===n.locale})))||void 0===t?void 0:t.value)}))))))}));s(t),q(n.total)})).finally((function(){return $(!1)}))}(0,d.useEffect)((function(){xe()}),[f,_,U,Q,ie,Ze]);var ge=function(e){var n=e.dataIndex,t=e.key,i=(0,r.Z)(a),o=i.findIndex((function(n){return e.key===n.key})),c=i[o];c[n]!==e[n]&&(i.splice(o,1,(0,l.Z)((0,l.Z)({},c),e)),s(i),function(e,n){j.update(e,n).then((function(e){return b.Am.success(e.message)}))}(t,(0,l.Z)((0,l.Z)({},e),{},{value:void 0,dataIndex:void 0,key:void 0})))};var je={body:{row:A,cell:M}},be=ve.map((function(e){return e.editable?(0,l.Z)((0,l.Z)({},e),{},{onCell:function(n){return{record:n,editable:e.editable,dataIndex:e.dataIndex,title:e.title,fixed:e.fixed,handleSave:ge}}}):e}));return(0,P.jsxs)(Z.Z,{title:e("translations"),extra:(0,P.jsxs)(m.Z,{wrap:!0,children:[(0,P.jsx)(V.Z,{placeholder:e("search"),handleChange:function(e){return me(e)}}),(0,P.jsxs)(v.Z,{style:{minWidth:150},value:ue,onChange:function(e){return de(e)},placeholder:e("select.language"),children:[(0,P.jsx)(v.Z.Option,{value:"",children:e("all")}),oe.map((function(e){return(0,P.jsx)(v.Z.Option,{value:e.locale,children:e.title},e.locale)}))]}),(0,P.jsxs)(v.Z,{style:{minWidth:150},value:_,onChange:function(e){return K(e)},placeholder:e("select.group"),children:[(0,P.jsx)(v.Z.Option,{value:"",children:e("all")}),(0,P.jsx)(v.Z.Option,{value:"web",children:e("web")}),(0,P.jsx)(v.Z.Option,{value:"mobile",children:e("mobile")}),(0,P.jsx)(v.Z.Option,{value:"errors",children:e("errors")})]}),(0,P.jsx)(p.Z,{icon:(0,P.jsx)(w.Z,{}),type:"primary",onClick:function(){return te(!0)},children:e("add.translation")})]}),children:[(0,P.jsx)(x.Z,{components:je,columns:be,dataSource:a,pagination:{pageSize:f,page:S,total:F},rowKey:function(e){return e.id},onChange:function(e){var n=e.pageSize,t=e.current,r=(t-1)*n;h(n),k(t),le(r)},loading:R,scroll:{x:1500}}),ne&&(0,P.jsx)(E,{visible:ne,setVisible:te,languages:oe,refetch:xe})]})}},55768:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(1413),a=t(47313),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},l=t(17469),o=function(e,n){return a.createElement(l.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:i}))};o.displayName="PlusCircleOutlined";var s=a.forwardRef(o)}}]);