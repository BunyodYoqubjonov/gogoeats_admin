"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[5565],{75565:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var i=n(47313),a=n(73591),l=n(97890),r=n(24511),o=n(59308),d=n(1413),s=n(29439),u=n(45705),c=n(26824),v=n(66204),h=n(59491),m=n(77181),x=n(78508),p=n(45464),f=n(12019),Z=n(90954),g=n(2717),j=n(23560),y=n(69658),w=n(74580),b=n(53233),_=n(13945),k=n(80314),C=n(71810),I=n(4901),P=n(14349),S=n(70816),q=n.n(S),M=n(10976),T=n(9274),A=n(68197),E=n(59624),F=n(66672),U=n(46417);function Y(e){var t=e.data,n=e.handleCancel,a=e.handleOk,l=e.visible,o=(0,r.$)().t,u=M.Z.useForm(),c=(0,s.Z)(u,1)[0],v=(0,i.useState)(!1),m=(0,s.Z)(v,2),x=m[0],p=m[1];return(0,U.jsx)(T.Z,{title:o(t.title),visible:l,onCancel:n,footer:[(0,U.jsx)(h.Z,{type:"primary",onClick:function(){return c.submit()},loading:x,children:o("save")}),(0,U.jsx)(h.Z,{type:"default",onClick:n,children:o("cancel")})],children:(0,U.jsx)(M.Z,{layout:"vertical",onFinish:function(e){p(!0);var t=(0,d.Z)((0,d.Z)({},e),{},{status:"canceled"});a(t)},form:c,children:(0,U.jsx)(M.Z.Item,{children:(0,U.jsx)(A.Z,{className:"mt-4",children:(0,U.jsx)(E.Z,{span:24,children:(0,U.jsx)(M.Z.Item,{name:"status_note",label:o("note"),rules:[{validator:function(e,t){return t?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(o("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(o("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(o("required")))}}],children:(0,U.jsx)(F.Z.TextArea,{maxLength:250,showCount:!0})})})})})})})}var H={type:"category"};function K(e){var t,n,a,o=e.parentId,S=(e.type,(0,r.$)().t),M=(0,i.useContext)(w._).setIsModalVisible,T=(0,i.useState)(!1),A=(0,s.Z)(T,2),E=A[0],F=A[1],K=(0,i.useState)(!1),N=(0,s.Z)(K,2),O=N[0],$=N[1],z=(0,i.useState)(null),B=(0,s.Z)(z,2),D=B[0],L=B[1],W=(0,g.I0)(),R=(0,l.s0)(),V=(0,g.v9)((function(e){return e.menu}),g.wU).activeMenu,G=(0,g.v9)((function(e){return e.requestModels}),g.wU),J=G.data,Q=G.meta,X=G.loading,ee=G.params,te=V.data,ne=(0,l.UO)().uuid,ie={search:null===te||void 0===te?void 0:te.search,sort:null===te||void 0===te?void 0:te.sort,column:null===te||void 0===te?void 0:te.column,perPage:null===te||void 0===te?void 0:te.perPage,page:null===te||void 0===te?void 0:te.page,parent_id:o},ae=(0,i.useState)([{title:S("created.by"),dataIndex:"createdBy",key:"createdBy",is_show:!0,render:function(e){return(0,U.jsxs)("span",{children:[e.firstname," ",null===e||void 0===e?void 0:e.lastname," ",(0,U.jsx)("a",{href:"tel:".concat(null===e||void 0===e?void 0:e.phone),children:null===e||void 0===e?void 0:e.phone})]})}},{title:S("created.at"),dataIndex:"created_at",key:"created_at",is_show:!0,render:function(e){return q()(e).format("YYYY-MM-DD HH:mm")}},{title:S("name"),dataIndex:"name",key:"name",is_show:!0,render:function(e,t){var n,i,a,l,r,o;return(0,U.jsxs)(u.Z,{children:[null===t||void 0===t||null===(n=t.model)||void 0===n||null===(i=n.translation)||void 0===i?void 0:i.title," ",(0,U.jsx)(I.WFu,{})," ",null===t||void 0===t||null===(a=t.data)||void 0===a||null===(l=a.title)||void 0===l?void 0:l[null===t||void 0===t||null===(r=t.model)||void 0===r||null===(o=r.translation)||void 0===o?void 0:o.locale]]})}},{title:S("image"),dataIndex:"img",key:"img",is_show:!0,render:function(e,t){var n,i,a;return(0,U.jsxs)(u.Z,{children:[(0,U.jsx)(c.Z,{src:(0,p.Z)(null===t||void 0===t||null===(n=t.model)||void 0===n?void 0:n.img),alt:"img_gallery",width:100,className:"rounded",preview:!0,placeholder:!0}),(0,U.jsx)(I.WFu,{}),(0,U.jsx)(c.Z,{src:(0,p.Z)(null===t||void 0===t||null===(i=t.data)||void 0===i||null===(a=i.images)||void 0===a?void 0:a.at(0)),alt:"img_gallery",width:100,className:"rounded",preview:!0,placeholder:!0})]})}},{title:S("status"),is_show:!0,dataIndex:"status",key:"status",render:function(e,t){return(0,U.jsx)("div",{children:"pending"===e?(0,U.jsx)(v.Z,{color:"blue",children:S(e)}):"canceled"===e?(0,U.jsx)(v.Z,{color:"error",children:S(e)}):(0,U.jsx)(v.Z,{color:"cyan",children:S(e)})})}},{title:S("options"),key:"options",dataIndex:"options",is_show:!0,render:function(e,t){return(0,U.jsxs)(u.Z,{children:[(0,U.jsx)(h.Z,{icon:(0,U.jsx)(f.Z,{}),onClick:function(){return function(e){W((0,Z.bL)({url:"category-request/".concat(e.id),id:"request_edit",name:S("request.edit")})),R("/category-request/".concat(e.id),{state:{parentId:o,parentUuid:ne}})}(t)}}),(0,U.jsx)(h.Z,{type:"primary",onClick:function(){L([{id:t.id,status:"approved"}]),M(!0)},children:S("accept")}),(0,U.jsx)(h.Z,{type:"primary",danger:!0,onClick:function(){L([{id:t.id,status:"canceled"}]),F(!0)},children:S("decline")})]})}}]),le=(0,s.Z)(ae,2),re=le[0],oe=le[1];(0,i.useEffect)((function(){W((0,C.aw)(ie)),W((0,Z.A_)(V))}),[V.refetch]),(0,k.Z)((function(){W((0,C.aw)(ie))}),[V.data]);var de=function(e){$(!0);var t={status:null===D||void 0===D?void 0:D.at(0).status,status_note:null===e||void 0===e?void 0:e.status_note};P.Z.changeStatus(null===D||void 0===D?void 0:D.at(0).id,t).then((function(){j.Am.success(S("successfully.changed")),W((0,C.aw)(H)),M(!1),L(null)})).finally((function(){F(!1),$(!1)}))},se={selectedRowKeys:D,onChange:function(e){L(e)}};return(0,U.jsxs)(m.Z,{title:S("requests"),extra:(0,U.jsx)(u.Z,{wrap:!0,children:(0,U.jsx)(b.Z,{columns:re,setColumns:oe})}),children:[(0,U.jsx)(x.Z,{scroll:{x:!0},rowSelection:se,columns:null===re||void 0===re?void 0:re.filter((function(e){return e.is_show})),dataSource:J,pagination:{pageSize:ee.perPage,page:(null===(t=V.data)||void 0===t?void 0:t.page)||1,total:Q.total,defaultCurrent:null===(n=V.data)||void 0===n?void 0:n.page,current:null===(a=V.data)||void 0===a?void 0:a.page},rowKey:function(e){return e.key},onChange:function(e,t,n){var i=e.pageSize,a=e.current,l=n.field,r=n.order,o=(0,_.Z)(r);W((0,Z.nc)({activeMenu:V,data:(0,d.Z)((0,d.Z)({},V.data),{},{perPage:i,page:a,column:l,sort:o})}))},loading:X}),(0,U.jsx)(y.Z,{click:de,text:S("change.status"),setText:L,loading:O}),(0,U.jsx)(Y,{data:{title:"decline"},visible:E,handleCancel:function(){return F(!1)},handleOk:de,laoding:O})]})}function N(){var e,t=(0,r.$)().t,n=(0,l.TH)();return(0,U.jsxs)(a.Z,{defaultActiveKey:(null===(e=n.state)||void 0===e?void 0:e.tab)||"list",destroyInactiveTabPane:!0,children:[(0,U.jsx)(a.Z.TabPane,{tab:t("category.list"),children:(0,U.jsx)(o.Z,{})},"list"),(0,U.jsx)(a.Z.TabPane,{tab:t("requests"),children:(0,U.jsx)(K,{})},"request")]})}}}]);