(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8601],{55940:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var l=t(1413),i=t(45987),a=(t(47313),t(59491)),r=t(47515),s=t(23560),o=t(24511),d=t(79492),c=t(46417),u=["size","onClick","type"];function v(e){var n=e.size,t=void 0===n?"":n,v=e.onClick,f=e.type,h=void 0===f?"default":f,m=(0,i.Z)(e,u),Z=(0,o.$)().t,p=(0,d.Z)().isDemo;return(0,c.jsx)(a.Z,(0,l.Z)({size:t,icon:(0,c.jsx)(r.Z,{}),onClick:function(e){p?s.Am.warning(Z("cannot.work.demo")):v(e)},type:h},m))}},53233:function(e,n,t){"use strict";var l=t(1413),i=t(29439),a=t(47313),r=t(56140),s=t(67251),o=t(45705),d=t(86345),c=t(78267),u=t(37388),v=t(59491),f=t(99587),h=t(24511),m=t(46417),Z=r.Z.Text;n.Z=function(e){var n=e.columns,t=void 0===n?[]:n,r=e.setColumns,p=e.style,x=e.size,j=void 0===x?"":x,g=e.iconOnly,y=(0,h.$)().t,b=(0,a.useState)(!1),_=(0,i.Z)(b,2),w=_[0],C=_[1],k=(0,m.jsx)(s.Z,{children:null===t||void 0===t?void 0:t.map((function(e,n){return(0,m.jsx)(s.Z.Item,{children:(0,m.jsxs)(o.Z,{className:"d-flex justify-content-between",children:[(0,m.jsx)(Z,{children:e.title}),(0,m.jsx)(d.Z,{defaultChecked:!0,onClick:function(){return function(e){var n=null===t||void 0===t?void 0:t.map((function(n){return n.dataIndex===e.dataIndex&&(n.is_show=!(null!==n&&void 0!==n&&n.is_show)),n}));r(n)}(e)},disabled:1===n})]})},e+n)}))});return(0,m.jsx)(c.Z,{overlay:k,trigger:["click"],onVisibleChange:function(e){C(e)},visible:w,children:(0,m.jsx)(u.Z,{title:y("change.columns"),children:(0,m.jsx)(v.Z,{style:(0,l.Z)({},p),size:j,icon:(0,m.jsx)(f.Z,{}),children:g?null:y("Columns")})})})}},48008:function(e,n,t){"use strict";t(47313);var l=t(9274),i=t(87569),a=t(59491),r=t(24511),s=t(46417);n.Z=function(e){var n=e.open,t=e.handleCancel,o=e.text,d=e.click,c=e.loading,u=e.subTitle,v=(0,r.$)().t;return(0,s.jsxs)(l.Z,{closable:!1,visible:n,footer:null,centered:!0,children:[(0,s.jsx)(i.ZP,{status:"warning",title:o,subTitle:u}),(0,s.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,s.jsx)(a.Z,{type:"primary",className:"mr-2",onClick:d,loading:c,children:v("yes")}),(0,s.jsx)(a.Z,{onClick:function(){return t()},children:v("no")})]})]})}},41481:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var l=t(1413),i=t(29439),a=t(45987),r=t(47313),s=t(66672),o=t(16031),d=t(40765),c=t(46417),u=["handleChange","defaultValue","resetSearch"];function v(e){var n=e.handleChange,t=e.defaultValue,v=e.resetSearch,f=(0,a.Z)(e,u),h=(0,r.useState)(t),m=(0,i.Z)(h,2),Z=m[0],p=m[1],x=(0,r.useMemo)((function(){return(0,o.debounce)((function(e){n(e)}),800)}),[n]);return(0,r.useEffect)((function(){p(t)}),[v,t]),(0,c.jsx)(s.Z,(0,l.Z)({value:Z,onChange:function(e){p(e.target.value),x(e.target.value)},prefix:(0,c.jsx)(d.Z,{})},f))}},89281:function(e,n,t){"use strict";t.d(n,{h:function(){return f}});var l=t(1413),i=t(29439),a=t(45987),r=t(47313),s=t(12279),o=t.n(s),d=t(74294),c=t(72652),u=t(46417),v=["fetchOptions","debounceTimeout","onClear"],f=function(e){var n=e.fetchOptions,t=e.debounceTimeout,s=void 0===t?400:t,f=e.onClear,h=(0,a.Z)(e,v),m=(0,r.useState)(!1),Z=(0,i.Z)(m,2),p=Z[0],x=Z[1],j=(0,r.useState)([]),g=(0,i.Z)(j,2),y=g[0],b=g[1],_=(0,r.useMemo)((function(){return o()((function(e){b([]),x(!0),n(e).then((function(e){b(e),x(!1)}))}),s)}),[n,s]);return(0,u.jsx)(d.Z,(0,l.Z)((0,l.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:_,onClear:function(){_(""),f&&f()},notFoundContent:p?(0,u.jsx)(c.Z,{size:"small"}):"no results"},h),{},{options:y,onFocus:function(){_("")}}))}},13945:function(e,n,t){"use strict";function l(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(n,{Z:function(){return l}})},17649:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});t(97421);function l(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};var n=e.location.split(", ");return{lat:Number(null===n||void 0===n?void 0:n[0]),lng:Number(null===n||void 0===n?void 0:n[1])}}},84017:function(e,n,t){"use strict";function l(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$";if(!e)return"0";var t=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return n+" "+t}t.d(n,{Z:function(){return l}})},33834:function(e,n,t){"use strict";t.d(n,{K:function(){return o}});var l=t(4942),i=t(1413),a=t(97890),r=t(74776),s=t.n(r),o=function(){var e=(0,a.s0)(),n=(0,a.TH)(),t=s().parse(n.search,{ignoreQueryPrefix:!0});return{values:t,set:function(n,a){return e({search:s().stringify((0,i.Z)((0,i.Z)({},t),{},(0,l.Z)({},n,a)))})},reset:function(n){var l=(0,i.Z)({},t);l[n]&&delete l[n],e({search:s().stringify((0,i.Z)({},l))})},clear:function(){return e({search:s().stringify({})})},merge:function(n){return e({search:s().stringify((0,i.Z)((0,i.Z)({},t),n))})}}}},53965:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return De}});var l=t(15861),i=t(4942),a=t(1413),r=t(93433),s=t(29439),o=t(87757),d=t.n(o),c=t(47313),u=t(73591),v=t(99096),f=t(66204),h=t(59491),m=t(45705),Z=t(67251),p=t(77181),x=t(37388),j=t(78267),g=t(78508),y=t(97890),b=t(12019),_=t(31741),w=t(47515),C=t(55768),k=t(15386),S=t(2717),I=t(90954),H=t(24511),M=t(80314),z=t(22054),V=t(70250),N=t(13945),D=t(41481),Y=t(73270),P=t(89281),F=t(49986),O=t(53233),A=t(23560),T=t(55940),L=t(90486),B=t(74580),$=t(69658),U=t(70816),E=t.n(U),K=t(97421),R=t(5958),q=t(26672),Q=t(3925),G=t(48008),W=t(33834),J=t(79492);function X(e){return e?E()(e).format("DD-MM-YYYY, HH:mm"):""}function ee(e){return e?E()(e).format("DD-MM-YYYY"):""}var ne=t(10976),te=t(9274),le=t(68197),ie=t(59624),ae=t(74294),re=t(46417);function se(e){var n=e.orderDetails,t=e.handleCancel,l=e.status,i=(0,S.v9)((function(e){return e.menu}),S.wU).activeMenu,r=ne.Z.useForm(),o=(0,s.Z)(r,1)[0],d=(0,S.I0)(),u=(0,H.$)().t,v=(0,c.useState)(!1),f=(0,s.Z)(v,2),m=f[0],Z=f[1],p=(0,c.useState)(l),x=(0,s.Z)(p,2),j=x[0],g=x[1];(0,c.useEffect)((function(){var e=l.findIndex((function(e){return e.name===n.status})),t=[l[e],l[e+1],{name:"canceled",id:8,active:!0}];e<0&&(t=[l[e+1],"canceled"]),g(t)}),[n]);return(0,re.jsx)(te.Z,{visible:!!n,title:n.title,onCancel:t,footer:[(0,re.jsx)(h.Z,{type:"primary",onClick:function(){return o.submit()},loading:m,children:u("save")},"save-form"),(0,re.jsx)(h.Z,{type:"default",onClick:t,children:u("cancel")},"cansel-modal")],children:(0,re.jsx)(ne.Z,{form:o,layout:"vertical",onFinish:function(e){Z(!0);var l=(0,a.Z)({},e);L.Z.updateStatus(n.id,l).then((function(){t(),d((0,I.xo)(i))})).finally((function(){return Z(!1)}))},initialValues:{status:n.status},children:(0,re.jsx)(le.Z,{gutter:12,children:(0,re.jsx)(ie.Z,{span:24,children:(0,re.jsx)(ne.Z.Item,{label:u("status"),name:"status",rules:[{required:!0,message:u("required")}],children:(0,re.jsx)(ae.Z,{children:null===j||void 0===j?void 0:j.map((function(e){return(0,re.jsx)(ae.Z.Option,{value:null===e||void 0===e?void 0:e.name,children:u(null===e||void 0===e?void 0:e.name)},null===e||void 0===e?void 0:e.name)}))})})})})})})}var oe=[{name:"new",id:"1",active:!0},{name:"accepted",id:"2",active:!0},{name:"ready",id:"3",active:!0},{name:"on_a_way",id:"4",active:!0},{name:"delivered",id:"5",active:!0},{name:"canceled",id:"6",active:!0}],de=t(83999),ce=t(84697),ue=t(51282),ve=t(58821),fe=t(18478),he=t(84618),me=t(17649),Ze=t(66461),pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},xe=t(17469),je=function(e,n){return c.createElement(xe.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:n,icon:pe}))};je.displayName="FileDoneOutlined";var ge=c.forwardRef(je),ye=t(3394),be=t(57864),_e=de.Z.Step,we=function(){return(0,re.jsx)("img",{src:fe,width:"50",alt:"Pin"})},Ce=function(){return(0,re.jsx)("img",{src:he,width:"50",alt:"Pin"})},ke=["blue","red","gold","volcano","cyan","lime"],Se=function(e){var n,t,l,i,a,r,o=e.id,d=e.handleCancel,u=(0,H.$)().t,v=(0,c.useState)(null),m=(0,s.Z)(v,2),Z=m[0],x=m[1],j=(0,c.useState)(null),g=(0,s.Z)(j,2),y=g[0],b=g[1],_=(0,c.useState)(null),w=(0,s.Z)(_,2),C=w[0],k=w[1],I=(0,S.v9)((function(e){return e.globalSettings}),S.wU).settings,M=(0,me.Z)(I),z=(0,c.useState)(0),V=(0,s.Z)(z,2),N=V[0],D=V[1],Y=(0,c.useState)((0,me.Z)(I)),P=(0,s.Z)(Y,2),F=P[0],O=P[1],A=(0,c.useState)((0,me.Z)(I)),T=(0,s.Z)(A,2),B=T[0],$=T[1],U=(0,c.useState)([{id:0,name:"new",icon:(0,re.jsx)(Ze.Z,{})},{id:1,name:"accepted",icon:(0,re.jsx)(ge,{})},{id:3,name:"ready",icon:(0,re.jsx)(ve.IQF,{})},{id:4,name:"on_a_way",icon:(0,re.jsx)(ve.qaI,{})},{id:5,name:"delivered",icon:(0,re.jsx)(ye.kme,{})}]),E=(0,s.Z)(U,2),R=E[0],q=E[1];var Q=(0,S.v9)((function(e){return e.globalSettings.settings}),S.wU).google_map_key;(0,c.useEffect)((function(){x(!0),L.Z.getById(o).then((function(e){var n,t=e.data;q("canceled"===t.status?[{id:1,name:"new",icon:(0,re.jsx)(Ze.Z,{})},{id:5,name:"canceled",icon:(0,re.jsx)(be.SV5,{})}]:R),D("canceled"===t.status?1:null===(n=R.find((function(e){return e.name===t.status})))||void 0===n?void 0:n.id),k("canceled"===t.status?"error":"success"),b(t),$({lat:t.address_from.latitude,lng:t.address_from.longitude}),O({lat:t.address_to.latitude,lng:t.address_to.longitude})})).finally((function(){x(!1)}))}),[]);return(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(te.Z,{visible:!!o,title:u("show.locations"),onCancel:function(){return d()},style:{minWidth:"80vw"},footer:[(0,re.jsx)(h.Z,{type:"default",onClick:d,children:u("cancel")},"cancelBtn")],children:Z?(0,re.jsx)(ue.Z,{}):(0,re.jsxs)(p.Z,{children:[(0,re.jsx)(de.Z,{current:N,status:C,className:"mb-5",children:null===R||void 0===R?void 0:R.map((function(e,n){return(0,re.jsx)(_e,{title:u(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+n)}))}),(0,re.jsxs)(le.Z,{gutter:12,children:[(0,re.jsxs)(ie.Z,{span:12,children:[(0,re.jsxs)("h3",{children:[u("order.id")," #",null===y||void 0===y?void 0:y.id]}),(0,re.jsxs)("p",{children:[(0,re.jsx)(ve.D73,{})," ",X(null===y||void 0===y?void 0:y.created_at)]}),(0,re.jsxs)("p",{children:[u("schedulet.at")," ",ee(null===y||void 0===y?void 0:y.delivery_date)]}),(0,re.jsxs)("span",{children:[(0,re.jsx)("strong",{children:null===y||void 0===y||null===(n=y.shop)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title})," ",null===y||void 0===y||null===(l=y.details)||void 0===l?void 0:l.map((function(e,n){var t;return(0,re.jsx)(f.Z,{color:ke[n],children:null===e||void 0===e||null===(t=e.stock)||void 0===t?void 0:t.product.translation.title})}))]})]}),(0,re.jsxs)(ie.Z,{span:12,children:[(0,re.jsxs)("p",{children:[u("status"),": ","new"===(null===y||void 0===y?void 0:y.status)?(0,re.jsx)(f.Z,{color:"blue",children:u(null===y||void 0===y?void 0:y.status)}):"canceled"===(null===y||void 0===y?void 0:y.status)?(0,re.jsx)(f.Z,{color:"error",children:u(null===y||void 0===y?void 0:y.status)}):(0,re.jsx)(f.Z,{color:"cyan",children:u(null===y||void 0===y?void 0:y.status)})]}),(0,re.jsxs)("p",{children:[u("order.type"),": ",(0,re.jsx)("strong",{children:u("parcel")})]}),(0,re.jsxs)("p",{children:[u("payment.method"),": ",(0,re.jsx)("strong",{children:null===y||void 0===y||null===(i=y.transaction)||void 0===i||null===(a=i.payment_system)||void 0===a?void 0:a.tag})]}),(0,re.jsxs)("p",{children:[u("payment.status"),": ",(0,re.jsx)("strong",{children:null===y||void 0===y||null===(r=y.transaction)||void 0===r?void 0:r.status})]})]}),(0,re.jsxs)(ie.Z,{span:24,className:"mt-5",children:[(0,re.jsx)("h4",{children:u("map")}),(0,re.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,re.jsxs)(ce.ZP,{bootstrapURLKeys:{key:K.kr||Q},defaultZoom:15,center:M,yesIWantToUseGoogleMapApiInternals:!0,options:{fullscreenControl:!1},onGoogleApiLoaded:function(e){for(var n=e.map,t=e.maps,l=[F,B].map((function(e){return{lat:Number(e.lat||"0"),lng:Number(e.lng||"0")}})),i=new t.LatLngBounds,a=0;a<l.length;a++)i.extend(l[a]);n.fitBounds(i)},children:[(0,re.jsx)(Ce,{lat:null===F||void 0===F?void 0:F.lat,lng:null===F||void 0===F?void 0:F.lng}),(0,re.jsx)(we,{lat:null===B||void 0===B?void 0:B.lat,lng:null===B||void 0===B?void 0:B.lng})]})})]})]})]})})})},Ie=t(83371),He=t(84017),Me=function(e){var n,t,l,i,a,r,o,d,u,v,f=e.id,m=e.handleCancel,Z=(0,H.$)().t,p=(0,c.useState)(null),x=(0,s.Z)(p,2),j=x[0],g=x[1],y=(0,c.useState)(null),b=(0,s.Z)(y,2),_=b[0],w=b[1];return(0,c.useEffect)((function(){g(!0),L.Z.getById(f).then((function(e){var n=e.data;w(n)})).finally((function(){g(!1)}))}),[]),console.log("data => ",_),(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(te.Z,{visible:!!f,title:"".concat(Z("parcel.id")," #").concat(f),onCancel:function(){return m()},footer:[(0,re.jsx)(h.Z,{type:"default",onClick:m,children:Z("cancel")},"cancelBtn")],className:"large-modal",children:j?(0,re.jsx)(ue.Z,{}):(0,re.jsxs)(le.Z,{gutter:24,children:[(0,re.jsx)(ie.Z,{span:12,children:(0,re.jsxs)(Ie.Z,{title:Z("sender.details"),bordered:!0,children:[(0,re.jsx)(Ie.Z.Item,{label:Z("username"),span:3,children:null===_||void 0===_?void 0:_.username_from}),(0,re.jsx)(Ie.Z.Item,{label:Z("phone"),span:3,children:null===_||void 0===_?void 0:_.phone_from}),(0,re.jsx)(Ie.Z.Item,{label:Z("address"),span:3,children:null===_||void 0===_||null===(n=_.address_from)||void 0===n?void 0:n.address}),(0,re.jsx)(Ie.Z.Item,{label:Z("house"),span:3,children:null===_||void 0===_||null===(t=_.address_from)||void 0===t?void 0:t.house}),(0,re.jsx)(Ie.Z.Item,{label:Z("stage"),span:3,children:null===_||void 0===_||null===(l=_.address_from)||void 0===l?void 0:l.stage}),(0,re.jsx)(Ie.Z.Item,{label:Z("room"),span:3,children:null===_||void 0===_||null===(i=_.address_from)||void 0===i?void 0:i.room})]})}),(0,re.jsx)(ie.Z,{span:12,children:(0,re.jsxs)(Ie.Z,{title:Z("receiver.details"),bordered:!0,children:[(0,re.jsx)(Ie.Z.Item,{label:Z("username"),span:3,children:null===_||void 0===_?void 0:_.username_to}),(0,re.jsx)(Ie.Z.Item,{label:Z("phone"),span:3,children:null===_||void 0===_?void 0:_.phone_to}),(0,re.jsx)(Ie.Z.Item,{label:Z("address"),span:3,children:null===_||void 0===_||null===(a=_.address_to)||void 0===a?void 0:a.address}),(0,re.jsx)(Ie.Z.Item,{label:Z("house"),span:3,children:null===_||void 0===_||null===(r=_.address_to)||void 0===r?void 0:r.house}),(0,re.jsx)(Ie.Z.Item,{label:Z("stage"),span:3,children:null===_||void 0===_||null===(o=_.address_to)||void 0===o?void 0:o.stage}),(0,re.jsx)(Ie.Z.Item,{label:Z("room"),span:3,children:null===_||void 0===_||null===(d=_.address_to)||void 0===d?void 0:d.room})]})}),(0,re.jsx)(ie.Z,{span:24,children:(0,re.jsxs)(Ie.Z,{bordered:!0,className:"mt-4",children:[(0,re.jsxs)(Ie.Z.Item,{label:Z("client"),span:3,children:[null===_||void 0===_||null===(u=_.user)||void 0===u?void 0:u.firstname," ",null===_||void 0===_||null===(v=_.user)||void 0===v?void 0:v.lastname]}),(0,re.jsx)(Ie.Z.Item,{label:Z("delivery.date.&.time"),span:3,children:X("".concat(null===_||void 0===_?void 0:_.delivery_date," ").concat(null===_||void 0===_?void 0:_.delivery_time))}),(0,re.jsx)(Ie.Z.Item,{label:Z("price"),span:3,children:(0,He.Z)(null===_||void 0===_?void 0:_.total_price)}),(0,re.jsx)(Ie.Z.Item,{label:Z("created.at"),span:3,children:X(null===_||void 0===_?void 0:_.createdAt)}),(0,re.jsx)(Ie.Z.Item,{label:Z("note"),span:3,children:null===_||void 0===_?void 0:_.note})]})})]})})})};function ze(e){var n,t,i,a=e.orderDetails,r=e.handleCancel,o=(0,H.$)().t,u=(0,S.v9)((function(e){return e.menu}),S.wU).activeMenu,v=ne.Z.useForm(),f=(0,s.Z)(v,1)[0],m=(0,S.I0)(),Z=(0,c.useState)(!1),p=(0,s.Z)(Z,2),x=p[0],j=p[1];function g(){return g=(0,l.Z)(d().mark((function e(n){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n.length?n:void 0,page:1,perPage:10,role:"deliveryman",exist_token:1},e.abrupt("return",F.Z.getAll(t).then((function(e){return e.data.map((function(e){return{label:[e.firstname,e.lastname].join(" "),value:e.id}}))})));case 2:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}return(0,re.jsx)(te.Z,{visible:!!a,onCancel:r,footer:[(0,re.jsx)(h.Z,{type:"primary",onClick:function(){return f.submit()},loading:x,children:o("save")},"saveBtn"),(0,re.jsx)(h.Z,{type:"default",onClick:r,children:o("cancel")},"cancelBtn")],children:(0,re.jsx)(ne.Z,{form:f,layout:"vertical",onFinish:function(e){var n={deliveryman_id:e.deliveryman.value};j(!0),L.Z.updateDelivery(a.id,n).then((function(){r(),m((0,I.xo)(u))})).finally((function(){return j(!1)}))},initialValues:{deliveryman:{label:a.deliveryman?(null===a||void 0===a||null===(n=a.deliveryman)||void 0===n?void 0:n.firstname)+" "+(null===a||void 0===a||null===(t=a.deliveryman)||void 0===t?void 0:t.lastname):null,value:a.deliveryman?null===a||void 0===a||null===(i=a.deliveryman)||void 0===i?void 0:i.id:null}},children:(0,re.jsx)(le.Z,{gutter:12,children:(0,re.jsx)(ie.Z,{span:24,children:(0,re.jsx)(ne.Z.Item,{label:o("deliveryman"),name:"deliveryman",rules:[{required:!0,message:o("required")}],children:(0,re.jsx)(P.h,{className:"w-100",debounceTimeout:500,placeholder:o("select.shop"),fetchOptions:function(e){return g.apply(this,arguments)},allowClear:!0})})})})})})}var Ve=u.Z.TabPane,Ne=v.Z.RangePicker;function De(){var e,n,t,o,v,U,ne,te,le=(0,y.UO)().type,ie=(0,S.I0)(),ae=(0,y.s0)(),de=(0,H.$)().t,ce=(0,J.Z)().isDemo,ue=(0,c.useState)(null),ve=(0,s.Z)(ue,2),fe=ve[0],he=ve[1],me=(0,c.useState)(null),Ze=(0,s.Z)(me,2),pe=Ze[0],xe=Ze[1],je=(0,c.useState)(null),ge=(0,s.Z)(je,2),ye=ge[0],be=ge[1],_e=(0,c.useState)(null),we=(0,s.Z)(_e,2),Ce=we[0],ke=we[1],Ie=[{name:"all",id:"7",active:!0}].concat((0,r.Z)(oe),[{name:"deleted_at",id:"8",active:!0}]),He=(0,c.useState)(null),De=(0,s.Z)(He,2),Ye=De[0],Pe=De[1],Fe=(0,c.useState)([{title:de("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0},{title:de("client"),is_show:!0,dataIndex:"user",key:"user",render:function(e){return(0,re.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})}},{title:de("status"),is_show:!0,dataIndex:"status",key:"status",render:function(e,n){return(0,re.jsxs)("div",{className:"cursor-pointer",children:["new"===e?(0,re.jsx)(f.Z,{color:"blue",children:de(e)}):"canceled"===e?(0,re.jsx)(f.Z,{color:"error",children:de(e)}):(0,re.jsx)(f.Z,{color:"cyan",children:de(e)}),"delivered"===e||"canceled"===e||n.deleted_at?"":(0,re.jsx)(b.Z,{onClick:function(e){e.stopPropagation(),he(n)},disabled:n.deleted_at})]})}},{title:de("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:function(e,n){return(0,re.jsx)("div",{children:"ready"===n.status&&"pickup"!==n.delivery_type?(0,re.jsx)(h.Z,{disabled:n.deleted_at,type:"link",onClick:function(){return be(n)},children:(0,re.jsxs)(m.Z,{children:[e?"".concat(e.firstname," ").concat(e.lastname):de("add.deliveryman"),(0,re.jsx)(b.Z,{})]})}):(0,re.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})})}},{title:de("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:function(e){var n;return de(null===e||void 0===e||null===(n=e.payment_system)||void 0===n?void 0:n.tag)||"-"}},{title:de("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at",render:function(e){return X(e)}},{title:de("delivery.date"),is_show:!0,dataIndex:"delivery_date",key:"delivery_date",render:function(e){return ee(e)}},{title:de("options"),is_show:!0,key:"options",render:function(e,n){return(0,re.jsxs)(m.Z,{children:[(0,re.jsx)(h.Z,{disabled:n.deleted_at,icon:(0,re.jsx)(R.Y4r,{}),onClick:function(e){e.stopPropagation(),xe(n.id)}}),(0,re.jsx)(h.Z,{disabled:n.deleted_at,icon:(0,re.jsx)(_.Z,{}),onClick:function(e){e.stopPropagation(),function(e){ke(e.id)}(n)}}),(0,re.jsx)(h.Z,{type:"primary",icon:(0,re.jsx)(b.Z,{}),onClick:function(e){e.stopPropagation(),function(e){ie((0,Y.bn)()),ie((0,I.bL)({url:"parcel-orders/".concat(e.id),id:"edit_parcel_order",name:de("edit.parcel.order")})),ae("/parcel-orders/".concat(e.id))}(n)},disabled:"delivered"===n.status||"canceled"===n.status||n.deleted_at}),(0,re.jsx)(T.Z,{disabled:n.deleted_at,icon:(0,re.jsx)(w.Z,{}),onClick:function(e){e.stopPropagation(),ln([n.id]),Le(!0),on(!0)}})]})}}]),Oe=(0,s.Z)(Fe,2),Ae=Oe[0],Te=Oe[1],Le=(0,c.useContext)(B._).setIsModalVisible,Be=(0,c.useState)(!1),$e=(0,s.Z)(Be,2),Ue=$e[0],Ee=$e[1],Ke=(0,S.v9)((function(e){return e.menu}),S.wU).activeMenu,Re=(0,W.K)(),qe=(0,c.useState)(Re.values.status||"all"),Qe=(0,s.Z)(qe,2),Ge=Qe[0],We=Qe[1],Je=(null===(e=Ke.data)||void 0===e?void 0:e.role)||Ge,Xe=Ke.data,en=(0,c.useState)(null),nn=(0,s.Z)(en,2),tn=nn[0],ln=nn[1],an=(0,c.useState)(null),rn=(0,s.Z)(an,2),sn=rn[0],on=rn[1],dn=(0,c.useState)(!1),cn=(0,s.Z)(dn,2),un=cn[0],vn=cn[1],fn=(0,c.useState)(E()().subtract(1,"months"),E()()),hn=(0,s.Z)(fn,2),mn=hn[0],Zn=hn[1],pn=(0,S.v9)((function(e){return e.parcelOrders}),S.wU),xn=pn.data,jn=pn.loading,gn=pn.params,yn=pn.meta,bn={search:null===Xe||void 0===Xe?void 0:Xe.search,sort:null===Xe||void 0===Xe?void 0:Xe.sort,column:null===Xe||void 0===Xe?void 0:Xe.column,perPage:null===Xe||void 0===Xe?void 0:Xe.perPage,page:null===Xe||void 0===Xe?void 0:Xe.page,user_id:null===Xe||void 0===Xe?void 0:Xe.user_id,status:"deleted_at"===Je||"all"===Je?void 0:Je,deleted_at:"deleted_at"===Je?"deleted_at":void 0,shop_id:null!==(null===(n=Ke.data)||void 0===n?void 0:n.shop_id)?null===(t=Ke.data)||void 0===t?void 0:t.shop_id:null,delivery_type:"scheduled"!==le?le:void 0,delivery_date_from:"scheduled"===le?E()().add(1,"day").format("YYYY-MM-DD"):void 0,date_from:mn?null===(o=mn[0])||void 0===o?void 0:o.format("YYYY-MM-DD"):null,date_to:mn?null===(v=mn[1])||void 0===v?void 0:v.format("YYYY-MM-DD"):null};(0,M.Z)((function(){ie((0,V.LF)(bn))}),[Xe,mn,le]);var _n=function(e,n){ie((0,I.nc)({activeMenu:Ke,data:(0,a.Z)((0,a.Z)({},Xe),(0,i.Z)({},n,e))}))};function wn(){return wn=(0,l.Z)(d().mark((function e(n){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n,perPage:10},e.abrupt("return",F.Z.search(t).then((function(e){return e.data.map((function(e){return{label:"".concat(e.firstname," ").concat(e.lastname),value:e.id}}))})));case 2:case"end":return e.stop()}}),e)}))),wn.apply(this,arguments)}var Cn=function(){he(null),be(null),xe(null),ke(null)};(0,c.useEffect)((function(){null!==Ke&&void 0!==Ke&&Ke.refetch&&(ie((0,V.LF)(bn)),ie((0,I.A_)(Ke)))}),[null===Ke||void 0===Ke?void 0:Ke.refetch]);var kn={selectedRowKeys:tn,onChange:function(e){ln(e)}},Sn=(0,re.jsx)(Z.Z,{children:"deleted_at"!==Ge?(0,re.jsx)(Z.Z.Item,{onClick:function(){ce?A.Am.warning(de("cannot.work.demo")):Pe({delete:!0})},children:(0,re.jsxs)(m.Z,{children:[(0,re.jsx)(w.Z,{}),de("delete.all")]})}):(0,re.jsx)(Z.Z.Item,{onClick:function(){ce?A.Am.warning(de("cannot.work.demo")):Pe({restore:!0})},children:(0,re.jsxs)(m.Z,{children:[(0,re.jsx)(q.uOc,{}),de("restore.all")]})})});return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(m.Z,{className:"justify-content-end w-100 mb-3",children:(0,re.jsx)(h.Z,{type:"primary",icon:(0,re.jsx)(C.Z,{}),onClick:function(){ie((0,Y.bn)()),ie((0,I.bL)({id:"parcel-orders/add",url:"parcel-orders/add",name:"add.parcel.order"})),ae("/parcel-orders/add")},style:{width:"100%"},children:de("add.parcel.order")})}),(0,re.jsx)(p.Z,{children:(0,re.jsxs)(m.Z,{wrap:!0,className:"order-filter",children:[(0,re.jsx)(D.Z,{defaultValue:null===Xe||void 0===Xe?void 0:Xe.search,resetSearch:!(null!==Xe&&void 0!==Xe&&Xe.search),placeholder:de("search"),handleChange:function(e){return _n(e,"search")}}),(0,re.jsx)(P.h,{placeholder:de("select.client"),fetchOptions:function(e){return wn.apply(this,arguments)},onSelect:function(e){return _n(e.value,"user_id")},onDeselect:function(){return _n(null,"user_id")},style:{width:"100%"},value:null===Xe||void 0===Xe?void 0:Xe.user_id}),(0,re.jsx)(Ne,{value:mn,onChange:function(e){return Zn(e)},disabledDate:function(e){return e&&e>E()().endOf("day")},style:{width:"100%"}}),"deleted_at"!==Ge&&(0,re.jsxs)(h.Z,{onClick:function(){Ee(!0);var e="all"!==Ge?{status:Ge}:null;L.Z.export(e).then((function(e){var n=K.S0+e.data.file_name;window.location.href=n})).finally((function(){return Ee(!1)}))},loading:Ue,style:{width:"100%"},children:[(0,re.jsx)(Q.bwQ,{className:"mr-2"}),de("export")]}),(0,re.jsx)(h.Z,{onClick:function(){(0,S.dC)((function(){ie((0,z.H5)()),ie((0,I.nc)({activeMenu:Ke,data:null})),ie((0,V.LF)({status:void 0,page:null===Xe||void 0===Xe?void 0:Xe.page,perPage:20}))})),Zn(void 0)},style:{width:"100%"},icon:(0,re.jsx)(k.Z,{}),children:de("clear")})]})}),(0,re.jsxs)(p.Z,{children:[(0,re.jsxs)(m.Z,{className:"justify-content-between align-items-start w-100",children:[(0,re.jsx)(u.Z,{onChange:function(e){var n,t=null===(n=Ie.find((function(n){return n.id===e})))||void 0===n?void 0:n.name;ie((0,I.nc)({activeMenu:Ke,data:{role:t,page:1}})),We(t),ae("?status=".concat(t))},type:"card",activeKey:Je,children:Ie.map((function(e){return(0,re.jsx)(Ve,{tab:de(e.name)},e.id)}))}),(0,re.jsxs)(m.Z,{children:[null!==tn&&0!==tn.length&&(0,re.jsx)(x.Z,{title:de("delete.selected"),children:(0,re.jsx)(T.Z,{type:"primary",onClick:function(){null===tn||0===tn.length?A.Am.warning(de("select.the.product")):(Le(!0),on(!1))},danger:!0})}),(0,re.jsx)(O.Z,{setColumns:Te,columns:Ae,iconOnly:!0}),(0,re.jsx)(j.Z,{overlay:Sn,children:(0,re.jsx)(h.Z,{children:de("options")})})]})]}),(0,re.jsx)(g.Z,{scroll:{x:!0},rowSelection:kn,columns:null===Ae||void 0===Ae?void 0:Ae.filter((function(e){return e.is_show})),dataSource:xn,loading:jn,pagination:{pageSize:gn.perPage,page:(null===(U=Ke.data)||void 0===U?void 0:U.page)||1,total:yn.total,defaultCurrent:null===(ne=Ke.data)||void 0===ne?void 0:ne.page,current:null===(te=Ke.data)||void 0===te?void 0:te.page},rowKey:function(e){return e.id},onChange:function(e,n,t){var l=e.pageSize,i=e.current,r=t.field,s=t.order,o=(0,N.Z)(s);ie((0,I.nc)({activeMenu:Ke,data:(0,a.Z)((0,a.Z)({},Xe),{},{perPage:l,page:i,column:r,sort:o})}))}})]}),fe&&(0,re.jsx)(se,{orderDetails:fe,handleCancel:Cn,status:oe}),ye&&(0,re.jsx)(ze,{orderDetails:ye,handleCancel:Cn}),pe&&(0,re.jsx)(Se,{id:pe,handleCancel:Cn}),!!Ce&&(0,re.jsx)(Me,{id:Ce,handleCancel:Cn}),(0,re.jsx)($.Z,{click:function(){vn(!0);var e=(0,a.Z)({},Object.assign.apply(Object,[{}].concat((0,r.Z)(tn.map((function(e,n){return(0,i.Z)({},"ids[".concat(n,"]"),e)}))))));L.Z.delete(e).then((function(){A.Am.success(de("successfully.deleted")),Le(!1),ie((0,V.LF)(bn)),on(null)})).finally((function(){ln(null),vn(!1)}))},text:de(sn?"delete":"all.delete"),loading:un,setText:ln}),Ye&&(0,re.jsx)(G.Z,{open:Ye,handleCancel:function(){return Pe(null)},click:Ye.restore?function(){vn(!0),L.Z.restoreAll().then((function(){A.Am.success(de("it.will.take.some.time.to.return.the.files")),ie((0,V.LF)(bn)),Pe(null)})).finally((function(){return vn(!1)}))}:function(){vn(!0),L.Z.dropAll().then((function(){A.Am.success(de("successfully.deleted")),ie((0,V.LF)(bn)),Pe(null)})).finally((function(){return vn(!1)}))},text:Ye.restore?de("restore.modal.text"):de("read.carefully"),subTitle:Ye.restore?"":de("confirm.deletion"),loading:un,setText:ln})]})}},15386:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var l=t(1413),i=t(47313),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},r=t(17469),s=function(e,n){return i.createElement(r.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:n,icon:a}))};s.displayName="ClearOutlined";var o=i.forwardRef(s)},99587:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var l=t(1413),i=t(47313),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},r=t(17469),s=function(e,n){return i.createElement(r.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:n,icon:a}))};s.displayName="TableOutlined";var o=i.forwardRef(s)},84618:function(e,n,t){"use strict";e.exports=t.p+"static/media/shop.46d7a94ca800c711764a.png"},18478:function(e,n,t){"use strict";e.exports=t.p+"static/media/user.fbe7078c52acde79652d.jpg"},24654:function(){}}]);