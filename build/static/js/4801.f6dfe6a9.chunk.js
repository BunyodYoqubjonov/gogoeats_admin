"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4801],{89802:function(e,t,n){n.d(t,{q:function(){return d}});var u=n(1413),s=n(29439),a=n(45987),r=n(47313),i=n(74294),l=n(72652),c=n(46417),o=["fetchOptions","refetch"],d=function(e){var t=e.fetchOptions,n=e.refetch,d=void 0!==n&&n,f=(0,a.Z)(e,o),m=(0,r.useState)(!1),h=(0,s.Z)(m,2),x=h[0],p=h[1],Z=(0,r.useState)([]),b=(0,s.Z)(Z,2),v=b[0],j=b[1];return(0,c.jsx)(i.Z,(0,u.Z)((0,u.Z)({labelInValue:!0,filterOption:!1,notFoundContent:x?(0,c.jsx)(l.Z,{size:"small"}):"no results"},f),{},{options:x?[]:v,onFocus:function(){v.length&&!d||(p(!0),t().then((function(e){j(e),p(!1)})))}}))}},24801:function(e,t,n){n.r(t);var u=n(1413),s=n(29439),a=n(47313),r=n(97890),i=n(23560),l=n(10976),c=n(77181),o=n(2717),d=n(90954),f=n(24511),m=n(70816),h=n.n(m),x=n(96708),p=n(73346),Z=n(77397),b=n(46417);t.default=function(){var e=(0,f.$)().t,t=(0,o.v9)((function(e){return e.menu}),o.wU).activeMenu,n=(0,o.I0)(),m=l.Z.useForm(),v=(0,s.Z)(m,1)[0],j=(0,r.s0)();(0,a.useEffect)((function(){return function(){var e=v.getFieldsValue(!0),s=(0,u.Z)((0,u.Z)({},e),{},{expired_at:JSON.stringify(null===e||void 0===e?void 0:e.expired_at)});n((0,d.nc)({activeMenu:t,data:s}))}}),[]);return(0,b.jsx)(c.Z,{title:e("add.bonus"),className:"h-100",children:(0,b.jsx)(Z.Z,{form:v,handleSubmit:function(s){var a={expired_at:h()(s.expired_at).format("YYYY-MM-DD"),status:s.status,type:"count",bonusable_id:s.bonusable_id.value,value:s.value,bonus_stock_id:s.bonus_stock_id.value,bonus_quantity:s.bonus_quantity},r="seller/bonus/product";return p.Z.create(a).then((function(){i.Am.success(e("successfully.created")),(0,o.dC)((function(){n((0,d.ph)((0,u.Z)((0,u.Z)({},t),{},{nextUrl:r}))),n((0,x.k)({}))})),j("/".concat(r))}))}})})}},77397:function(e,t,n){n.d(t,{Z:function(){return j}});var u=n(1413),s=n(29439),a=n(47313),r=n(10976),i=n(68197),l=n(59624),c=n(16124),o=n(99096),d=n(86345),f=n(59491),m=n(89802),h=n(70816),x=n.n(h),p=n(24511),Z=n(2717),b=n(18333),v=n(46417);function j(e){var t=e.form,n=e.handleSubmit,h=(0,p.$)().t,j=(0,Z.v9)((function(e){return e.menu}),Z.wU).activeMenu,_=(0,a.useState)(!1),q=(0,s.Z)(_,2),y=q[0],g=q[1];function k(){return b.Z.getStock().then((function(e){return e.data.map((function(e){return{label:e.product.translation.title+"".concat(e.extras.length>0?": ".concat(e.extras.map((function(e){return e.value})).join(", ")):""),value:e.id,key:e.id}}))}))}return(0,v.jsxs)(r.Z,{name:"product-bonus-form",layout:"vertical",onFinish:function(e){g(!0),n(e).finally((function(){return g(!1)}))},form:t,initialValues:(0,u.Z)((0,u.Z)({status:!0},j.data),function(){var e,t;if(null===(e=j.data)||void 0===e||!e.expired_at)return{};var n=JSON.parse(null===(t=j.data)||void 0===t?void 0:t.expired_at);return{expired_at:x()(n,"HH:mm:ss")}}()),className:"d-flex flex-column h-100",children:[(0,v.jsxs)(i.Z,{gutter:12,children:[(0,v.jsx)(l.Z,{span:12,children:(0,v.jsx)(r.Z.Item,{label:h("products.stock"),name:"bonusable_id",rules:[{required:!0,message:h("required")}],children:(0,v.jsx)(m.q,{fetchOptions:k,debounceTimeout:200})})}),(0,v.jsx)(l.Z,{span:12,children:(0,v.jsx)(r.Z.Item,{label:h("product.quantity"),name:"value",rules:[{required:!0,message:h("required")}],children:(0,v.jsx)(c.Z,{className:"w-100"})})}),(0,v.jsx)(l.Z,{span:12,children:(0,v.jsx)(r.Z.Item,{label:h("bonus.product.stock"),name:"bonus_stock_id",rules:[{required:!0,message:h("required")}],children:(0,v.jsx)(m.q,{fetchOptions:k,debounceTimeout:200})})}),(0,v.jsx)(l.Z,{span:12,children:(0,v.jsx)(r.Z.Item,{label:h("bonus.product.quantity"),name:"bonus_quantity",rules:[{required:!0,message:h("required")}],children:(0,v.jsx)(c.Z,{className:"w-100"})})}),(0,v.jsx)(l.Z,{span:12,children:(0,v.jsx)(r.Z.Item,{name:"expired_at",label:h("expired.at"),rules:[{required:!0,message:h("required")}],children:(0,v.jsx)(o.Z,{className:"w-100",placeholder:"",disabledDate:function(e){return x()().add(-1,"days")>=e}})})}),(0,v.jsx)(l.Z,{span:8,children:(0,v.jsx)(r.Z.Item,{label:h("active"),name:"status",valuePropName:"checked",children:(0,v.jsx)(d.Z,{})})})]}),(0,v.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,v.jsx)("div",{className:"pb-5",children:(0,v.jsx)(f.Z,{type:"primary",htmlType:"submit",loading:y,children:h("submit")})})})]})}}}]);