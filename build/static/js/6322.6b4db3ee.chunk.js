"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[6322],{73431:function(e,n,t){var r=t(47313),i=t(39180),a=t(2717),l=t(28830),o=t(60535),u=t(46417);n.Z=function(){var e=(0,a.I0)(),n=(0,a.v9)((function(e){return e.formLang}),a.wU),t=n.languages,c=n.defaultLang;(0,r.useEffect)((function(){o.Z.getAllActive().then((function(n){var t=n.data;e((0,l.dc)(t)),e((0,l.mh)(t.find((function(e){return 1===e.default})).locale))}))}),[]);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(i.ZP.Group,{value:c,onChange:function(n){var t=n.target.value;e((0,l.mh)(t))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((function(e){return(0,u.jsx)(i.ZP.Button,{value:e.locale,children:e.title},e.id)}))})})}},13622:function(e,n,t){t.d(n,{R:function(){return m}});var r=t(1413),i=t(29439),a=t(45987),l=t(47313),o=t(12279),u=t.n(o),c=t(74294),s=t(72652),d=t(46417),v=["fetchOptions","debounceTimeout","refetch"],m=function(e){var n=e.fetchOptions,t=e.debounceTimeout,o=void 0===t?400:t,m=(e.refetch,(0,a.Z)(e,v)),f=(0,l.useState)(!1),p=(0,i.Z)(f,2),h=p[0],Z=p[1],g=(0,l.useState)([]),j=(0,i.Z)(g,2),x=j[0],y=j[1],b=(0,l.useMemo)((function(){return u()((function(e){y([]),Z(!0),n(e).then((function(e){y(e),Z(!1)}))}),o)}),[n,o]);return(0,d.jsx)(c.Z,(0,r.Z)((0,r.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,onClear:function(){return b("")},filterOption:!1,onSearch:b,notFoundContent:h?(0,d.jsx)(s.Z,{size:"small"}):"no results"},m),{},{options:x,onFocus:function(){b("")}}))}},26322:function(e,n,t){t.r(n);var r=t(93433),i=t(4942),a=t(1413),l=t(29439),o=t(47313),u=t(10976),c=t(77181),s=t(72652),d=t(23560),v=t(97890),m=t(73431),f=t(2717),p=t(90954),h=t(30763),Z=t(97421),g=t(24511),j=t(42472),x=t(59308),y=t(66733),b=t(46417);n.default=function(){var e=(0,g.$)().t,n=(0,v.s0)(),t=(0,f.I0)(),w=(0,o.useState)(null),I=(0,l.Z)(w,2),P=I[0],k=I[1],_=(0,f.v9)((function(e){return e.menu}),f.wU),S=_.activeMenu,E=(0,v.TH)().state,U=(0,o.useState)(!1),C=(0,l.Z)(U,2),F=C[0],q=C[1],L=u.Z.useForm(),O=(0,l.Z)(L,1)[0],M=(0,o.useState)(null),T=(0,l.Z)(M,2),V=T[0],A=T[1],N=(0,v.UO)().uuid,z=(0,f.v9)((function(e){return e.category}),f.wU),B=z.params,H=(0,f.v9)((function(e){return e.formLang}),f.wU),R=H.languages,$=(0,a.Z)((0,a.Z)({},B),{},{type:null!==E&&void 0!==E&&E.parentId?"sub_main":"main",parent_id:null===E||void 0===E?void 0:E.parentId});(0,o.useEffect)((function(){return function(){var e=O.getFieldsValue(!0);(0,f.dC)((function(){t((0,p.nc)({activeMenu:S,data:e})),t((0,j.pE)($))}))}}),[]);var G=function(e){q(!0),h.Z.getById(e).then((function(e){var n,l,o,u,c=e.data,s=(0,a.Z)((0,a.Z)((0,a.Z)({},c),function(e){if(!e)return{};var n=e.translations,t=R.map((function(e){var t,r,a;return a={},(0,i.Z)(a,"title[".concat(e.locale,"]"),null===(t=n.find((function(n){return n.locale===e.locale})))||void 0===t?void 0:t.title),(0,i.Z)(a,"description[".concat(e.locale,"]"),null===(r=n.find((function(n){return n.locale===e.locale})))||void 0===r?void 0:r.description),a}));return Object.assign.apply(Object,[{}].concat((0,r.Z)(t)))}(c)),{},{image:[(u=c.img,{name:u,url:Z.bV+u})],keywords:null===c||void 0===c||null===(n=c.keywords)||void 0===n?void 0:n.split(","),parent_id:{label:null===(l=c.parent)||void 0===l||null===(o=l.translation)||void 0===o?void 0:o.title,value:c.parent_id,key:c.parent_id}});k(c.id),O.setFieldsValue(s),t((0,p.nc)({activeMenu:S,data:s}))})).finally((function(){q(!1),t((0,p.A_)(S))}))};return(0,o.useEffect)((function(){G(N)}),[S.refetch,N,null===E||void 0===E?void 0:E.parentId]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.Z,{title:null!==E&&void 0!==E&&E.parentId?e("edit.sub.category"):e("edit.category"),extra:(0,b.jsx)(m.Z,{}),children:F?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,b.jsx)(s.Z,{size:"large",className:"mt-5 pt-5"})}):(0,b.jsx)(y.Z,{form:O,handleSubmit:function(r,i){var l,o,u=(0,a.Z)((0,a.Z)({},r),{},{type:null!==E&&void 0!==E&&E.parentId?"sub_main":"main",active:r.active?1:0,keywords:r.keywords.join(","),parent_id:(null===E||void 0===E?void 0:E.parentId)||(null===(l=r.parent_id)||void 0===l?void 0:l.value),"images[0]":null===(o=i[0])||void 0===o?void 0:o.name}),c=null!==E&&void 0!==E&&E.parentId?"category/".concat(null===E||void 0===E?void 0:E.parentUuid):"catalog/categories";return h.Z.update(N,u).then((function(){d.Am.success(e("successfully.updated")),(0,f.dC)((function(){t((0,p.ph)((0,a.Z)((0,a.Z)({},S),{},{nextUrl:c}))),t((0,j.pE)($))})),n("/".concat(c))})).catch((function(e){return A(e.response.data.params)}))},error:V})}),!!P&&!(null!==E&&void 0!==E&&E.parentId)&&(0,b.jsx)(x.Z,{type:"sub_main",parentId:P})]})}},66733:function(e,n,t){t.d(n,{Z:function(){return I}});var r=t(1413),i=t(15861),a=t(29439),l=t(87757),o=t.n(l),u=t(47313),c=t(10976),s=t(68197),d=t(59624),v=t(66672),m=t(74294),f=t(86345),p=t(59491),h=t(52421),Z=t(13622),g=t(5764),j=t(24511),x=t(2717),y=t(97890),b=t(30763),w=t(46417);function I(e){var n,t,l=e.form,I=e.handleSubmit,P=e.error,k=(0,j.$)().t,_=(0,x.v9)((function(e){return e.menu}),x.wU),S=_.activeMenu,E=(0,x.v9)((function(e){return e.formLang}),x.wU),U=E.defaultLang,C=E.languages,F=(0,y.TH)().state,q=(0,u.useState)(!1),L=(0,a.Z)(q,2),O=L[0],M=L[1],T=(0,u.useState)(null!==(n=S.data)&&void 0!==n&&n.image?null===(t=S.data)||void 0===t?void 0:t.image:[]),V=(0,a.Z)(T,2),A=V[0],N=V[1];function z(){return(z=(0,i.Z)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={perPage:100,type:null!==F&&void 0!==F&&F.parentId?"main":"sub_shop",active:1,search:n},e.abrupt("return",b.Z.selectPaginate(t).then((function(e){return e.data.map((function(e){var n;return{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id,key:e.id}}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,w.jsxs)(c.Z,{name:"basic",layout:"vertical",onFinish:function(e){M(!0),I(e,A).finally((function(){return M(!1)}))},initialValues:(0,r.Z)({active:!0},S.data),form:l,children:[(0,w.jsxs)(s.Z,{gutter:12,children:[(0,w.jsx)(d.Z,{span:12,children:C.map((function(e,n){return(0,w.jsx)(c.Z.Item,{label:k("name"),name:"title[".concat(e.locale,"]"),help:P&&P["title.".concat(U)]?P["title.".concat(U)][0]:null,validateStatus:P?"error":"success",rules:[{validator:function(n,t){return t||(null===e||void 0===e?void 0:e.locale)!==U?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(k("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(k("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(k("required")))}}],hidden:e.locale!==U,children:(0,w.jsx)(v.Z,{placeholder:k("name")})},e.title+n)}))}),(0,w.jsx)(d.Z,{span:12,children:C.map((function(e,n){return(0,w.jsx)(c.Z.Item,{label:k("description"),name:"description[".concat(e.locale,"]"),rules:[{validator:function(n,t){return t||(null===e||void 0===e?void 0:e.locale)!==U?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(k("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<5?Promise.reject(new Error(k("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(k("required")))}}],hidden:e.locale!==U,children:(0,w.jsx)(h.Z,{rows:4})},e.locale+n)}))}),(0,w.jsx)(d.Z,{span:12,children:(0,w.jsx)(c.Z.Item,{label:k("keywords"),name:"keywords",rules:[{required:!0,message:k("required")}],children:(0,w.jsx)(m.Z,{mode:"tags",style:{width:"100%"}})})}),!(null!==F&&void 0!==F&&F.parentId)&&(0,w.jsx)(d.Z,{span:12,children:(0,w.jsx)(c.Z.Item,{label:k("parent.category"),name:"parent_id",rules:[{required:!0,message:k("required")}],children:(0,w.jsx)(Z.R,{refetch:!0,fetchOptions:function(e){return z.apply(this,arguments)}})})}),(0,w.jsx)(d.Z,{span:4,children:(0,w.jsx)(c.Z.Item,{label:k("image"),name:"images",rules:[{validator:function(){return 0===(null===A||void 0===A?void 0:A.length)?Promise.reject(new Error(k("required"))):Promise.resolve()}}],children:(0,w.jsx)(g.Z,{type:"categories",imageList:A,setImageList:N,form:l,multiple:!1})})}),(0,w.jsx)(d.Z,{span:2,children:(0,w.jsx)(c.Z.Item,{label:k("active"),name:"active",valuePropName:"checked",children:(0,w.jsx)(f.Z,{})})})]}),(0,w.jsx)(p.Z,{type:"primary",htmlType:"submit",loading:O,children:k("submit")})]})}}}]);